Index: ../flexi_cart/example/macos/Runner.xcodeproj/project.pbxproj
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>// !$*UTF8*$!\n{\n\tarchiveVersion = 1;\n\tclasses = {\n\t};\n\tobjectVersion = 54;\n\tobjects = {\n\n/* Begin PBXAggregateTarget section */\n\t\t33CC111A2044C6BA0003C045 /* Flutter Assemble */ = {\n\t\t\tisa = PBXAggregateTarget;\n\t\t\tbuildConfigurationList = 33CC111B2044C6BA0003C045 /* Build configuration list for PBXAggregateTarget \"Flutter Assemble\" */;\n\t\t\tbuildPhases = (\n\t\t\t\t33CC111E2044C6BF0003C045 /* ShellScript */,\n\t\t\t);\n\t\t\tdependencies = (\n\t\t\t);\n\t\t\tname = \"Flutter Assemble\";\n\t\t\tproductName = FLX;\n\t\t};\n/* End PBXAggregateTarget section */\n\n/* Begin PBXBuildFile section */\n\t\t331C80D8294CF71000263BE5 /* RunnerTests.swift in Sources */ = {isa = PBXBuildFile; fileRef = 331C80D7294CF71000263BE5 /* RunnerTests.swift */; };\n\t\t335BBD1B22A9A15E00E9071D /* GeneratedPluginRegistrant.swift in Sources */ = {isa = PBXBuildFile; fileRef = 335BBD1A22A9A15E00E9071D /* GeneratedPluginRegistrant.swift */; };\n\t\t33CC10F12044A3C60003C045 /* AppDelegate.swift in Sources */ = {isa = PBXBuildFile; fileRef = 33CC10F02044A3C60003C045 /* AppDelegate.swift */; };\n\t\t33CC10F32044A3C60003C045 /* Assets.xcassets in Resources */ = {isa = PBXBuildFile; fileRef = 33CC10F22044A3C60003C045 /* Assets.xcassets */; };\n\t\t33CC10F62044A3C60003C045 /* MainMenu.xib in Resources */ = {isa = PBXBuildFile; fileRef = 33CC10F42044A3C60003C045 /* MainMenu.xib */; };\n\t\t33CC11132044BFA00003C045 /* MainFlutterWindow.swift in Sources */ = {isa = PBXBuildFile; fileRef = 33CC11122044BFA00003C045 /* MainFlutterWindow.swift */; };\n/* End PBXBuildFile section */\n\n/* Begin PBXContainerItemProxy section */\n\t\t331C80D9294CF71000263BE5 /* PBXContainerItemProxy */ = {\n\t\t\tisa = PBXContainerItemProxy;\n\t\t\tcontainerPortal = 33CC10E52044A3C60003C045 /* Project object */;\n\t\t\tproxyType = 1;\n\t\t\tremoteGlobalIDString = 33CC10EC2044A3C60003C045;\n\t\t\tremoteInfo = Runner;\n\t\t};\n\t\t33CC111F2044C79F0003C045 /* PBXContainerItemProxy */ = {\n\t\t\tisa = PBXContainerItemProxy;\n\t\t\tcontainerPortal = 33CC10E52044A3C60003C045 /* Project object */;\n\t\t\tproxyType = 1;\n\t\t\tremoteGlobalIDString = 33CC111A2044C6BA0003C045;\n\t\t\tremoteInfo = FLX;\n\t\t};\n/* End PBXContainerItemProxy section */\n\n/* Begin PBXCopyFilesBuildPhase section */\n\t\t33CC110E2044A8840003C045 /* Bundle Framework */ = {\n\t\t\tisa = PBXCopyFilesBuildPhase;\n\t\t\tbuildActionMask = 2147483647;\n\t\t\tdstPath = \"\";\n\t\t\tdstSubfolderSpec = 10;\n\t\t\tfiles = (\n\t\t\t);\n\t\t\tname = \"Bundle Framework\";\n\t\t\trunOnlyForDeploymentPostprocessing = 0;\n\t\t};\n/* End PBXCopyFilesBuildPhase section */\n\n/* Begin PBXFileReference section */\n\t\t331C80D5294CF71000263BE5 /* RunnerTests.xctest */ = {isa = PBXFileReference; explicitFileType = wrapper.cfbundle; includeInIndex = 0; path = RunnerTests.xctest; sourceTree = BUILT_PRODUCTS_DIR; };\n\t\t331C80D7294CF71000263BE5 /* RunnerTests.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = RunnerTests.swift; sourceTree = \"<group>\"; };\n\t\t333000ED22D3DE5D00554162 /* Warnings.xcconfig */ = {isa = PBXFileReference; lastKnownFileType = text.xcconfig; path = Warnings.xcconfig; sourceTree = \"<group>\"; };\n\t\t335BBD1A22A9A15E00E9071D /* GeneratedPluginRegistrant.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = GeneratedPluginRegistrant.swift; sourceTree = \"<group>\"; };\n\t\t33CC10ED2044A3C60003C045 /* example.app */ = {isa = PBXFileReference; explicitFileType = wrapper.application; includeInIndex = 0; path = \"example.app\"; sourceTree = BUILT_PRODUCTS_DIR; };\n\t\t33CC10F02044A3C60003C045 /* AppDelegate.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = AppDelegate.swift; sourceTree = \"<group>\"; };\n\t\t33CC10F22044A3C60003C045 /* Assets.xcassets */ = {isa = PBXFileReference; lastKnownFileType = folder.assetcatalog; name = Assets.xcassets; path = Runner/Assets.xcassets; sourceTree = \"<group>\"; };\n\t\t33CC10F52044A3C60003C045 /* Base */ = {isa = PBXFileReference; lastKnownFileType = file.xib; name = Base; path = Base.lproj/MainMenu.xib; sourceTree = \"<group>\"; };\n\t\t33CC10F72044A3C60003C045 /* Info.plist */ = {isa = PBXFileReference; lastKnownFileType = text.plist.xml; name = Info.plist; path = Runner/Info.plist; sourceTree = \"<group>\"; };\n\t\t33CC11122044BFA00003C045 /* MainFlutterWindow.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = MainFlutterWindow.swift; sourceTree = \"<group>\"; };\n\t\t33CEB47222A05771004F2AC0 /* Flutter-Debug.xcconfig */ = {isa = PBXFileReference; lastKnownFileType = text.xcconfig; path = \"Flutter-Debug.xcconfig\"; sourceTree = \"<group>\"; };\n\t\t33CEB47422A05771004F2AC0 /* Flutter-Release.xcconfig */ = {isa = PBXFileReference; lastKnownFileType = text.xcconfig; path = \"Flutter-Release.xcconfig\"; sourceTree = \"<group>\"; };\n\t\t33CEB47722A0578A004F2AC0 /* Flutter-Generated.xcconfig */ = {isa = PBXFileReference; lastKnownFileType = text.xcconfig; name = \"Flutter-Generated.xcconfig\"; path = \"ephemeral/Flutter-Generated.xcconfig\"; sourceTree = \"<group>\"; };\n\t\t33E51913231747F40026EE4D /* DebugProfile.entitlements */ = {isa = PBXFileReference; lastKnownFileType = text.plist.entitlements; path = DebugProfile.entitlements; sourceTree = \"<group>\"; };\n\t\t33E51914231749380026EE4D /* Release.entitlements */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = text.plist.entitlements; path = Release.entitlements; sourceTree = \"<group>\"; };\n\t\t33E5194F232828860026EE4D /* AppInfo.xcconfig */ = {isa = PBXFileReference; lastKnownFileType = text.xcconfig; path = AppInfo.xcconfig; sourceTree = \"<group>\"; };\n\t\t7AFA3C8E1D35360C0083082E /* Release.xcconfig */ = {isa = PBXFileReference; lastKnownFileType = text.xcconfig; path = Release.xcconfig; sourceTree = \"<group>\"; };\n\t\t9740EEB21CF90195004384FC /* Debug.xcconfig */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = text.xcconfig; path = Debug.xcconfig; sourceTree = \"<group>\"; };\n/* End PBXFileReference section */\n\n/* Begin PBXFrameworksBuildPhase section */\n\t\t331C80D2294CF70F00263BE5 /* Frameworks */ = {\n\t\t\tisa = PBXFrameworksBuildPhase;\n\t\t\tbuildActionMask = 2147483647;\n\t\t\tfiles = (\n\t\t\t);\n\t\t\trunOnlyForDeploymentPostprocessing = 0;\n\t\t};\n\t\t33CC10EA2044A3C60003C045 /* Frameworks */ = {\n\t\t\tisa = PBXFrameworksBuildPhase;\n\t\t\tbuildActionMask = 2147483647;\n\t\t\tfiles = (\n\t\t\t);\n\t\t\trunOnlyForDeploymentPostprocessing = 0;\n\t\t};\n/* End PBXFrameworksBuildPhase section */\n\n/* Begin PBXGroup section */\n\t\t331C80D6294CF71000263BE5 /* RunnerTests */ = {\n\t\t\tisa = PBXGroup;\n\t\t\tchildren = (\n\t\t\t\t331C80D7294CF71000263BE5 /* RunnerTests.swift */,\n\t\t\t);\n\t\t\tpath = RunnerTests;\n\t\t\tsourceTree = \"<group>\";\n\t\t};\n\t\t33BA886A226E78AF003329D5 /* Configs */ = {\n\t\t\tisa = PBXGroup;\n\t\t\tchildren = (\n\t\t\t\t33E5194F232828860026EE4D /* AppInfo.xcconfig */,\n\t\t\t\t9740EEB21CF90195004384FC /* Debug.xcconfig */,\n\t\t\t\t7AFA3C8E1D35360C0083082E /* Release.xcconfig */,\n\t\t\t\t333000ED22D3DE5D00554162 /* Warnings.xcconfig */,\n\t\t\t);\n\t\t\tpath = Configs;\n\t\t\tsourceTree = \"<group>\";\n\t\t};\n\t\t33CC10E42044A3C60003C045 = {\n\t\t\tisa = PBXGroup;\n\t\t\tchildren = (\n\t\t\t\t33FAB671232836740065AC1E /* Runner */,\n\t\t\t\t33CEB47122A05771004F2AC0 /* Flutter */,\n\t\t\t\t331C80D6294CF71000263BE5 /* RunnerTests */,\n\t\t\t\t33CC10EE2044A3C60003C045 /* Products */,\n\t\t\t\tD73912EC22F37F3D000D13A0 /* Frameworks */,\n\t\t\t);\n\t\t\tsourceTree = \"<group>\";\n\t\t};\n\t\t33CC10EE2044A3C60003C045 /* Products */ = {\n\t\t\tisa = PBXGroup;\n\t\t\tchildren = (\n\t\t\t\t33CC10ED2044A3C60003C045 /* example.app */,\n\t\t\t\t331C80D5294CF71000263BE5 /* RunnerTests.xctest */,\n\t\t\t);\n\t\t\tname = Products;\n\t\t\tsourceTree = \"<group>\";\n\t\t};\n\t\t33CC11242044D66E0003C045 /* Resources */ = {\n\t\t\tisa = PBXGroup;\n\t\t\tchildren = (\n\t\t\t\t33CC10F22044A3C60003C045 /* Assets.xcassets */,\n\t\t\t\t33CC10F42044A3C60003C045 /* MainMenu.xib */,\n\t\t\t\t33CC10F72044A3C60003C045 /* Info.plist */,\n\t\t\t);\n\t\t\tname = Resources;\n\t\t\tpath = ..;\n\t\t\tsourceTree = \"<group>\";\n\t\t};\n\t\t33CEB47122A05771004F2AC0 /* Flutter */ = {\n\t\t\tisa = PBXGroup;\n\t\t\tchildren = (\n\t\t\t\t335BBD1A22A9A15E00E9071D /* GeneratedPluginRegistrant.swift */,\n\t\t\t\t33CEB47222A05771004F2AC0 /* Flutter-Debug.xcconfig */,\n\t\t\t\t33CEB47422A05771004F2AC0 /* Flutter-Release.xcconfig */,\n\t\t\t\t33CEB47722A0578A004F2AC0 /* Flutter-Generated.xcconfig */,\n\t\t\t);\n\t\t\tpath = Flutter;\n\t\t\tsourceTree = \"<group>\";\n\t\t};\n\t\t33FAB671232836740065AC1E /* Runner */ = {\n\t\t\tisa = PBXGroup;\n\t\t\tchildren = (\n\t\t\t\t33CC10F02044A3C60003C045 /* AppDelegate.swift */,\n\t\t\t\t33CC11122044BFA00003C045 /* MainFlutterWindow.swift */,\n\t\t\t\t33E51913231747F40026EE4D /* DebugProfile.entitlements */,\n\t\t\t\t33E51914231749380026EE4D /* Release.entitlements */,\n\t\t\t\t33CC11242044D66E0003C045 /* Resources */,\n\t\t\t\t33BA886A226E78AF003329D5 /* Configs */,\n\t\t\t);\n\t\t\tpath = Runner;\n\t\t\tsourceTree = \"<group>\";\n\t\t};\n\t\tD73912EC22F37F3D000D13A0 /* Frameworks */ = {\n\t\t\tisa = PBXGroup;\n\t\t\tchildren = (\n\t\t\t);\n\t\t\tname = Frameworks;\n\t\t\tsourceTree = \"<group>\";\n\t\t};\n/* End PBXGroup section */\n\n/* Begin PBXNativeTarget section */\n\t\t331C80D4294CF70F00263BE5 /* RunnerTests */ = {\n\t\t\tisa = PBXNativeTarget;\n\t\t\tbuildConfigurationList = 331C80DE294CF71000263BE5 /* Build configuration list for PBXNativeTarget \"RunnerTests\" */;\n\t\t\tbuildPhases = (\n\t\t\t\t331C80D1294CF70F00263BE5 /* Sources */,\n\t\t\t\t331C80D2294CF70F00263BE5 /* Frameworks */,\n\t\t\t\t331C80D3294CF70F00263BE5 /* Resources */,\n\t\t\t);\n\t\t\tbuildRules = (\n\t\t\t);\n\t\t\tdependencies = (\n\t\t\t\t331C80DA294CF71000263BE5 /* PBXTargetDependency */,\n\t\t\t);\n\t\t\tname = RunnerTests;\n\t\t\tproductName = RunnerTests;\n\t\t\tproductReference = 331C80D5294CF71000263BE5 /* RunnerTests.xctest */;\n\t\t\tproductType = \"com.apple.product-type.bundle.unit-test\";\n\t\t};\n\t\t33CC10EC2044A3C60003C045 /* Runner */ = {\n\t\t\tisa = PBXNativeTarget;\n\t\t\tbuildConfigurationList = 33CC10FB2044A3C60003C045 /* Build configuration list for PBXNativeTarget \"Runner\" */;\n\t\t\tbuildPhases = (\n\t\t\t\t33CC10E92044A3C60003C045 /* Sources */,\n\t\t\t\t33CC10EA2044A3C60003C045 /* Frameworks */,\n\t\t\t\t33CC10EB2044A3C60003C045 /* Resources */,\n\t\t\t\t33CC110E2044A8840003C045 /* Bundle Framework */,\n\t\t\t\t3399D490228B24CF009A79C7 /* ShellScript */,\n\t\t\t);\n\t\t\tbuildRules = (\n\t\t\t);\n\t\t\tdependencies = (\n\t\t\t\t33CC11202044C79F0003C045 /* PBXTargetDependency */,\n\t\t\t);\n\t\t\tname = Runner;\n\t\t\tproductName = Runner;\n\t\t\tproductReference = 33CC10ED2044A3C60003C045 /* example.app */;\n\t\t\tproductType = \"com.apple.product-type.application\";\n\t\t};\n/* End PBXNativeTarget section */\n\n/* Begin PBXProject section */\n\t\t33CC10E52044A3C60003C045 /* Project object */ = {\n\t\t\tisa = PBXProject;\n\t\t\tattributes = {\n\t\t\t\tLastSwiftUpdateCheck = 0920;\n\t\t\t\tLastUpgradeCheck = 1300;\n\t\t\t\tORGANIZATIONNAME = \"\";\n\t\t\t\tTargetAttributes = {\n\t\t\t\t\t331C80D4294CF70F00263BE5 = {\n\t\t\t\t\t\tCreatedOnToolsVersion = 14.0;\n\t\t\t\t\t\tTestTargetID = 33CC10EC2044A3C60003C045;\n\t\t\t\t\t};\n\t\t\t\t\t33CC10EC2044A3C60003C045 = {\n\t\t\t\t\t\tCreatedOnToolsVersion = 9.2;\n\t\t\t\t\t\tLastSwiftMigration = 1100;\n\t\t\t\t\t\tProvisioningStyle = Automatic;\n\t\t\t\t\t\tSystemCapabilities = {\n\t\t\t\t\t\t\tcom.apple.Sandbox = {\n\t\t\t\t\t\t\t\tenabled = 1;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t};\n\t\t\t\t\t};\n\t\t\t\t\t33CC111A2044C6BA0003C045 = {\n\t\t\t\t\t\tCreatedOnToolsVersion = 9.2;\n\t\t\t\t\t\tProvisioningStyle = Manual;\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\t};\n\t\t\tbuildConfigurationList = 33CC10E82044A3C60003C045 /* Build configuration list for PBXProject \"Runner\" */;\n\t\t\tcompatibilityVersion = \"Xcode 9.3\";\n\t\t\tdevelopmentRegion = en;\n\t\t\thasScannedForEncodings = 0;\n\t\t\tknownRegions = (\n\t\t\t\ten,\n\t\t\t\tBase,\n\t\t\t);\n\t\t\tmainGroup = 33CC10E42044A3C60003C045;\n\t\t\tproductRefGroup = 33CC10EE2044A3C60003C045 /* Products */;\n\t\t\tprojectDirPath = \"\";\n\t\t\tprojectRoot = \"\";\n\t\t\ttargets = (\n\t\t\t\t33CC10EC2044A3C60003C045 /* Runner */,\n\t\t\t\t331C80D4294CF70F00263BE5 /* RunnerTests */,\n\t\t\t\t33CC111A2044C6BA0003C045 /* Flutter Assemble */,\n\t\t\t);\n\t\t};\n/* End PBXProject section */\n\n/* Begin PBXResourcesBuildPhase section */\n\t\t331C80D3294CF70F00263BE5 /* Resources */ = {\n\t\t\tisa = PBXResourcesBuildPhase;\n\t\t\tbuildActionMask = 2147483647;\n\t\t\tfiles = (\n\t\t\t);\n\t\t\trunOnlyForDeploymentPostprocessing = 0;\n\t\t};\n\t\t33CC10EB2044A3C60003C045 /* Resources */ = {\n\t\t\tisa = PBXResourcesBuildPhase;\n\t\t\tbuildActionMask = 2147483647;\n\t\t\tfiles = (\n\t\t\t\t33CC10F32044A3C60003C045 /* Assets.xcassets in Resources */,\n\t\t\t\t33CC10F62044A3C60003C045 /* MainMenu.xib in Resources */,\n\t\t\t);\n\t\t\trunOnlyForDeploymentPostprocessing = 0;\n\t\t};\n/* End PBXResourcesBuildPhase section */\n\n/* Begin PBXShellScriptBuildPhase section */\n\t\t3399D490228B24CF009A79C7 /* ShellScript */ = {\n\t\t\tisa = PBXShellScriptBuildPhase;\n\t\t\talwaysOutOfDate = 1;\n\t\t\tbuildActionMask = 2147483647;\n\t\t\tfiles = (\n\t\t\t);\n\t\t\tinputFileListPaths = (\n\t\t\t);\n\t\t\tinputPaths = (\n\t\t\t);\n\t\t\toutputFileListPaths = (\n\t\t\t);\n\t\t\toutputPaths = (\n\t\t\t);\n\t\t\trunOnlyForDeploymentPostprocessing = 0;\n\t\t\tshellPath = /bin/sh;\n\t\t\tshellScript = \"echo \\\"$PRODUCT_NAME.app\\\" > \\\"$PROJECT_DIR\\\"/Flutter/ephemeral/.app_filename && \\\"$FLUTTER_ROOT\\\"/packages/flutter_tools/bin/macos_assemble.sh embed\\n\";\n\t\t};\n\t\t33CC111E2044C6BF0003C045 /* ShellScript */ = {\n\t\t\tisa = PBXShellScriptBuildPhase;\n\t\t\tbuildActionMask = 2147483647;\n\t\t\tfiles = (\n\t\t\t);\n\t\t\tinputFileListPaths = (\n\t\t\t\tFlutter/ephemeral/FlutterInputs.xcfilelist,\n\t\t\t);\n\t\t\tinputPaths = (\n\t\t\t\tFlutter/ephemeral/tripwire,\n\t\t\t);\n\t\t\toutputFileListPaths = (\n\t\t\t\tFlutter/ephemeral/FlutterOutputs.xcfilelist,\n\t\t\t);\n\t\t\toutputPaths = (\n\t\t\t);\n\t\t\trunOnlyForDeploymentPostprocessing = 0;\n\t\t\tshellPath = /bin/sh;\n\t\t\tshellScript = \"\\\"$FLUTTER_ROOT\\\"/packages/flutter_tools/bin/macos_assemble.sh && touch Flutter/ephemeral/tripwire\";\n\t\t};\n/* End PBXShellScriptBuildPhase section */\n\n/* Begin PBXSourcesBuildPhase section */\n\t\t331C80D1294CF70F00263BE5 /* Sources */ = {\n\t\t\tisa = PBXSourcesBuildPhase;\n\t\t\tbuildActionMask = 2147483647;\n\t\t\tfiles = (\n\t\t\t\t331C80D8294CF71000263BE5 /* RunnerTests.swift in Sources */,\n\t\t\t);\n\t\t\trunOnlyForDeploymentPostprocessing = 0;\n\t\t};\n\t\t33CC10E92044A3C60003C045 /* Sources */ = {\n\t\t\tisa = PBXSourcesBuildPhase;\n\t\t\tbuildActionMask = 2147483647;\n\t\t\tfiles = (\n\t\t\t\t33CC11132044BFA00003C045 /* MainFlutterWindow.swift in Sources */,\n\t\t\t\t33CC10F12044A3C60003C045 /* AppDelegate.swift in Sources */,\n\t\t\t\t335BBD1B22A9A15E00E9071D /* GeneratedPluginRegistrant.swift in Sources */,\n\t\t\t);\n\t\t\trunOnlyForDeploymentPostprocessing = 0;\n\t\t};\n/* End PBXSourcesBuildPhase section */\n\n/* Begin PBXTargetDependency section */\n\t\t331C80DA294CF71000263BE5 /* PBXTargetDependency */ = {\n\t\t\tisa = PBXTargetDependency;\n\t\t\ttarget = 33CC10EC2044A3C60003C045 /* Runner */;\n\t\t\ttargetProxy = 331C80D9294CF71000263BE5 /* PBXContainerItemProxy */;\n\t\t};\n\t\t33CC11202044C79F0003C045 /* PBXTargetDependency */ = {\n\t\t\tisa = PBXTargetDependency;\n\t\t\ttarget = 33CC111A2044C6BA0003C045 /* Flutter Assemble */;\n\t\t\ttargetProxy = 33CC111F2044C79F0003C045 /* PBXContainerItemProxy */;\n\t\t};\n/* End PBXTargetDependency section */\n\n/* Begin PBXVariantGroup section */\n\t\t33CC10F42044A3C60003C045 /* MainMenu.xib */ = {\n\t\t\tisa = PBXVariantGroup;\n\t\t\tchildren = (\n\t\t\t\t33CC10F52044A3C60003C045 /* Base */,\n\t\t\t);\n\t\t\tname = MainMenu.xib;\n\t\t\tpath = Runner;\n\t\t\tsourceTree = \"<group>\";\n\t\t};\n/* End PBXVariantGroup section */\n\n/* Begin XCBuildConfiguration section */\n\t\t331C80DB294CF71000263BE5 /* Debug */ = {\n\t\t\tisa = XCBuildConfiguration;\n\t\t\tbuildSettings = {\n\t\t\t\tBUNDLE_LOADER = \"$(TEST_HOST)\";\n\t\t\t\tCURRENT_PROJECT_VERSION = 1;\n\t\t\t\tGENERATE_INFOPLIST_FILE = YES;\n\t\t\t\tMARKETING_VERSION = 1.0;\n\t\t\t\tPRODUCT_BUNDLE_IDENTIFIER = com.example.example.RunnerTests;\n\t\t\t\tPRODUCT_NAME = \"$(TARGET_NAME)\";\n\t\t\t\tSWIFT_VERSION = 5.0;\n\t\t\t\tTEST_HOST = \"$(BUILT_PRODUCTS_DIR)/example.app/$(BUNDLE_EXECUTABLE_FOLDER_PATH)/example\";\n\t\t\t};\n\t\t\tname = Debug;\n\t\t};\n\t\t331C80DC294CF71000263BE5 /* Release */ = {\n\t\t\tisa = XCBuildConfiguration;\n\t\t\tbuildSettings = {\n\t\t\t\tBUNDLE_LOADER = \"$(TEST_HOST)\";\n\t\t\t\tCURRENT_PROJECT_VERSION = 1;\n\t\t\t\tGENERATE_INFOPLIST_FILE = YES;\n\t\t\t\tMARKETING_VERSION = 1.0;\n\t\t\t\tPRODUCT_BUNDLE_IDENTIFIER = com.example.example.RunnerTests;\n\t\t\t\tPRODUCT_NAME = \"$(TARGET_NAME)\";\n\t\t\t\tSWIFT_VERSION = 5.0;\n\t\t\t\tTEST_HOST = \"$(BUILT_PRODUCTS_DIR)/example.app/$(BUNDLE_EXECUTABLE_FOLDER_PATH)/example\";\n\t\t\t};\n\t\t\tname = Release;\n\t\t};\n\t\t331C80DD294CF71000263BE5 /* Profile */ = {\n\t\t\tisa = XCBuildConfiguration;\n\t\t\tbuildSettings = {\n\t\t\t\tBUNDLE_LOADER = \"$(TEST_HOST)\";\n\t\t\t\tCURRENT_PROJECT_VERSION = 1;\n\t\t\t\tGENERATE_INFOPLIST_FILE = YES;\n\t\t\t\tMARKETING_VERSION = 1.0;\n\t\t\t\tPRODUCT_BUNDLE_IDENTIFIER = com.example.example.RunnerTests;\n\t\t\t\tPRODUCT_NAME = \"$(TARGET_NAME)\";\n\t\t\t\tSWIFT_VERSION = 5.0;\n\t\t\t\tTEST_HOST = \"$(BUILT_PRODUCTS_DIR)/example.app/$(BUNDLE_EXECUTABLE_FOLDER_PATH)/example\";\n\t\t\t};\n\t\t\tname = Profile;\n\t\t};\n\t\t338D0CE9231458BD00FA5F75 /* Profile */ = {\n\t\t\tisa = XCBuildConfiguration;\n\t\t\tbaseConfigurationReference = 7AFA3C8E1D35360C0083082E /* Release.xcconfig */;\n\t\t\tbuildSettings = {\n\t\t\t\tALWAYS_SEARCH_USER_PATHS = NO;\n\t\t\t\tCLANG_ANALYZER_NONNULL = YES;\n\t\t\t\tCLANG_ANALYZER_NUMBER_OBJECT_CONVERSION = YES_AGGRESSIVE;\n\t\t\t\tCLANG_CXX_LANGUAGE_STANDARD = \"gnu++14\";\n\t\t\t\tCLANG_CXX_LIBRARY = \"libc++\";\n\t\t\t\tCLANG_ENABLE_MODULES = YES;\n\t\t\t\tCLANG_ENABLE_OBJC_ARC = YES;\n\t\t\t\tCLANG_WARN_BLOCK_CAPTURE_AUTORELEASING = YES;\n\t\t\t\tCLANG_WARN_BOOL_CONVERSION = YES;\n\t\t\t\tCLANG_WARN_CONSTANT_CONVERSION = YES;\n\t\t\t\tCLANG_WARN_DEPRECATED_OBJC_IMPLEMENTATIONS = YES;\n\t\t\t\tCLANG_WARN_DIRECT_OBJC_ISA_USAGE = YES_ERROR;\n\t\t\t\tCLANG_WARN_DOCUMENTATION_COMMENTS = YES;\n\t\t\t\tCLANG_WARN_EMPTY_BODY = YES;\n\t\t\t\tCLANG_WARN_ENUM_CONVERSION = YES;\n\t\t\t\tCLANG_WARN_INFINITE_RECURSION = YES;\n\t\t\t\tCLANG_WARN_INT_CONVERSION = YES;\n\t\t\t\tCLANG_WARN_NON_LITERAL_NULL_CONVERSION = YES;\n\t\t\t\tCLANG_WARN_OBJC_LITERAL_CONVERSION = YES;\n\t\t\t\tCLANG_WARN_OBJC_ROOT_CLASS = YES_ERROR;\n\t\t\t\tCLANG_WARN_RANGE_LOOP_ANALYSIS = YES;\n\t\t\t\tCLANG_WARN_SUSPICIOUS_MOVE = YES;\n\t\t\t\tCODE_SIGN_IDENTITY = \"-\";\n\t\t\t\tCOPY_PHASE_STRIP = NO;\n\t\t\t\tDEBUG_INFORMATION_FORMAT = \"dwarf-with-dsym\";\n\t\t\t\tENABLE_NS_ASSERTIONS = NO;\n\t\t\t\tENABLE_STRICT_OBJC_MSGSEND = YES;\n\t\t\t\tGCC_C_LANGUAGE_STANDARD = gnu11;\n\t\t\t\tGCC_NO_COMMON_BLOCKS = YES;\n\t\t\t\tGCC_WARN_64_TO_32_BIT_CONVERSION = YES;\n\t\t\t\tGCC_WARN_ABOUT_RETURN_TYPE = YES_ERROR;\n\t\t\t\tGCC_WARN_UNINITIALIZED_AUTOS = YES_AGGRESSIVE;\n\t\t\t\tGCC_WARN_UNUSED_FUNCTION = YES;\n\t\t\t\tGCC_WARN_UNUSED_VARIABLE = YES;\n\t\t\t\tMACOSX_DEPLOYMENT_TARGET = 10.14;\n\t\t\t\tMTL_ENABLE_DEBUG_INFO = NO;\n\t\t\t\tSDKROOT = macosx;\n\t\t\t\tSWIFT_COMPILATION_MODE = wholemodule;\n\t\t\t\tSWIFT_OPTIMIZATION_LEVEL = \"-O\";\n\t\t\t};\n\t\t\tname = Profile;\n\t\t};\n\t\t338D0CEA231458BD00FA5F75 /* Profile */ = {\n\t\t\tisa = XCBuildConfiguration;\n\t\t\tbaseConfigurationReference = 33E5194F232828860026EE4D /* AppInfo.xcconfig */;\n\t\t\tbuildSettings = {\n\t\t\t\tASSETCATALOG_COMPILER_APPICON_NAME = AppIcon;\n\t\t\t\tCLANG_ENABLE_MODULES = YES;\n\t\t\t\tCODE_SIGN_ENTITLEMENTS = Runner/DebugProfile.entitlements;\n\t\t\t\tCODE_SIGN_STYLE = Automatic;\n\t\t\t\tCOMBINE_HIDPI_IMAGES = YES;\n\t\t\t\tINFOPLIST_FILE = Runner/Info.plist;\n\t\t\t\tLD_RUNPATH_SEARCH_PATHS = (\n\t\t\t\t\t\"$(inherited)\",\n\t\t\t\t\t\"@executable_path/../Frameworks\",\n\t\t\t\t);\n\t\t\t\tPROVISIONING_PROFILE_SPECIFIER = \"\";\n\t\t\t\tSWIFT_VERSION = 5.0;\n\t\t\t};\n\t\t\tname = Profile;\n\t\t};\n\t\t338D0CEB231458BD00FA5F75 /* Profile */ = {\n\t\t\tisa = XCBuildConfiguration;\n\t\t\tbuildSettings = {\n\t\t\t\tCODE_SIGN_STYLE = Manual;\n\t\t\t\tPRODUCT_NAME = \"$(TARGET_NAME)\";\n\t\t\t};\n\t\t\tname = Profile;\n\t\t};\n\t\t33CC10F92044A3C60003C045 /* Debug */ = {\n\t\t\tisa = XCBuildConfiguration;\n\t\t\tbaseConfigurationReference = 9740EEB21CF90195004384FC /* Debug.xcconfig */;\n\t\t\tbuildSettings = {\n\t\t\t\tALWAYS_SEARCH_USER_PATHS = NO;\n\t\t\t\tCLANG_ANALYZER_NONNULL = YES;\n\t\t\t\tCLANG_ANALYZER_NUMBER_OBJECT_CONVERSION = YES_AGGRESSIVE;\n\t\t\t\tCLANG_CXX_LANGUAGE_STANDARD = \"gnu++14\";\n\t\t\t\tCLANG_CXX_LIBRARY = \"libc++\";\n\t\t\t\tCLANG_ENABLE_MODULES = YES;\n\t\t\t\tCLANG_ENABLE_OBJC_ARC = YES;\n\t\t\t\tCLANG_WARN_BLOCK_CAPTURE_AUTORELEASING = YES;\n\t\t\t\tCLANG_WARN_BOOL_CONVERSION = YES;\n\t\t\t\tCLANG_WARN_CONSTANT_CONVERSION = YES;\n\t\t\t\tCLANG_WARN_DEPRECATED_OBJC_IMPLEMENTATIONS = YES;\n\t\t\t\tCLANG_WARN_DIRECT_OBJC_ISA_USAGE = YES_ERROR;\n\t\t\t\tCLANG_WARN_DOCUMENTATION_COMMENTS = YES;\n\t\t\t\tCLANG_WARN_EMPTY_BODY = YES;\n\t\t\t\tCLANG_WARN_ENUM_CONVERSION = YES;\n\t\t\t\tCLANG_WARN_INFINITE_RECURSION = YES;\n\t\t\t\tCLANG_WARN_INT_CONVERSION = YES;\n\t\t\t\tCLANG_WARN_NON_LITERAL_NULL_CONVERSION = YES;\n\t\t\t\tCLANG_WARN_OBJC_LITERAL_CONVERSION = YES;\n\t\t\t\tCLANG_WARN_OBJC_ROOT_CLASS = YES_ERROR;\n\t\t\t\tCLANG_WARN_RANGE_LOOP_ANALYSIS = YES;\n\t\t\t\tCLANG_WARN_SUSPICIOUS_MOVE = YES;\n\t\t\t\tCODE_SIGN_IDENTITY = \"-\";\n\t\t\t\tCOPY_PHASE_STRIP = NO;\n\t\t\t\tDEBUG_INFORMATION_FORMAT = dwarf;\n\t\t\t\tENABLE_STRICT_OBJC_MSGSEND = YES;\n\t\t\t\tENABLE_TESTABILITY = YES;\n\t\t\t\tGCC_C_LANGUAGE_STANDARD = gnu11;\n\t\t\t\tGCC_DYNAMIC_NO_PIC = NO;\n\t\t\t\tGCC_NO_COMMON_BLOCKS = YES;\n\t\t\t\tGCC_OPTIMIZATION_LEVEL = 0;\n\t\t\t\tGCC_PREPROCESSOR_DEFINITIONS = (\n\t\t\t\t\t\"DEBUG=1\",\n\t\t\t\t\t\"$(inherited)\",\n\t\t\t\t);\n\t\t\t\tGCC_WARN_64_TO_32_BIT_CONVERSION = YES;\n\t\t\t\tGCC_WARN_ABOUT_RETURN_TYPE = YES_ERROR;\n\t\t\t\tGCC_WARN_UNINITIALIZED_AUTOS = YES_AGGRESSIVE;\n\t\t\t\tGCC_WARN_UNUSED_FUNCTION = YES;\n\t\t\t\tGCC_WARN_UNUSED_VARIABLE = YES;\n\t\t\t\tMACOSX_DEPLOYMENT_TARGET = 10.14;\n\t\t\t\tMTL_ENABLE_DEBUG_INFO = YES;\n\t\t\t\tONLY_ACTIVE_ARCH = YES;\n\t\t\t\tSDKROOT = macosx;\n\t\t\t\tSWIFT_ACTIVE_COMPILATION_CONDITIONS = DEBUG;\n\t\t\t\tSWIFT_OPTIMIZATION_LEVEL = \"-Onone\";\n\t\t\t};\n\t\t\tname = Debug;\n\t\t};\n\t\t33CC10FA2044A3C60003C045 /* Release */ = {\n\t\t\tisa = XCBuildConfiguration;\n\t\t\tbaseConfigurationReference = 7AFA3C8E1D35360C0083082E /* Release.xcconfig */;\n\t\t\tbuildSettings = {\n\t\t\t\tALWAYS_SEARCH_USER_PATHS = NO;\n\t\t\t\tCLANG_ANALYZER_NONNULL = YES;\n\t\t\t\tCLANG_ANALYZER_NUMBER_OBJECT_CONVERSION = YES_AGGRESSIVE;\n\t\t\t\tCLANG_CXX_LANGUAGE_STANDARD = \"gnu++14\";\n\t\t\t\tCLANG_CXX_LIBRARY = \"libc++\";\n\t\t\t\tCLANG_ENABLE_MODULES = YES;\n\t\t\t\tCLANG_ENABLE_OBJC_ARC = YES;\n\t\t\t\tCLANG_WARN_BLOCK_CAPTURE_AUTORELEASING = YES;\n\t\t\t\tCLANG_WARN_BOOL_CONVERSION = YES;\n\t\t\t\tCLANG_WARN_CONSTANT_CONVERSION = YES;\n\t\t\t\tCLANG_WARN_DEPRECATED_OBJC_IMPLEMENTATIONS = YES;\n\t\t\t\tCLANG_WARN_DIRECT_OBJC_ISA_USAGE = YES_ERROR;\n\t\t\t\tCLANG_WARN_DOCUMENTATION_COMMENTS = YES;\n\t\t\t\tCLANG_WARN_EMPTY_BODY = YES;\n\t\t\t\tCLANG_WARN_ENUM_CONVERSION = YES;\n\t\t\t\tCLANG_WARN_INFINITE_RECURSION = YES;\n\t\t\t\tCLANG_WARN_INT_CONVERSION = YES;\n\t\t\t\tCLANG_WARN_NON_LITERAL_NULL_CONVERSION = YES;\n\t\t\t\tCLANG_WARN_OBJC_LITERAL_CONVERSION = YES;\n\t\t\t\tCLANG_WARN_OBJC_ROOT_CLASS = YES_ERROR;\n\t\t\t\tCLANG_WARN_RANGE_LOOP_ANALYSIS = YES;\n\t\t\t\tCLANG_WARN_SUSPICIOUS_MOVE = YES;\n\t\t\t\tCODE_SIGN_IDENTITY = \"-\";\n\t\t\t\tCOPY_PHASE_STRIP = NO;\n\t\t\t\tDEBUG_INFORMATION_FORMAT = \"dwarf-with-dsym\";\n\t\t\t\tENABLE_NS_ASSERTIONS = NO;\n\t\t\t\tENABLE_STRICT_OBJC_MSGSEND = YES;\n\t\t\t\tGCC_C_LANGUAGE_STANDARD = gnu11;\n\t\t\t\tGCC_NO_COMMON_BLOCKS = YES;\n\t\t\t\tGCC_WARN_64_TO_32_BIT_CONVERSION = YES;\n\t\t\t\tGCC_WARN_ABOUT_RETURN_TYPE = YES_ERROR;\n\t\t\t\tGCC_WARN_UNINITIALIZED_AUTOS = YES_AGGRESSIVE;\n\t\t\t\tGCC_WARN_UNUSED_FUNCTION = YES;\n\t\t\t\tGCC_WARN_UNUSED_VARIABLE = YES;\n\t\t\t\tMACOSX_DEPLOYMENT_TARGET = 10.14;\n\t\t\t\tMTL_ENABLE_DEBUG_INFO = NO;\n\t\t\t\tSDKROOT = macosx;\n\t\t\t\tSWIFT_COMPILATION_MODE = wholemodule;\n\t\t\t\tSWIFT_OPTIMIZATION_LEVEL = \"-O\";\n\t\t\t};\n\t\t\tname = Release;\n\t\t};\n\t\t33CC10FC2044A3C60003C045 /* Debug */ = {\n\t\t\tisa = XCBuildConfiguration;\n\t\t\tbaseConfigurationReference = 33E5194F232828860026EE4D /* AppInfo.xcconfig */;\n\t\t\tbuildSettings = {\n\t\t\t\tASSETCATALOG_COMPILER_APPICON_NAME = AppIcon;\n\t\t\t\tCLANG_ENABLE_MODULES = YES;\n\t\t\t\tCODE_SIGN_ENTITLEMENTS = Runner/DebugProfile.entitlements;\n\t\t\t\tCODE_SIGN_STYLE = Automatic;\n\t\t\t\tCOMBINE_HIDPI_IMAGES = YES;\n\t\t\t\tINFOPLIST_FILE = Runner/Info.plist;\n\t\t\t\tLD_RUNPATH_SEARCH_PATHS = (\n\t\t\t\t\t\"$(inherited)\",\n\t\t\t\t\t\"@executable_path/../Frameworks\",\n\t\t\t\t);\n\t\t\t\tPROVISIONING_PROFILE_SPECIFIER = \"\";\n\t\t\t\tSWIFT_OPTIMIZATION_LEVEL = \"-Onone\";\n\t\t\t\tSWIFT_VERSION = 5.0;\n\t\t\t};\n\t\t\tname = Debug;\n\t\t};\n\t\t33CC10FD2044A3C60003C045 /* Release */ = {\n\t\t\tisa = XCBuildConfiguration;\n\t\t\tbaseConfigurationReference = 33E5194F232828860026EE4D /* AppInfo.xcconfig */;\n\t\t\tbuildSettings = {\n\t\t\t\tASSETCATALOG_COMPILER_APPICON_NAME = AppIcon;\n\t\t\t\tCLANG_ENABLE_MODULES = YES;\n\t\t\t\tCODE_SIGN_ENTITLEMENTS = Runner/Release.entitlements;\n\t\t\t\tCODE_SIGN_STYLE = Automatic;\n\t\t\t\tCOMBINE_HIDPI_IMAGES = YES;\n\t\t\t\tINFOPLIST_FILE = Runner/Info.plist;\n\t\t\t\tLD_RUNPATH_SEARCH_PATHS = (\n\t\t\t\t\t\"$(inherited)\",\n\t\t\t\t\t\"@executable_path/../Frameworks\",\n\t\t\t\t);\n\t\t\t\tPROVISIONING_PROFILE_SPECIFIER = \"\";\n\t\t\t\tSWIFT_VERSION = 5.0;\n\t\t\t};\n\t\t\tname = Release;\n\t\t};\n\t\t33CC111C2044C6BA0003C045 /* Debug */ = {\n\t\t\tisa = XCBuildConfiguration;\n\t\t\tbuildSettings = {\n\t\t\t\tCODE_SIGN_STYLE = Manual;\n\t\t\t\tPRODUCT_NAME = \"$(TARGET_NAME)\";\n\t\t\t};\n\t\t\tname = Debug;\n\t\t};\n\t\t33CC111D2044C6BA0003C045 /* Release */ = {\n\t\t\tisa = XCBuildConfiguration;\n\t\t\tbuildSettings = {\n\t\t\t\tCODE_SIGN_STYLE = Automatic;\n\t\t\t\tPRODUCT_NAME = \"$(TARGET_NAME)\";\n\t\t\t};\n\t\t\tname = Release;\n\t\t};\n/* End XCBuildConfiguration section */\n\n/* Begin XCConfigurationList section */\n\t\t331C80DE294CF71000263BE5 /* Build configuration list for PBXNativeTarget \"RunnerTests\" */ = {\n\t\t\tisa = XCConfigurationList;\n\t\t\tbuildConfigurations = (\n\t\t\t\t331C80DB294CF71000263BE5 /* Debug */,\n\t\t\t\t331C80DC294CF71000263BE5 /* Release */,\n\t\t\t\t331C80DD294CF71000263BE5 /* Profile */,\n\t\t\t);\n\t\t\tdefaultConfigurationIsVisible = 0;\n\t\t\tdefaultConfigurationName = Release;\n\t\t};\n\t\t33CC10E82044A3C60003C045 /* Build configuration list for PBXProject \"Runner\" */ = {\n\t\t\tisa = XCConfigurationList;\n\t\t\tbuildConfigurations = (\n\t\t\t\t33CC10F92044A3C60003C045 /* Debug */,\n\t\t\t\t33CC10FA2044A3C60003C045 /* Release */,\n\t\t\t\t338D0CE9231458BD00FA5F75 /* Profile */,\n\t\t\t);\n\t\t\tdefaultConfigurationIsVisible = 0;\n\t\t\tdefaultConfigurationName = Release;\n\t\t};\n\t\t33CC10FB2044A3C60003C045 /* Build configuration list for PBXNativeTarget \"Runner\" */ = {\n\t\t\tisa = XCConfigurationList;\n\t\t\tbuildConfigurations = (\n\t\t\t\t33CC10FC2044A3C60003C045 /* Debug */,\n\t\t\t\t33CC10FD2044A3C60003C045 /* Release */,\n\t\t\t\t338D0CEA231458BD00FA5F75 /* Profile */,\n\t\t\t);\n\t\t\tdefaultConfigurationIsVisible = 0;\n\t\t\tdefaultConfigurationName = Release;\n\t\t};\n\t\t33CC111B2044C6BA0003C045 /* Build configuration list for PBXAggregateTarget \"Flutter Assemble\" */ = {\n\t\t\tisa = XCConfigurationList;\n\t\t\tbuildConfigurations = (\n\t\t\t\t33CC111C2044C6BA0003C045 /* Debug */,\n\t\t\t\t33CC111D2044C6BA0003C045 /* Release */,\n\t\t\t\t338D0CEB231458BD00FA5F75 /* Profile */,\n\t\t\t);\n\t\t\tdefaultConfigurationIsVisible = 0;\n\t\t\tdefaultConfigurationName = Release;\n\t\t};\n/* End XCConfigurationList section */\n\t};\n\trootObject = 33CC10E52044A3C60003C045 /* Project object */;\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/example/macos/Runner.xcodeproj/project.pbxproj b/../flexi_cart/example/macos/Runner.xcodeproj/project.pbxproj
--- a/../flexi_cart/example/macos/Runner.xcodeproj/project.pbxproj	(revision 0a712f615a29b95b357fcc49e300042fa4b4dc7e)
+++ b/../flexi_cart/example/macos/Runner.xcodeproj/project.pbxproj	(date 1748187725758)
@@ -227,7 +227,7 @@
 			isa = PBXProject;
 			attributes = {
 				LastSwiftUpdateCheck = 0920;
-				LastUpgradeCheck = 1300;
+				LastUpgradeCheck = 1510;
 				ORGANIZATIONNAME = "";
 				TargetAttributes = {
 					331C80D4294CF70F00263BE5 = {
Index: ../flexi_cart/lib/flexi_cart.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>export 'src/cart.dart';\nexport 'src/cart_diff.dart';\nexport 'src/cart_exception.dart';\nexport 'src/cart_input_formatter.dart';\nexport 'src/cart_input_widget.dart';\nexport 'src/cart_item.dart';\nexport 'src/cart_items_group.dart';\nexport 'src/cart_theme.dart';\nexport 'src/mixins.dart';\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/lib/flexi_cart.dart b/../flexi_cart/lib/flexi_cart.dart
--- a/../flexi_cart/lib/flexi_cart.dart	(revision 0a712f615a29b95b357fcc49e300042fa4b4dc7e)
+++ b/../flexi_cart/lib/flexi_cart.dart	(date 1748186134946)
@@ -3,7 +3,10 @@
 export 'src/cart_exception.dart';
 export 'src/cart_input_formatter.dart';
 export 'src/cart_input_widget.dart';
-export 'src/cart_item.dart';
 export 'src/cart_items_group.dart';
+export 'src/cart_options/cart_options.dart';
 export 'src/cart_theme.dart';
-export 'src/mixins.dart';
+export 'src/cart_validators/cart_validators.dart';
+export 'src/mixins/mixins.dart';
+export 'src/models/cart_plugin.dart';
+export 'src/models/models.dart';
Index: ../flexi_cart/example/macos/Runner.xcodeproj/xcshareddata/xcschemes/Runner.xcscheme
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<Scheme\n   LastUpgradeVersion = \"1300\"\n   version = \"1.3\">\n   <BuildAction\n      parallelizeBuildables = \"YES\"\n      buildImplicitDependencies = \"YES\">\n      <BuildActionEntries>\n         <BuildActionEntry\n            buildForTesting = \"YES\"\n            buildForRunning = \"YES\"\n            buildForProfiling = \"YES\"\n            buildForArchiving = \"YES\"\n            buildForAnalyzing = \"YES\">\n            <BuildableReference\n               BuildableIdentifier = \"primary\"\n               BlueprintIdentifier = \"33CC10EC2044A3C60003C045\"\n               BuildableName = \"example.app\"\n               BlueprintName = \"Runner\"\n               ReferencedContainer = \"container:Runner.xcodeproj\">\n            </BuildableReference>\n         </BuildActionEntry>\n      </BuildActionEntries>\n   </BuildAction>\n   <TestAction\n      buildConfiguration = \"Debug\"\n      selectedDebuggerIdentifier = \"Xcode.DebuggerFoundation.Debugger.LLDB\"\n      selectedLauncherIdentifier = \"Xcode.DebuggerFoundation.Launcher.LLDB\"\n      shouldUseLaunchSchemeArgsEnv = \"YES\">\n      <MacroExpansion>\n         <BuildableReference\n            BuildableIdentifier = \"primary\"\n            BlueprintIdentifier = \"33CC10EC2044A3C60003C045\"\n            BuildableName = \"example.app\"\n            BlueprintName = \"Runner\"\n            ReferencedContainer = \"container:Runner.xcodeproj\">\n         </BuildableReference>\n      </MacroExpansion>\n      <Testables>\n         <TestableReference\n            skipped = \"NO\"\n            parallelizable = \"YES\">\n            <BuildableReference\n               BuildableIdentifier = \"primary\"\n               BlueprintIdentifier = \"331C80D4294CF70F00263BE5\"\n               BuildableName = \"RunnerTests.xctest\"\n               BlueprintName = \"RunnerTests\"\n               ReferencedContainer = \"container:Runner.xcodeproj\">\n            </BuildableReference>\n         </TestableReference>\n      </Testables>\n   </TestAction>\n   <LaunchAction\n      buildConfiguration = \"Debug\"\n      selectedDebuggerIdentifier = \"Xcode.DebuggerFoundation.Debugger.LLDB\"\n      selectedLauncherIdentifier = \"Xcode.DebuggerFoundation.Launcher.LLDB\"\n      launchStyle = \"0\"\n      useCustomWorkingDirectory = \"NO\"\n      ignoresPersistentStateOnLaunch = \"NO\"\n      debugDocumentVersioning = \"YES\"\n      debugServiceExtension = \"internal\"\n      allowLocationSimulation = \"YES\">\n      <BuildableProductRunnable\n         runnableDebuggingMode = \"0\">\n         <BuildableReference\n            BuildableIdentifier = \"primary\"\n            BlueprintIdentifier = \"33CC10EC2044A3C60003C045\"\n            BuildableName = \"example.app\"\n            BlueprintName = \"Runner\"\n            ReferencedContainer = \"container:Runner.xcodeproj\">\n         </BuildableReference>\n      </BuildableProductRunnable>\n   </LaunchAction>\n   <ProfileAction\n      buildConfiguration = \"Profile\"\n      shouldUseLaunchSchemeArgsEnv = \"YES\"\n      savedToolIdentifier = \"\"\n      useCustomWorkingDirectory = \"NO\"\n      debugDocumentVersioning = \"YES\">\n      <BuildableProductRunnable\n         runnableDebuggingMode = \"0\">\n         <BuildableReference\n            BuildableIdentifier = \"primary\"\n            BlueprintIdentifier = \"33CC10EC2044A3C60003C045\"\n            BuildableName = \"example.app\"\n            BlueprintName = \"Runner\"\n            ReferencedContainer = \"container:Runner.xcodeproj\">\n         </BuildableReference>\n      </BuildableProductRunnable>\n   </ProfileAction>\n   <AnalyzeAction\n      buildConfiguration = \"Debug\">\n   </AnalyzeAction>\n   <ArchiveAction\n      buildConfiguration = \"Release\"\n      revealArchiveInOrganizer = \"YES\">\n   </ArchiveAction>\n</Scheme>\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/example/macos/Runner.xcodeproj/xcshareddata/xcschemes/Runner.xcscheme b/../flexi_cart/example/macos/Runner.xcodeproj/xcshareddata/xcschemes/Runner.xcscheme
--- a/../flexi_cart/example/macos/Runner.xcodeproj/xcshareddata/xcschemes/Runner.xcscheme	(revision 0a712f615a29b95b357fcc49e300042fa4b4dc7e)
+++ b/../flexi_cart/example/macos/Runner.xcodeproj/xcshareddata/xcschemes/Runner.xcscheme	(date 1748187725784)
@@ -1,6 +1,6 @@
 <?xml version="1.0" encoding="UTF-8"?>
 <Scheme
-   LastUpgradeVersion = "1300"
+   LastUpgradeVersion = "1510"
    version = "1.3">
    <BuildAction
       parallelizeBuildables = "YES"
@@ -59,6 +59,7 @@
       ignoresPersistentStateOnLaunch = "NO"
       debugDocumentVersioning = "YES"
       debugServiceExtension = "internal"
+      enableGPUValidationMode = "1"
       allowLocationSimulation = "YES">
       <BuildableProductRunnable
          runnableDebuggingMode = "0">
Index: ../flexi_cart/lib/src/cart_items_group.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import 'package:flexi_cart/src/cart_item.dart';\n\n/// A group of cart items of type [T], each identified by a unique key.\n///\n/// This class provides utility methods to manage a group of items,\n/// calculate totals, and support casting to different item types.\nclass CartItemsGroup<T extends ICartItem> {\n  /// Creates a [CartItemsGroup] with the given [id], [name],\n  /// and optional initial [items].\n  ///\n  /// If [items] is not provided, an empty map will be used.\n  CartItemsGroup({\n    required this.id,\n    required this.name,\n    Map<String, T>? items,\n  }) : items = items ?? <String, T>{};\n\n  /// A unique identifier for the group (e.g., vendor, category).\n  final String id;\n\n  /// The display name of the group.\n  final String name;\n\n  /// A map of cart items, where each item is keyed by a unique string.\n  Map<String, T> items;\n\n  /// Returns a list of all items in the group.\n  List<T> get itemsList => items.values.toList();\n\n  /// Adds an item to the group.\n  ///\n  /// If [replace] is true (default),\n  /// it will overwrite an existing item with the same key.\n  /// If [replace] is false, it will only add the item\n  /// if the key does not already exist.\n  void add(T item, {bool replace = true}) {\n    if (replace) {\n      items[item.key] = item;\n    } else {\n      items.putIfAbsent(item.key, () => item);\n    }\n  }\n\n  /// Removes the given [item] from the group using its key.\n  void remove(T item) {\n    items.remove(item.key);\n  }\n\n  /// Clears all items from the group.\n  void clear() {\n    items.clear();\n  }\n\n  /// Casts this group to another item type [G] that also extends [ICartItem].\n  ///\n  /// Useful when converting between generic item types.\n  CartItemsGroup<G> cast<G extends ICartItem>() {\n    return CartItemsGroup<G>(\n      id: id,\n      name: name,\n      items: items.cast<String, G>(),\n    );\n  }\n\n  /// Calculates the total price of all items in the group.\n  double totalPrice() =>\n      itemsList.fold(0, (total, item) => total + item.totalPrice());\n\n  /// Calculates the total quantity of all items in the group.\n  double totalQty() =>\n      itemsList.fold(0, (total, item) => total + item.notNullQty());\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/lib/src/cart_items_group.dart b/../flexi_cart/lib/src/cart_items_group.dart
--- a/../flexi_cart/lib/src/cart_items_group.dart	(revision 0a712f615a29b95b357fcc49e300042fa4b4dc7e)
+++ b/../flexi_cart/lib/src/cart_items_group.dart	(date 1748181661427)
@@ -1,4 +1,4 @@
-import 'package:flexi_cart/src/cart_item.dart';
+import 'package:flexi_cart/src/models/cart_item.dart';
 
 /// A group of cart items of type [T], each identified by a unique key.
 ///
Index: ../flexi_cart/lib/src/cart.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import 'package:flexi_cart/flexi_cart.dart';\nimport 'package:flutter/material.dart';\n\n/// A callback function that determines whether an\n/// item should be removed from the cart.\ntypedef RemoveCallBack<T> = bool Function(T item);\n\n/// A reactive and extensible shopping cart that supports item grouping,\n/// custom metadata, locking, expiration, and plugin extensions.\n///\n/// This class is designed for flexibility and use in state management\n/// systems such as Provider, Riverpod, or GetX.\nclass FlexiCart<T extends ICartItem> extends ChangeNotifier\n    with CartChangeNotifierDisposeMixin, CartStreamMixin<FlexiCart<T>> {\n  /// Constructs a [FlexiCart] instance.\n  ///\n  /// - [items] is an optional initial map of items.\n  /// - [groups] is an optional map of item groups.\n  /// - [onDisposed] is a callback called on disposal.\n  /// - [onAddItem] and [onDeleteItem] are callbacks for item operations.\n  /// - [removeItemCondition] defines a custom condition to remove items.\n  FlexiCart({\n    Map<String, T>? items,\n    Map<String, CartItemsGroup<T>>? groups,\n    this.onDisposed,\n    this.onAddItem,\n    this.onDeleteItem,\n    this.removeItemCondition,\n  })  : _items = items ?? {},\n        groups = groups ?? {};\n\n  /// Custom metadata storage.\n  final Map<String, dynamic> _metadata = {};\n\n  /// Returns a read-only view of the metadata.\n  Map<String, dynamic> get metadata => Map.unmodifiable(_metadata);\n\n  /// Callback triggered when the cart is disposed.\n  final VoidCallback? onDisposed;\n\n  /// Callback triggered when an item is added.\n  final VoidCallback? onAddItem;\n\n  /// Callback triggered when an item is deleted.\n  final VoidCallback? onDeleteItem;\n\n  /// Condition to determine whether an item should be removed.\n  RemoveCallBack<T>? removeItemCondition;\n\n  /// Internal storage for cart items.\n  final Map<String, T> _items;\n\n  /// Storage for item groups.\n  Map<String, CartItemsGroup<T>> groups;\n\n  /// Optional note for the cart (e.g., special instructions).\n  String? _note;\n\n  /// Delivery timestamp.\n  DateTime? _deliveredAt;\n\n  /// Expiration timestamp of the cart.\n  DateTime? _expiresAt;\n\n  /// Whether to allow items with quantity zero in the cart.\n  bool addZeroQuantity = false;\n\n  /// Indicates if the cart is locked for editing.\n  bool _isLocked = false;\n\n  /// Currency if needed for the cart.\n  CartCurrency? _cartCurrency;\n\n  /// Internal logs of cart events.\n  final List<String> _logs = [];\n\n  /// Registered plugins for cart event hooks.\n  final List<ICartPlugin<T>> _plugins = [];\n\n  /// Returns all cart items as a map.\n  Map<String, T> get items => _items;\n\n  /// Returns all cart items as a list.\n  List<T> get itemsList => _items.values.toList();\n\n  /// Returns the note for the cart.\n  String? get note => _note;\n\n  /// Returns the delivery timestamp.\n  DateTime? get deliveredAt => _deliveredAt;\n\n  /// Indicates whether the cart is currently locked.\n  bool get isLocked => _isLocked;\n\n  /// Returns true if the cart has expired.\n  bool get isExpired =>\n      _expiresAt != null && DateTime.now().isAfter(_expiresAt!);\n\n  /// Returns the CartCurrency.\n  CartCurrency? get cartCurrency => _cartCurrency;\n\n  /// Returns the internal log entries.\n  List<String> get logs => List.unmodifiable(_logs);\n\n  /// Sets the cart to expire after the given duration from now.\n  void setExpiration(Duration duration, {bool shouldNotifyListeners = false}) {\n    _checkDisposed();\n    _expiresAt = DateTime.now().add(duration);\n    _log(\n      'Cart has been set to expire at: $_expiresAt',\n      notified: shouldNotifyListeners,\n    );\n    if (shouldNotifyListeners) notifyListeners();\n  }\n\n  /// Sets a metadata key-value pair.\n  void setMetadata(\n    String key,\n    dynamic value, {\n    bool shouldNotifyListeners = true,\n  }) {\n    _checkDisposed();\n\n    _metadata[key] = value;\n    _log('Metadata set: $key = $value', notified: shouldNotifyListeners);\n    if (shouldNotifyListeners) notifyListeners();\n  }\n\n  /// get metadata value by key\n  D? getMetadata<D>(String key) => _metadata[key] as D?;\n\n  /// Removes a metadata entry.\n  void removeMetadata(String key, {bool shouldNotifyListeners = true}) {\n    _checkDisposed();\n\n    if (_metadata.containsKey(key)) {\n      _metadata.remove(key);\n      _log('Metadata removed: $key', notified: shouldNotifyListeners);\n      if (shouldNotifyListeners) notifyListeners();\n    }\n  }\n\n  /// Locks the cart from being edited.\n  void lock({bool shouldNotifyListeners = false}) {\n    _checkDisposed();\n    if (_isLocked) return;\n    _isLocked = true;\n    _log('Cart has been locked', notified: shouldNotifyListeners);\n    if (shouldNotifyListeners) notifyListeners();\n  }\n\n  /// Unlocks the cart, allowing edits.\n  void unlock({bool shouldNotifyListeners = false}) {\n    _checkDisposed();\n    if (!_isLocked) return;\n    _isLocked = false;\n    _log('Cart has been locked', notified: shouldNotifyListeners);\n    if (shouldNotifyListeners) notifyListeners();\n  }\n\n  /// Throws an exception if the cart is locked.\n  void _checkLock() {\n    if (_isLocked) {\n      final error = CartLockedException();\n      _notifyOnErrorPlugins(error, StackTrace.current);\n      throw error;\n    }\n  }\n\n  /// Logs a message with a timestamp.\n  void _log(String message, {bool notified = false}) {\n    _logs.add('$message - {notified: $notified}');\n  }\n\n  /// Registers a plugin to be notified on cart changes.\n  void registerPlugin(ICartPlugin<T> plugin) {\n    _checkDisposed();\n    _plugins.add(plugin);\n  }\n\n  /// Notifies all registered plugins about a cart change.\n  void _notifyOnChangedPlugins() {\n    for (final plugin in _plugins) {\n      try {\n        plugin.onChange(this);\n      } on Exception catch (e, s) {\n        debugPrint('Plugin onChange error: $e\\n$s');\n      }\n    }\n  }\n\n  /// Notifies all registered plugins about a cart error.\n  void _notifyOnErrorPlugins(Object error, StackTrace stackTrace) {\n    for (final plugin in _plugins) {\n      plugin.onError(this, error, stackTrace);\n    }\n  }\n\n  /// Throws an exception if the cart is disposed.\n  void _checkDisposed() {\n    if (disposed) {\n      final error =\n          CartDisposedException('Cannot perform action after dispose');\n      _notifyOnErrorPlugins(error, StackTrace.current);\n      throw error;\n    }\n  }\n\n  /// Notifies all registered plugins about a cart close.\n  void _notifyOnClosePlugins() {\n    for (final plugin in _plugins) {\n      plugin.onClose(this);\n    }\n  }\n\n  /// Sets a note for the cart.\n  void setNote(String? note, {bool shouldNotifyListeners = false}) {\n    _checkDisposed();\n    _note = note;\n    _log('Set Note with: $note', notified: shouldNotifyListeners);\n    if (shouldNotifyListeners) notifyListeners();\n  }\n\n  /// Deprecated. Use [setNote] instead.\n  @Deprecated('Use setNote() instead')\n  set note(String? note) {\n    _note = note;\n    _log('Set Note with: $note', notified: true);\n    notifyListeners();\n  }\n\n  /// Sets the delivery timestamp.\n  void setDeliveredAt(\n    DateTime? deliveredAt, {\n    bool shouldNotifyListeners = false,\n  }) {\n    _checkDisposed();\n    _deliveredAt = deliveredAt;\n    _log('Set Delivered at: $deliveredAt', notified: shouldNotifyListeners);\n    if (shouldNotifyListeners) notifyListeners();\n  }\n\n  /// Deprecated. Use [setDeliveredAt] instead.\n  @Deprecated('Use setDeliveredAt() instead')\n  set deliveredAt(DateTime? deliveredAt) {\n    _deliveredAt = deliveredAt;\n\n    _log('Set Delivered at: $deliveredAt', notified: true);\n    notifyListeners();\n  }\n\n  /// Calculates the total price of items in the cart.\n  double totalPrice() =>\n      itemsList.fold(0, (sum, item) => sum + item.totalPrice());\n\n  /// Calculates the total quantity of all items.\n  double totalQuantity() =>\n      itemsList.fold(0, (sum, item) => sum + item.notNullQty());\n\n  /// Checks if any item in the cart has a very high quantity.\n  bool get checkForLargeValue => itemsList.any((e) => e.notNullQty() >= 100);\n\n  /// Returns true if the cart has any items.\n  bool isNotEmpty() => _items.isNotEmpty;\n\n  /// Returns true if the cart is empty.\n  bool isEmpty() => _items.isEmpty;\n\n  /// Adds a single item to the cart.\n  ///\n  /// If [increment] is true and the item already exists, quantity is added.\n  void add(\n    T item, {\n    bool increment = false,\n    bool shouldNotifyListeners = true,\n  }) {\n    _checkDisposed();\n\n    _checkLock();\n    _add(item, increment);\n    emit(this);\n    _log(\n      'Item added: ${item.key}',\n      notified: shouldNotifyListeners,\n    );\n    if (shouldNotifyListeners) notifyListeners();\n  }\n\n  /// Adds multiple items to the cart.\n  ///\n  /// - [increment] adds quantities if item already exists.\n  /// - [skipIfExist] skips items already in the cart.\n  /// - [shouldNotifyListeners] determines if [notifyListeners] is called.\n  void addItems(\n    List<T> items, {\n    bool increment = false,\n    bool skipIfExist = false,\n    bool shouldNotifyListeners = true,\n  }) {\n    _checkDisposed();\n    _checkLock();\n    for (final item in items) {\n      if (skipIfExist && _items.containsKey(item.key)) continue;\n      _add(item, increment);\n    }\n    emit(this);\n    _log(\n      'Items have been added: $items',\n      notified: shouldNotifyListeners,\n    );\n    if (shouldNotifyListeners) notifyListeners();\n  }\n\n  /// Removes all items not included in the provided list.\n  void removeItemsNotInList(\n    List<T> items, {\n    bool shouldNotifyListeners = true,\n  }) {\n    _checkDisposed();\n    _checkLock();\n    final keepKeys = items.map((e) => e.key).toSet();\n    for (final item in itemsList) {\n      if (!keepKeys.contains(item.key)) _delete(item);\n    }\n    emit(this);\n    _log(\n      'Items have been removed: $items',\n      notified: shouldNotifyListeners,\n    );\n    if (shouldNotifyListeners) notifyListeners();\n  }\n\n  /// Deletes a single item from the cart.\n  void delete(T item, {bool shouldNotifyListeners = true}) {\n    _checkDisposed();\n    _checkLock();\n    _delete(item);\n    emit(this);\n    _log(\n      'Item has been removed: ${item.key}',\n      notified: shouldNotifyListeners,\n    );\n    if (shouldNotifyListeners) notifyListeners();\n  }\n\n  /// Clears all items from the cart without affecting metadata.\n  void resetItems({bool shouldNotifyListeners = true}) {\n    _checkDisposed();\n    _checkLock();\n    _log(\n      'Items have been reset: $itemsList',\n      notified: shouldNotifyListeners,\n    );\n    groups.clear();\n    _items.clear();\n    emit(this);\n    if (shouldNotifyListeners) notifyListeners();\n  }\n\n  /// Fully resets the cart and its metadata.\n  void reset({bool shouldNotifyListeners = true}) {\n    _checkDisposed();\n\n    try {\n      groups.clear();\n      _items.clear();\n      _note = null;\n      _deliveredAt = null;\n      _expiresAt = null;\n      addZeroQuantity = false;\n      _metadata.clear();\n      _isLocked = false;\n      _logs.clear();\n      _cartCurrency = null;\n      removeItemCondition = null;\n\n      emit(this);\n      if (shouldNotifyListeners) notifyListeners();\n    } catch (error, stackTrace) {\n      _notifyOnErrorPlugins(error, stackTrace);\n      rethrow;\n    }\n  }\n\n  /// Clears a specific item group by ID.\n  void clearItemsGroup(String groupId, {bool shouldNotifyListeners = true}) {\n    _checkDisposed();\n    _checkLock();\n\n    groups.remove(groupId);\n    _items.removeWhere((_, item) => item.group == groupId);\n    _log(\n      'Group has been removed from the cart: $groupId',\n      notified: shouldNotifyListeners,\n    );\n    emit(this);\n    if (shouldNotifyListeners) notifyListeners();\n  }\n\n  /// Returns true if the given group is empty.\n  bool isItemsGroupEmpty(String groupId) => getItemsGroup(groupId).isEmpty;\n\n  /// Returns true if the given group is not empty.\n  bool isNotItemsGroupEmpty(String groupId) =>\n      getItemsGroup(groupId).isNotEmpty;\n\n  /// Gets the list of items for a specific group.\n  List<T> getItemsGroup(String groupId) =>\n      groups[groupId]?.items.values.toList() ?? [];\n\n  /// Returns the count of items in a specific group.\n  int getItemsGroupLength(String groupId) => getItemsGroup(groupId).length;\n\n  /// Returns a clone of the cart with copied items and metadata.\n  FlexiCart<T> clone() {\n    _checkDisposed();\n\n    return FlexiCart<T>(\n      items: Map<String, T>.from(_items),\n      groups: Map<String, CartItemsGroup<T>>.from(groups),\n    )\n      ..removeItemCondition = removeItemCondition\n      ..addZeroQuantity = addZeroQuantity\n      .._note = _note\n      .._metadata.addAll(_metadata)\n      .._cartCurrency = _cartCurrency\n      .._deliveredAt = _deliveredAt;\n  }\n\n  /// Casts the cart to a different item type [G].\n  FlexiCart<G> cast<G extends ICartItem>() {\n    return FlexiCart<G>(\n      items: _items.cast<String, G>(),\n      groups: groups.map((k, v) => MapEntry(k, v.cast<G>())),\n    )\n      ..addZeroQuantity = addZeroQuantity\n      .._note = _note\n      .._metadata.addAll(_metadata)\n      .._cartCurrency = _cartCurrency\n      .._deliveredAt = _deliveredAt;\n  }\n\n  /// Applies an exchange rate to all items based on the target currency.\n  void applyExchangeRate(\n    CartCurrency cartCurrency, {\n    bool shouldNotifyListeners = true,\n  }) {\n    _checkDisposed();\n    _checkLock();\n    if (cartCurrency == _cartCurrency) return;\n    removeExchangeRate();\n\n    _cartCurrency = cartCurrency;\n    final rate = cartCurrency.rate;\n\n    _items.forEach((key, item) {\n      item.price *= rate;\n\n      // Update item in group if necessary\n      final groupId = item.group;\n      if (groups[groupId]?.items != null) {\n        groups[groupId]!.items[key] = item;\n      }\n    });\n\n    _log(\n      'Applied exchange rate for ${cartCurrency.code}: $rate',\n      notified: shouldNotifyListeners,\n    );\n\n    emit(this);\n    if (shouldNotifyListeners) notifyListeners();\n  }\n\n  /// Removes the applied exchange rate and reverts item prices.\n  void removeExchangeRate({\n    bool shouldNotifyListeners = true,\n  }) {\n    _checkDisposed();\n    _checkLock();\n    if (_cartCurrency == null) return;\n\n    final rate = _cartCurrency!.rate;\n\n    _items.forEach((key, item) {\n      item.price /= rate;\n\n      // Update item in group if necessary\n      final groupId = item.group;\n      if (groups[groupId]?.items != null) {\n        groups[groupId]!.items[key] = item;\n      }\n    });\n\n    _log(\n      'Removed exchange rate for ${_cartCurrency!.code}: $rate',\n      notified: shouldNotifyListeners,\n    );\n\n    _cartCurrency = null;\n\n    emit(this);\n    if (shouldNotifyListeners) notifyListeners();\n  }\n\n  /// Disposes of the cart and triggers [onDisposed].\n  @override\n  void dispose() {\n    super.dispose();\n    _notifyOnClosePlugins();\n    _log('Cart has been disposed');\n    onDisposed?.call();\n    disposeStream(); // call this if using the mixin's stream\n  }\n\n  /// Internal method to add an item and notify plugins.\n  void _add(T item, bool increment) {\n    final shouldDeleteZeroQty = !addZeroQuantity && item.quantity == 0;\n    final shouldRemoveItem = removeItemCondition?.call(item) ?? false;\n\n    if (shouldRemoveItem || item.quantity == null || shouldDeleteZeroQty) {\n      _delete(item);\n      return;\n    }\n\n    onAddItem?.call();\n    _addToItems(item, increment: increment);\n    _addToGroup(item);\n    _notifyOnChangedPlugins();\n  }\n\n  /// Adds an item to the item map.\n  void _addToItems(T item, {bool increment = false}) {\n    final key = item.key;\n    if (increment && _items.containsKey(key)) {\n      _items[key] = item\n        ..quantity = item.notNullQty() + _items[key]!.notNullQty();\n    } else {\n      _items[key] = item;\n    }\n  }\n\n  /// Adds an item to the appropriate group.\n  void _addToGroup(T item) {\n    groups.putIfAbsent(\n      item.group,\n      () => CartItemsGroup<T>(\n        id: item.group,\n        name: item.groupName,\n      ),\n    );\n    groups[item.group]!.add(item);\n  }\n\n  /// Deletes an item from the item map and group.\n  void _delete(T item) {\n    _items.remove(item.key);\n    _deleteFromGroup(item);\n    onDeleteItem?.call();\n    _notifyOnChangedPlugins();\n  }\n\n  /// Removes an item from its group.\n  void _deleteFromGroup(T item) {\n    final group = groups[item.group];\n    if (group != null) {\n      group.remove(item);\n      if (group.items.isEmpty) groups.remove(item.group);\n    }\n  }\n}\n\n/// Interface for plugins that want to be notified when the cart changes.\nabstract class ICartPlugin<T extends ICartItem> {\n  /// Called whenever a [onChange] occurs in any [cart]\n  /// A [onChange] occurs when a new value is emitted.\n  /// [onChange] is called before a cart's state has been updated.\n  @protected\n  @mustCallSuper\n  void onChange(FlexiCart<T> cart) {}\n\n  /// Called whenever an [error] is thrown in the cart.\n  /// The [stackTrace] argument may be [StackTrace.empty] if an error\n  /// was received without a stack trace.\n  @protected\n  @mustCallSuper\n  void onError(FlexiCart<T> cart, Object error, StackTrace stackTrace) {}\n\n  /// Called whenever a [cart] is closed.\n  /// [onClose] is called just before the [cart] is closed\n  /// and indicates that the particular instance will no longer\n  /// emit new states.\n  @protected\n  @mustCallSuper\n  void onClose(FlexiCart<T> cart) {}\n}\n\n/// Represents a currency with an exchange rate and currency code.\n///\n/// This class holds the exchange [rate] relative to a base currency\n/// and the [code] representing the currency (e.g., \"USD\", \"EUR\").\n@immutable\nclass CartCurrency {\n  /// Creates a [CartCurrency] instance with the given [rate] and [code].\n  ///\n  /// Both [rate] and [code] are required.\n  const CartCurrency({required this.rate, required this.code});\n\n  /// The exchange rate relative to a base currency.\n  final num rate;\n\n  /// The currency code (e.g., \"USD\", \"EUR\").\n  final String code;\n\n  @override\n  String toString() {\n    return 'CartCurrency{rate: $rate, code: $code}';\n  }\n\n  @override\n  bool operator ==(Object other) {\n    if (identical(this, other)) return true;\n    if (other.runtimeType != runtimeType) return false;\n\n    return other is CartCurrency && other.rate == rate && other.code == code;\n  }\n\n  @override\n  int get hashCode => Object.hash(rate, code);\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/lib/src/cart.dart b/../flexi_cart/lib/src/cart.dart
--- a/../flexi_cart/lib/src/cart.dart	(revision 0a712f615a29b95b357fcc49e300042fa4b4dc7e)
+++ b/../flexi_cart/lib/src/cart.dart	(date 1748192914843)
@@ -11,7 +11,13 @@
 /// This class is designed for flexibility and use in state management
 /// systems such as Provider, Riverpod, or GetX.
 class FlexiCart<T extends ICartItem> extends ChangeNotifier
-    with CartChangeNotifierDisposeMixin, CartStreamMixin<FlexiCart<T>> {
+    with
+        CartChangeNotifierDisposeMixin,
+        CartStreamMixin<FlexiCart<T>>,
+        CartPluginsMixin,
+        CartHistoryMixin,
+        CartLockMixin,
+        CartMetadataMixin {
   /// Constructs a [FlexiCart] instance.
   ///
   /// - [items] is an optional initial map of items.
@@ -22,29 +28,56 @@
   FlexiCart({
     Map<String, T>? items,
     Map<String, CartItemsGroup<T>>? groups,
+    this.hooks,
+    CartOptions? options,
+
+    /// Callbacks for various cart events
     this.onDisposed,
     this.onAddItem,
     this.onDeleteItem,
     this.removeItemCondition,
-  })  : _items = items ?? {},
-        groups = groups ?? {};
+  })  : _options = options ?? CartOptions(),
+        _items = items ?? {},
+        groups = groups ?? {} {
+    final validatorOptions = _options.validatorOptions;
+
+    if (validatorOptions.autoValidate) {
+      // Automatically validate the cart if auto-validation is enabled
+      _validateIfNeeded();
+      addListener(_validateIfNeeded);
+    }
+  }
 
-  /// Custom metadata storage.
-  final Map<String, dynamic> _metadata = {};
+  /// Class have Callbacks
+  final CartHooks? hooks;
 
-  /// Returns a read-only view of the metadata.
-  Map<String, dynamic> get metadata => Map.unmodifiable(_metadata);
+  /// Options for the cart, including validation and discount options.
+  CartOptions _options;
+
+  /// Returns the current options for the cart.
+  CartOptions get options => _options;
 
   /// Callback triggered when the cart is disposed.
+  @Deprecated('use hooks:CartHooks(onDisposed:(){}) instead')
   final VoidCallback? onDisposed;
 
   /// Callback triggered when an item is added.
+  @Deprecated('use hooks:CartHooks(onAddItem:(item){}) instead')
   final VoidCallback? onAddItem;
 
   /// Callback triggered when an item is deleted.
+  @Deprecated('use hooks:CartHooks(onDeleteItem:(item){}) instead')
   final VoidCallback? onDeleteItem;
 
   /// Condition to determine whether an item should be removed.
+  @Deprecated(
+    'removeItemCondition is deprecated and will be removed'
+    ' in a future release. '
+    'Please use options.behaviorOptions.itemFilter instead. '
+    'Note: itemFilter returns true to keep the item, '
+    'while removeItemCondition returned true to remove it — '
+    'reverse the logic accordingly.',
+  )
   RemoveCallBack<T>? removeItemCondition;
 
   /// Internal storage for cart items.
@@ -65,17 +98,10 @@
   /// Whether to allow items with quantity zero in the cart.
   bool addZeroQuantity = false;
 
-  /// Indicates if the cart is locked for editing.
-  bool _isLocked = false;
-
   /// Currency if needed for the cart.
   CartCurrency? _cartCurrency;
 
   /// Internal logs of cart events.
-  final List<String> _logs = [];
-
-  /// Registered plugins for cart event hooks.
-  final List<ICartPlugin<T>> _plugins = [];
 
   /// Returns all cart items as a map.
   Map<String, T> get items => _items;
@@ -89,9 +115,6 @@
   /// Returns the delivery timestamp.
   DateTime? get deliveredAt => _deliveredAt;
 
-  /// Indicates whether the cart is currently locked.
-  bool get isLocked => _isLocked;
-
   /// Returns true if the cart has expired.
   bool get isExpired =>
       _expiresAt != null && DateTime.now().isAfter(_expiresAt!);
@@ -99,68 +122,122 @@
   /// Returns the CartCurrency.
   CartCurrency? get cartCurrency => _cartCurrency;
 
-  /// Returns the internal log entries.
-  List<String> get logs => List.unmodifiable(_logs);
+  /// set promo code for the cart.
+  void setPromoCode(
+    String? code, {
+    bool shouldNotifyListeners = false,
+  }) {
+    _performCartOperation(
+      operation: () {
+        _options = _options.copyWith(
+          validatorOptions: _options.validatorOptions.copyWith(
+            promoCode: code,
+          ),
+        );
+        _validateIfNeeded();
+      },
+      logMessage: 'Set promo code: $code',
+      shouldNotifyListeners: shouldNotifyListeners,
+    );
+  }
+
+  /// Returns the current promo code.
+  String? get promoCode => _options.validatorOptions.promoCode;
+
+  /// Sets a custom validator for the promo code.
+  void setPromoCodeValidator(
+    String? Function(String code)? promoCodeValidator, {
+    bool shouldNotifyListeners = false,
+  }) {
+    _performCartOperation(
+      operation: () {
+        _options = _options.copyWith(
+          validatorOptions: _options.validatorOptions.copyWith(
+            promoCodeValidator: promoCodeValidator,
+          ),
+        );
+        _validateIfNeeded();
+      },
+      logMessage: 'Set promo code validator',
+      shouldNotifyListeners: shouldNotifyListeners,
+    );
+  }
+
+  /// Returns true if the cart is locked.
+  Map<String, dynamic> validate() {
+    final validatorOptions = _options.validatorOptions;
+    return validatorOptions.validate(this);
+  }
+
+  /// Returns true if the cart has any validators.
+  bool get hasValidators => _options.validatorOptions.hasValidators;
+
+  /// Returns the list of validators.
+  List<ICartValidator> validators() {
+    return _options.validatorOptions.validators;
+  }
+
+  /// add a validator to the validators.
+  void addValidator(ICartValidator validator) {
+    _options.validatorOptions.addValidator(validator);
+    _validateIfNeeded();
+  }
+
+  /// Removes a validator from the list.
+  void removeValidator(ICartValidator validator) {
+    _options.validatorOptions.removeValidator(validator);
+    _validateIfNeeded();
+  }
+
+  /// Adds multiple validators.
+  void addValidators(List<ICartValidator> validators) {
+    _options.validatorOptions.addValidators(validators);
+    _validateIfNeeded();
+  }
+
+  /// Clears all validators.
+  void clearValidators() {
+    _options.validatorOptions.clearValidators();
+  }
+
+  /// Returns the current validation errors as a map.
+
+  Map<String, dynamic> validationErrors = {};
+
+  void _validateIfNeeded() {
+    final errors = validate();
+    validationErrors = errors;
+    if (errors.isNotEmpty) {
+      _log('Auto-validation errors: $errors');
+    } else {
+      _log('Auto-validation passed');
+    }
+  }
+
+  /// discountOptions is used to calculate the discount for the cart.
+  double discount() {
+    return _options.discountOptions.calculate(this);
+  }
+
+  /// Returns the label used for the discount.
+  String get discountLabel => _options.discountOptions.discountLabel;
+
+  /// Returns the total price minus any discounts.
+  double getTotalAfterDiscount() => totalPrice() - discount();
 
   /// Sets the cart to expire after the given duration from now.
   void setExpiration(Duration duration, {bool shouldNotifyListeners = false}) {
-    _checkDisposed();
-    _expiresAt = DateTime.now().add(duration);
-    _log(
-      'Cart has been set to expire at: $_expiresAt',
-      notified: shouldNotifyListeners,
-    );
-    if (shouldNotifyListeners) notifyListeners();
-  }
-
-  /// Sets a metadata key-value pair.
-  void setMetadata(
-    String key,
-    dynamic value, {
-    bool shouldNotifyListeners = true,
-  }) {
-    _checkDisposed();
-
-    _metadata[key] = value;
-    _log('Metadata set: $key = $value', notified: shouldNotifyListeners);
-    if (shouldNotifyListeners) notifyListeners();
-  }
-
-  /// get metadata value by key
-  D? getMetadata<D>(String key) => _metadata[key] as D?;
-
-  /// Removes a metadata entry.
-  void removeMetadata(String key, {bool shouldNotifyListeners = true}) {
-    _checkDisposed();
-
-    if (_metadata.containsKey(key)) {
-      _metadata.remove(key);
-      _log('Metadata removed: $key', notified: shouldNotifyListeners);
-      if (shouldNotifyListeners) notifyListeners();
-    }
-  }
-
-  /// Locks the cart from being edited.
-  void lock({bool shouldNotifyListeners = false}) {
-    _checkDisposed();
-    if (_isLocked) return;
-    _isLocked = true;
-    _log('Cart has been locked', notified: shouldNotifyListeners);
-    if (shouldNotifyListeners) notifyListeners();
-  }
-
-  /// Unlocks the cart, allowing edits.
-  void unlock({bool shouldNotifyListeners = false}) {
-    _checkDisposed();
-    if (!_isLocked) return;
-    _isLocked = false;
-    _log('Cart has been locked', notified: shouldNotifyListeners);
-    if (shouldNotifyListeners) notifyListeners();
+    _performCartOperation(
+        operation: () {
+          _expiresAt = DateTime.now().add(duration);
+        },
+        logMessage: ' Set expiration to: ${DateTime.now().add(duration)}',
+        shouldNotifyListeners: shouldNotifyListeners);
   }
 
   /// Throws an exception if the cart is locked.
   void _checkLock() {
-    if (_isLocked) {
+    if (isLocked) {
       final error = CartLockedException();
       _notifyOnErrorPlugins(error, StackTrace.current);
       throw error;
@@ -169,18 +246,16 @@
 
   /// Logs a message with a timestamp.
   void _log(String message, {bool notified = false}) {
-    _logs.add('$message - {notified: $notified}');
-  }
-
-  /// Registers a plugin to be notified on cart changes.
-  void registerPlugin(ICartPlugin<T> plugin) {
-    _checkDisposed();
-    _plugins.add(plugin);
+    addHistory('$message - {notified: $notified}');
+    final behaviorOptions = _options.behaviorOptions;
+    if (behaviorOptions.enableLogging) {
+      behaviorOptions.logger?.call(message);
+    }
   }
 
   /// Notifies all registered plugins about a cart change.
   void _notifyOnChangedPlugins() {
-    for (final plugin in _plugins) {
+    for (final plugin in plugins) {
       try {
         plugin.onChange(this);
       } on Exception catch (e, s) {
@@ -191,42 +266,36 @@
 
   /// Notifies all registered plugins about a cart error.
   void _notifyOnErrorPlugins(Object error, StackTrace stackTrace) {
-    for (final plugin in _plugins) {
+    for (final plugin in plugins) {
       plugin.onError(this, error, stackTrace);
     }
   }
 
   /// Throws an exception if the cart is disposed.
   void _checkDisposed() {
-    if (disposed) {
-      final error =
-          CartDisposedException('Cannot perform action after dispose');
-      _notifyOnErrorPlugins(error, StackTrace.current);
-      throw error;
-    }
+    checkIfDisposed(
+      (exception) {
+        _notifyOnErrorPlugins(exception, StackTrace.current);
+      },
+    );
   }
 
   /// Notifies all registered plugins about a cart close.
   void _notifyOnClosePlugins() {
-    for (final plugin in _plugins) {
+    for (final plugin in plugins) {
       plugin.onClose(this);
     }
   }
 
   /// Sets a note for the cart.
   void setNote(String? note, {bool shouldNotifyListeners = false}) {
-    _checkDisposed();
-    _note = note;
-    _log('Set Note with: $note', notified: shouldNotifyListeners);
-    if (shouldNotifyListeners) notifyListeners();
-  }
-
-  /// Deprecated. Use [setNote] instead.
-  @Deprecated('Use setNote() instead')
-  set note(String? note) {
-    _note = note;
-    _log('Set Note with: $note', notified: true);
-    notifyListeners();
+    _performCartOperation(
+      operation: () {
+        _note = note;
+      },
+      logMessage: 'Set Note with: $note',
+      shouldNotifyListeners: shouldNotifyListeners,
+    );
   }
 
   /// Sets the delivery timestamp.
@@ -234,19 +303,13 @@
     DateTime? deliveredAt, {
     bool shouldNotifyListeners = false,
   }) {
-    _checkDisposed();
-    _deliveredAt = deliveredAt;
-    _log('Set Delivered at: $deliveredAt', notified: shouldNotifyListeners);
-    if (shouldNotifyListeners) notifyListeners();
-  }
-
-  /// Deprecated. Use [setDeliveredAt] instead.
-  @Deprecated('Use setDeliveredAt() instead')
-  set deliveredAt(DateTime? deliveredAt) {
-    _deliveredAt = deliveredAt;
-
-    _log('Set Delivered at: $deliveredAt', notified: true);
-    notifyListeners();
+    _performCartOperation(
+      operation: () {
+        _deliveredAt = deliveredAt;
+      },
+      logMessage: 'Set Delivered at: $deliveredAt',
+      shouldNotifyListeners: shouldNotifyListeners,
+    );
   }
 
   /// Calculates the total price of items in the cart.
@@ -274,16 +337,13 @@
     bool increment = false,
     bool shouldNotifyListeners = true,
   }) {
-    _checkDisposed();
-
-    _checkLock();
-    _add(item, increment);
-    emit(this);
-    _log(
-      'Item added: ${item.key}',
-      notified: shouldNotifyListeners,
+    _performCartOperation(
+      operation: () {
+        _add(item, increment);
+      },
+      logMessage: 'Item added: ${item.key}',
+      shouldNotifyListeners: shouldNotifyListeners,
     );
-    if (shouldNotifyListeners) notifyListeners();
   }
 
   /// Adds multiple items to the cart.
@@ -297,18 +357,18 @@
     bool skipIfExist = false,
     bool shouldNotifyListeners = true,
   }) {
-    _checkDisposed();
-    _checkLock();
-    for (final item in items) {
-      if (skipIfExist && _items.containsKey(item.key)) continue;
-      _add(item, increment);
-    }
-    emit(this);
-    _log(
-      'Items have been added: $items',
-      notified: shouldNotifyListeners,
+    _performCartOperation(
+      operation: () {
+        for (final item in items) {
+          if (skipIfExist && _items.containsKey(item.key)) {
+            continue;
+          }
+          _add(item, increment);
+        }
+      },
+      logMessage: 'Items have been added: $items',
+      shouldNotifyListeners: shouldNotifyListeners,
     );
-    if (shouldNotifyListeners) notifyListeners();
   }
 
   /// Removes all items not included in the provided list.
@@ -316,45 +376,41 @@
     List<T> items, {
     bool shouldNotifyListeners = true,
   }) {
-    _checkDisposed();
-    _checkLock();
-    final keepKeys = items.map((e) => e.key).toSet();
-    for (final item in itemsList) {
-      if (!keepKeys.contains(item.key)) _delete(item);
-    }
-    emit(this);
-    _log(
-      'Items have been removed: $items',
-      notified: shouldNotifyListeners,
+    _performCartOperation(
+      operation: () {
+        final keepKeys = items.map((e) => e.key).toSet();
+        for (final item in itemsList) {
+          if (!keepKeys.contains(item.key)) {
+            _delete(item);
+          }
+        }
+      },
+      logMessage: 'Items have been removed: $items',
+      shouldNotifyListeners: shouldNotifyListeners,
     );
-    if (shouldNotifyListeners) notifyListeners();
   }
 
   /// Deletes a single item from the cart.
   void delete(T item, {bool shouldNotifyListeners = true}) {
-    _checkDisposed();
-    _checkLock();
-    _delete(item);
-    emit(this);
-    _log(
-      'Item has been removed: ${item.key}',
-      notified: shouldNotifyListeners,
+    _performCartOperation(
+      operation: () {
+        _delete(item);
+      },
+      logMessage: 'Item has been removed: ${item.key}',
+      shouldNotifyListeners: shouldNotifyListeners,
     );
-    if (shouldNotifyListeners) notifyListeners();
   }
 
   /// Clears all items from the cart without affecting metadata.
   void resetItems({bool shouldNotifyListeners = true}) {
-    _checkDisposed();
-    _checkLock();
-    _log(
-      'Items have been reset: $itemsList',
-      notified: shouldNotifyListeners,
-    );
-    groups.clear();
-    _items.clear();
-    emit(this);
-    if (shouldNotifyListeners) notifyListeners();
+    _performCartOperation(
+      operation: () {
+        groups.clear();
+        _items.clear();
+      },
+      logMessage: 'Items have been reset: $itemsList',
+      shouldNotifyListeners: shouldNotifyListeners,
+    );
   }
 
   /// Fully resets the cart and its metadata.
@@ -368,14 +424,16 @@
       _deliveredAt = null;
       _expiresAt = null;
       addZeroQuantity = false;
-      _metadata.clear();
-      _isLocked = false;
-      _logs.clear();
+      clearAllMetadata();
+      resetLock();
+      clearHistory();
       _cartCurrency = null;
       removeItemCondition = null;
 
       emit(this);
-      if (shouldNotifyListeners) notifyListeners();
+      if (shouldNotifyListeners) {
+        notifyListeners();
+      }
     } catch (error, stackTrace) {
       _notifyOnErrorPlugins(error, stackTrace);
       rethrow;
@@ -387,14 +445,14 @@
     _checkDisposed();
     _checkLock();
 
-    groups.remove(groupId);
-    _items.removeWhere((_, item) => item.group == groupId);
-    _log(
-      'Group has been removed from the cart: $groupId',
-      notified: shouldNotifyListeners,
+    _performCartOperation(
+      operation: () {
+        groups.remove(groupId);
+        _items.removeWhere((_, item) => item.group == groupId);
+      },
+      logMessage: 'Group has been removed from the cart: $groupId',
+      shouldNotifyListeners: shouldNotifyListeners,
     );
-    emit(this);
-    if (shouldNotifyListeners) notifyListeners();
   }
 
   /// Returns true if the given group is empty.
@@ -422,7 +480,7 @@
       ..removeItemCondition = removeItemCondition
       ..addZeroQuantity = addZeroQuantity
       .._note = _note
-      .._metadata.addAll(_metadata)
+      ..addMetadataEntries(metadata)
       .._cartCurrency = _cartCurrency
       .._deliveredAt = _deliveredAt;
   }
@@ -435,7 +493,7 @@
     )
       ..addZeroQuantity = addZeroQuantity
       .._note = _note
-      .._metadata.addAll(_metadata)
+      ..addMetadataEntries(metadata)
       .._cartCurrency = _cartCurrency
       .._deliveredAt = _deliveredAt;
   }
@@ -445,62 +503,59 @@
     CartCurrency cartCurrency, {
     bool shouldNotifyListeners = true,
   }) {
-    _checkDisposed();
-    _checkLock();
-    if (cartCurrency == _cartCurrency) return;
-    removeExchangeRate();
+    _performCartOperation(
+      operation: () {
+        if (cartCurrency == _cartCurrency) {
+          return;
+        }
+        removeExchangeRate();
 
-    _cartCurrency = cartCurrency;
-    final rate = cartCurrency.rate;
+        _cartCurrency = cartCurrency;
+        final rate = cartCurrency.rate;
 
-    _items.forEach((key, item) {
-      item.price *= rate;
+        _items.forEach((key, item) {
+          item.price *= rate;
 
-      // Update item in group if necessary
-      final groupId = item.group;
-      if (groups[groupId]?.items != null) {
-        groups[groupId]!.items[key] = item;
-      }
-    });
-
-    _log(
-      'Applied exchange rate for ${cartCurrency.code}: $rate',
-      notified: shouldNotifyListeners,
+          // Update item in group if necessary
+          final groupId = item.group;
+          if (groups[groupId]?.items != null) {
+            groups[groupId]!.items[key] = item;
+          }
+        });
+      },
+      logMessage: 'Applied exchange rate for ${cartCurrency.code}:'
+          ' ${cartCurrency.rate}',
+      shouldNotifyListeners: shouldNotifyListeners,
     );
-
-    emit(this);
-    if (shouldNotifyListeners) notifyListeners();
   }
 
   /// Removes the applied exchange rate and reverts item prices.
   void removeExchangeRate({
     bool shouldNotifyListeners = true,
   }) {
-    _checkDisposed();
-    _checkLock();
-    if (_cartCurrency == null) return;
+    _performCartOperation(
+      operation: () {
+        if (_cartCurrency == null) {
+          return;
+        }
 
-    final rate = _cartCurrency!.rate;
+        final rate = _cartCurrency!.rate;
 
-    _items.forEach((key, item) {
-      item.price /= rate;
+        _items.forEach((key, item) {
+          item.price /= rate;
 
-      // Update item in group if necessary
-      final groupId = item.group;
-      if (groups[groupId]?.items != null) {
-        groups[groupId]!.items[key] = item;
-      }
-    });
+          // Update item in group if necessary
+          final groupId = item.group;
+          if (groups[groupId]?.items != null) {
+            groups[groupId]!.items[key] = item;
+          }
+        });
 
-    _log(
-      'Removed exchange rate for ${_cartCurrency!.code}: $rate',
-      notified: shouldNotifyListeners,
-    );
-
-    _cartCurrency = null;
-
-    emit(this);
-    if (shouldNotifyListeners) notifyListeners();
+        _cartCurrency = null;
+      },
+      logMessage: 'Removed exchange rate',
+      shouldNotifyListeners: shouldNotifyListeners,
+    );
   }
 
   /// Disposes of the cart and triggers [onDisposed].
@@ -510,11 +565,20 @@
     _notifyOnClosePlugins();
     _log('Cart has been disposed');
     onDisposed?.call();
+    hooks?.onDisposed?.call();
     disposeStream(); // call this if using the mixin's stream
   }
 
   /// Internal method to add an item and notify plugins.
   void _add(T item, bool increment) {
+    final behaviorOptions = _options.behaviorOptions;
+
+    /// Apply BehaviorOptions filters before proceeding
+    if (!behaviorOptions.canAdd(item)) {
+      behaviorOptions.log('Add blocked by behavior options: ${item.key}');
+      return;
+    }
+
     final shouldDeleteZeroQty = !addZeroQuantity && item.quantity == 0;
     final shouldRemoveItem = removeItemCondition?.call(item) ?? false;
 
@@ -524,6 +588,15 @@
     }
 
     onAddItem?.call();
+    hooks?.onItemAdded?.call(item);
+
+    /// Override item price if resolver is provided on add only
+    if (behaviorOptions.priceResolver != null &&
+        !_items.containsKey(item.key)) {
+      final resolvedPrice = behaviorOptions.resolvePrice(item);
+      behaviorOptions.log('Resolved price for ${item.key}: $resolvedPrice');
+      item.price = resolvedPrice;
+    }
     _addToItems(item, increment: increment);
     _addToGroup(item);
     _notifyOnChangedPlugins();
@@ -557,6 +630,7 @@
     _items.remove(item.key);
     _deleteFromGroup(item);
     onDeleteItem?.call();
+    hooks?.onItemDeleted?.call(item);
     _notifyOnChangedPlugins();
   }
 
@@ -565,66 +639,27 @@
     final group = groups[item.group];
     if (group != null) {
       group.remove(item);
-      if (group.items.isEmpty) groups.remove(item.group);
-    }
-  }
-}
-
-/// Interface for plugins that want to be notified when the cart changes.
-abstract class ICartPlugin<T extends ICartItem> {
-  /// Called whenever a [onChange] occurs in any [cart]
-  /// A [onChange] occurs when a new value is emitted.
-  /// [onChange] is called before a cart's state has been updated.
-  @protected
-  @mustCallSuper
-  void onChange(FlexiCart<T> cart) {}
-
-  /// Called whenever an [error] is thrown in the cart.
-  /// The [stackTrace] argument may be [StackTrace.empty] if an error
-  /// was received without a stack trace.
-  @protected
-  @mustCallSuper
-  void onError(FlexiCart<T> cart, Object error, StackTrace stackTrace) {}
-
-  /// Called whenever a [cart] is closed.
-  /// [onClose] is called just before the [cart] is closed
-  /// and indicates that the particular instance will no longer
-  /// emit new states.
-  @protected
-  @mustCallSuper
-  void onClose(FlexiCart<T> cart) {}
-}
+      if (group.items.isEmpty) {
+        groups.remove(item.group);
+      }
+    }
+  }
 
-/// Represents a currency with an exchange rate and currency code.
-///
-/// This class holds the exchange [rate] relative to a base currency
-/// and the [code] representing the currency (e.g., "USD", "EUR").
-@immutable
-class CartCurrency {
-  /// Creates a [CartCurrency] instance with the given [rate] and [code].
-  ///
-  /// Both [rate] and [code] are required.
-  const CartCurrency({required this.rate, required this.code});
-
-  /// The exchange rate relative to a base currency.
-  final num rate;
+  /// Performs a cart operation with proper error handling and notifications.
+  void _performCartOperation({
+    required VoidCallback operation,
+    required String logMessage,
+    required bool shouldNotifyListeners,
+  }) {
+    _checkDisposed();
+    _checkLock();
 
-  /// The currency code (e.g., "USD", "EUR").
-  final String code;
+    operation();
+    emit(this);
+    _log(logMessage, notified: shouldNotifyListeners);
 
-  @override
-  String toString() {
-    return 'CartCurrency{rate: $rate, code: $code}';
-  }
-
-  @override
-  bool operator ==(Object other) {
-    if (identical(this, other)) return true;
-    if (other.runtimeType != runtimeType) return false;
-
-    return other is CartCurrency && other.rate == rate && other.code == code;
+    if (shouldNotifyListeners) {
+      notifyListeners();
+    }
   }
-
-  @override
-  int get hashCode => Object.hash(rate, code);
 }
Index: .idea/caches/deviceStreaming.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project version=\"4\">\n  <component name=\"DeviceStreaming\">\n    <option name=\"deviceSelectionList\">\n      <list>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"27\" />\n          <option name=\"brand\" value=\"DOCOMO\" />\n          <option name=\"codename\" value=\"F01L\" />\n          <option name=\"id\" value=\"F01L\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"FUJITSU\" />\n          <option name=\"name\" value=\"F-01L\" />\n          <option name=\"screenDensity\" value=\"360\" />\n          <option name=\"screenX\" value=\"720\" />\n          <option name=\"screenY\" value=\"1280\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"OnePlus\" />\n          <option name=\"codename\" value=\"OP5552L1\" />\n          <option name=\"id\" value=\"OP5552L1\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"OnePlus\" />\n          <option name=\"name\" value=\"CPH2415\" />\n          <option name=\"screenDensity\" value=\"480\" />\n          <option name=\"screenX\" value=\"1080\" />\n          <option name=\"screenY\" value=\"2412\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"OPPO\" />\n          <option name=\"codename\" value=\"OP573DL1\" />\n          <option name=\"id\" value=\"OP573DL1\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"OPPO\" />\n          <option name=\"name\" value=\"CPH2557\" />\n          <option name=\"screenDensity\" value=\"480\" />\n          <option name=\"screenX\" value=\"1080\" />\n          <option name=\"screenY\" value=\"2400\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"28\" />\n          <option name=\"brand\" value=\"DOCOMO\" />\n          <option name=\"codename\" value=\"SH-01L\" />\n          <option name=\"id\" value=\"SH-01L\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"SHARP\" />\n          <option name=\"name\" value=\"AQUOS sense2 SH-01L\" />\n          <option name=\"screenDensity\" value=\"480\" />\n          <option name=\"screenX\" value=\"1080\" />\n          <option name=\"screenY\" value=\"2160\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"samsung\" />\n          <option name=\"codename\" value=\"a15\" />\n          <option name=\"id\" value=\"a15\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Samsung\" />\n          <option name=\"name\" value=\"A15\" />\n          <option name=\"screenDensity\" value=\"450\" />\n          <option name=\"screenX\" value=\"1080\" />\n          <option name=\"screenY\" value=\"2340\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"samsung\" />\n          <option name=\"codename\" value=\"a15x\" />\n          <option name=\"id\" value=\"a15x\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Samsung\" />\n          <option name=\"name\" value=\"A15 5G\" />\n          <option name=\"screenDensity\" value=\"450\" />\n          <option name=\"screenX\" value=\"1080\" />\n          <option name=\"screenY\" value=\"2340\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"samsung\" />\n          <option name=\"codename\" value=\"a16x\" />\n          <option name=\"id\" value=\"a16x\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Samsung\" />\n          <option name=\"name\" value=\"A16 5G\" />\n          <option name=\"screenDensity\" value=\"450\" />\n          <option name=\"screenX\" value=\"1080\" />\n          <option name=\"screenY\" value=\"2340\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"samsung\" />\n          <option name=\"codename\" value=\"a35x\" />\n          <option name=\"id\" value=\"a35x\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Samsung\" />\n          <option name=\"name\" value=\"A35\" />\n          <option name=\"screenDensity\" value=\"450\" />\n          <option name=\"screenX\" value=\"1080\" />\n          <option name=\"screenY\" value=\"2340\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"31\" />\n          <option name=\"brand\" value=\"samsung\" />\n          <option name=\"codename\" value=\"a51\" />\n          <option name=\"id\" value=\"a51\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Samsung\" />\n          <option name=\"name\" value=\"Galaxy A51\" />\n          <option name=\"screenDensity\" value=\"420\" />\n          <option name=\"screenX\" value=\"1080\" />\n          <option name=\"screenY\" value=\"2400\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"google\" />\n          <option name=\"codename\" value=\"akita\" />\n          <option name=\"id\" value=\"akita\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Google\" />\n          <option name=\"name\" value=\"Pixel 8a\" />\n          <option name=\"screenDensity\" value=\"420\" />\n          <option name=\"screenX\" value=\"1080\" />\n          <option name=\"screenY\" value=\"2400\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"motorola\" />\n          <option name=\"codename\" value=\"arcfox\" />\n          <option name=\"id\" value=\"arcfox\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Motorola\" />\n          <option name=\"name\" value=\"razr plus 2024\" />\n          <option name=\"screenDensity\" value=\"360\" />\n          <option name=\"screenX\" value=\"1080\" />\n          <option name=\"screenY\" value=\"1272\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"33\" />\n          <option name=\"brand\" value=\"motorola\" />\n          <option name=\"codename\" value=\"austin\" />\n          <option name=\"id\" value=\"austin\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Motorola\" />\n          <option name=\"name\" value=\"moto g 5G (2022)\" />\n          <option name=\"screenDensity\" value=\"280\" />\n          <option name=\"screenX\" value=\"720\" />\n          <option name=\"screenY\" value=\"1600\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"33\" />\n          <option name=\"brand\" value=\"samsung\" />\n          <option name=\"codename\" value=\"b0q\" />\n          <option name=\"id\" value=\"b0q\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Samsung\" />\n          <option name=\"name\" value=\"Galaxy S22 Ultra\" />\n          <option name=\"screenDensity\" value=\"600\" />\n          <option name=\"screenX\" value=\"1440\" />\n          <option name=\"screenY\" value=\"3088\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"32\" />\n          <option name=\"brand\" value=\"google\" />\n          <option name=\"codename\" value=\"bluejay\" />\n          <option name=\"id\" value=\"bluejay\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Google\" />\n          <option name=\"name\" value=\"Pixel 6a\" />\n          <option name=\"screenDensity\" value=\"420\" />\n          <option name=\"screenX\" value=\"1080\" />\n          <option name=\"screenY\" value=\"2400\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"google\" />\n          <option name=\"codename\" value=\"caiman\" />\n          <option name=\"id\" value=\"caiman\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Google\" />\n          <option name=\"name\" value=\"Pixel 9 Pro\" />\n          <option name=\"screenDensity\" value=\"360\" />\n          <option name=\"screenX\" value=\"960\" />\n          <option name=\"screenY\" value=\"2142\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"google\" />\n          <option name=\"codename\" value=\"comet\" />\n          <option name=\"default\" value=\"true\" />\n          <option name=\"id\" value=\"comet\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Google\" />\n          <option name=\"name\" value=\"Pixel 9 Pro Fold\" />\n          <option name=\"screenDensity\" value=\"390\" />\n          <option name=\"screenX\" value=\"2076\" />\n          <option name=\"screenY\" value=\"2152\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"29\" />\n          <option name=\"brand\" value=\"samsung\" />\n          <option name=\"codename\" value=\"crownqlteue\" />\n          <option name=\"id\" value=\"crownqlteue\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Samsung\" />\n          <option name=\"name\" value=\"Galaxy Note9\" />\n          <option name=\"screenDensity\" value=\"420\" />\n          <option name=\"screenX\" value=\"2220\" />\n          <option name=\"screenY\" value=\"1080\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"samsung\" />\n          <option name=\"codename\" value=\"dm2q\" />\n          <option name=\"id\" value=\"dm2q\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Samsung\" />\n          <option name=\"name\" value=\"S23 Plus\" />\n          <option name=\"screenDensity\" value=\"450\" />\n          <option name=\"screenX\" value=\"1080\" />\n          <option name=\"screenY\" value=\"2340\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"samsung\" />\n          <option name=\"codename\" value=\"dm3q\" />\n          <option name=\"id\" value=\"dm3q\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Samsung\" />\n          <option name=\"name\" value=\"Galaxy S23 Ultra\" />\n          <option name=\"screenDensity\" value=\"600\" />\n          <option name=\"screenX\" value=\"1440\" />\n          <option name=\"screenY\" value=\"3088\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"samsung\" />\n          <option name=\"codename\" value=\"e1q\" />\n          <option name=\"default\" value=\"true\" />\n          <option name=\"id\" value=\"e1q\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Samsung\" />\n          <option name=\"name\" value=\"Galaxy S24\" />\n          <option name=\"screenDensity\" value=\"480\" />\n          <option name=\"screenX\" value=\"1080\" />\n          <option name=\"screenY\" value=\"2340\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"samsung\" />\n          <option name=\"codename\" value=\"e3q\" />\n          <option name=\"id\" value=\"e3q\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Samsung\" />\n          <option name=\"name\" value=\"Galaxy S24 Ultra\" />\n          <option name=\"screenDensity\" value=\"450\" />\n          <option name=\"screenX\" value=\"1440\" />\n          <option name=\"screenY\" value=\"3120\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"33\" />\n          <option name=\"brand\" value=\"google\" />\n          <option name=\"codename\" value=\"eos\" />\n          <option name=\"id\" value=\"eos\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Google\" />\n          <option name=\"name\" value=\"Eos\" />\n          <option name=\"screenDensity\" value=\"320\" />\n          <option name=\"screenX\" value=\"384\" />\n          <option name=\"screenY\" value=\"384\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"33\" />\n          <option name=\"brand\" value=\"google\" />\n          <option name=\"codename\" value=\"felix\" />\n          <option name=\"id\" value=\"felix\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Google\" />\n          <option name=\"name\" value=\"Pixel Fold\" />\n          <option name=\"screenDensity\" value=\"420\" />\n          <option name=\"screenX\" value=\"2208\" />\n          <option name=\"screenY\" value=\"1840\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"google\" />\n          <option name=\"codename\" value=\"felix\" />\n          <option name=\"id\" value=\"felix\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Google\" />\n          <option name=\"name\" value=\"Pixel Fold\" />\n          <option name=\"screenDensity\" value=\"420\" />\n          <option name=\"screenX\" value=\"2208\" />\n          <option name=\"screenY\" value=\"1840\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"33\" />\n          <option name=\"brand\" value=\"google\" />\n          <option name=\"codename\" value=\"felix_camera\" />\n          <option name=\"id\" value=\"felix_camera\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Google\" />\n          <option name=\"name\" value=\"Pixel Fold (Camera-enabled)\" />\n          <option name=\"screenDensity\" value=\"420\" />\n          <option name=\"screenX\" value=\"2208\" />\n          <option name=\"screenY\" value=\"1840\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"motorola\" />\n          <option name=\"codename\" value=\"fogona\" />\n          <option name=\"id\" value=\"fogona\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Motorola\" />\n          <option name=\"name\" value=\"moto g play - 2024\" />\n          <option name=\"screenDensity\" value=\"280\" />\n          <option name=\"screenX\" value=\"720\" />\n          <option name=\"screenY\" value=\"1600\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"samsung\" />\n          <option name=\"codename\" value=\"g0q\" />\n          <option name=\"id\" value=\"g0q\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Samsung\" />\n          <option name=\"name\" value=\"SM-S906U1\" />\n          <option name=\"screenDensity\" value=\"450\" />\n          <option name=\"screenX\" value=\"1080\" />\n          <option name=\"screenY\" value=\"2340\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"samsung\" />\n          <option name=\"codename\" value=\"gta9pwifi\" />\n          <option name=\"id\" value=\"gta9pwifi\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Samsung\" />\n          <option name=\"name\" value=\"SM-X210\" />\n          <option name=\"screenDensity\" value=\"240\" />\n          <option name=\"screenX\" value=\"1200\" />\n          <option name=\"screenY\" value=\"1920\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"samsung\" />\n          <option name=\"codename\" value=\"gts7xllite\" />\n          <option name=\"id\" value=\"gts7xllite\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Samsung\" />\n          <option name=\"name\" value=\"SM-T738U\" />\n          <option name=\"screenDensity\" value=\"340\" />\n          <option name=\"screenX\" value=\"1600\" />\n          <option name=\"screenY\" value=\"2560\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"33\" />\n          <option name=\"brand\" value=\"samsung\" />\n          <option name=\"codename\" value=\"gts8uwifi\" />\n          <option name=\"formFactor\" value=\"Tablet\" />\n          <option name=\"id\" value=\"gts8uwifi\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Samsung\" />\n          <option name=\"name\" value=\"Galaxy Tab S8 Ultra\" />\n          <option name=\"screenDensity\" value=\"320\" />\n          <option name=\"screenX\" value=\"1848\" />\n          <option name=\"screenY\" value=\"2960\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"samsung\" />\n          <option name=\"codename\" value=\"gts8wifi\" />\n          <option name=\"formFactor\" value=\"Tablet\" />\n          <option name=\"id\" value=\"gts8wifi\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Samsung\" />\n          <option name=\"name\" value=\"Galaxy Tab S8\" />\n          <option name=\"screenDensity\" value=\"274\" />\n          <option name=\"screenX\" value=\"1600\" />\n          <option name=\"screenY\" value=\"2560\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"samsung\" />\n          <option name=\"codename\" value=\"gts9fe\" />\n          <option name=\"id\" value=\"gts9fe\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Samsung\" />\n          <option name=\"name\" value=\"Galaxy Tab S9 FE 5G\" />\n          <option name=\"screenDensity\" value=\"280\" />\n          <option name=\"screenX\" value=\"1440\" />\n          <option name=\"screenY\" value=\"2304\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"google\" />\n          <option name=\"codename\" value=\"husky\" />\n          <option name=\"id\" value=\"husky\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Google\" />\n          <option name=\"name\" value=\"Pixel 8 Pro\" />\n          <option name=\"screenDensity\" value=\"390\" />\n          <option name=\"screenX\" value=\"1008\" />\n          <option name=\"screenY\" value=\"2244\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"30\" />\n          <option name=\"brand\" value=\"motorola\" />\n          <option name=\"codename\" value=\"java\" />\n          <option name=\"id\" value=\"java\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Motorola\" />\n          <option name=\"name\" value=\"G20\" />\n          <option name=\"screenDensity\" value=\"280\" />\n          <option name=\"screenX\" value=\"720\" />\n          <option name=\"screenY\" value=\"1600\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"google\" />\n          <option name=\"codename\" value=\"komodo\" />\n          <option name=\"id\" value=\"komodo\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Google\" />\n          <option name=\"name\" value=\"Pixel 9 Pro XL\" />\n          <option name=\"screenDensity\" value=\"360\" />\n          <option name=\"screenX\" value=\"1008\" />\n          <option name=\"screenY\" value=\"2244\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"35\" />\n          <option name=\"brand\" value=\"google\" />\n          <option name=\"codename\" value=\"komodo\" />\n          <option name=\"id\" value=\"komodo\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Google\" />\n          <option name=\"name\" value=\"Pixel 9 Pro XL\" />\n          <option name=\"screenDensity\" value=\"360\" />\n          <option name=\"screenX\" value=\"1008\" />\n          <option name=\"screenY\" value=\"2244\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"33\" />\n          <option name=\"brand\" value=\"google\" />\n          <option name=\"codename\" value=\"lynx\" />\n          <option name=\"id\" value=\"lynx\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Google\" />\n          <option name=\"name\" value=\"Pixel 7a\" />\n          <option name=\"screenDensity\" value=\"420\" />\n          <option name=\"screenX\" value=\"1080\" />\n          <option name=\"screenY\" value=\"2400\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"33\" />\n          <option name=\"brand\" value=\"motorola\" />\n          <option name=\"codename\" value=\"maui\" />\n          <option name=\"id\" value=\"maui\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Motorola\" />\n          <option name=\"name\" value=\"moto g play - 2023\" />\n          <option name=\"screenDensity\" value=\"280\" />\n          <option name=\"screenX\" value=\"720\" />\n          <option name=\"screenY\" value=\"1600\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"samsung\" />\n          <option name=\"codename\" value=\"o1q\" />\n          <option name=\"id\" value=\"o1q\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Samsung\" />\n          <option name=\"name\" value=\"Galaxy S21\" />\n          <option name=\"screenDensity\" value=\"421\" />\n          <option name=\"screenX\" value=\"1080\" />\n          <option name=\"screenY\" value=\"2400\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"31\" />\n          <option name=\"brand\" value=\"google\" />\n          <option name=\"codename\" value=\"oriole\" />\n          <option name=\"id\" value=\"oriole\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Google\" />\n          <option name=\"name\" value=\"Pixel 6\" />\n          <option name=\"screenDensity\" value=\"420\" />\n          <option name=\"screenX\" value=\"1080\" />\n          <option name=\"screenY\" value=\"2400\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"33\" />\n          <option name=\"brand\" value=\"google\" />\n          <option name=\"codename\" value=\"panther\" />\n          <option name=\"id\" value=\"panther\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Google\" />\n          <option name=\"name\" value=\"Pixel 7\" />\n          <option name=\"screenDensity\" value=\"420\" />\n          <option name=\"screenX\" value=\"1080\" />\n          <option name=\"screenY\" value=\"2400\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"samsung\" />\n          <option name=\"codename\" value=\"q5q\" />\n          <option name=\"id\" value=\"q5q\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Samsung\" />\n          <option name=\"name\" value=\"Galaxy Z Fold5\" />\n          <option name=\"screenDensity\" value=\"420\" />\n          <option name=\"screenX\" value=\"1812\" />\n          <option name=\"screenY\" value=\"2176\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"samsung\" />\n          <option name=\"codename\" value=\"q6q\" />\n          <option name=\"id\" value=\"q6q\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Samsung\" />\n          <option name=\"name\" value=\"Galaxy Z Fold6\" />\n          <option name=\"screenDensity\" value=\"420\" />\n          <option name=\"screenX\" value=\"1856\" />\n          <option name=\"screenY\" value=\"2160\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"30\" />\n          <option name=\"brand\" value=\"google\" />\n          <option name=\"codename\" value=\"r11\" />\n          <option name=\"formFactor\" value=\"Wear OS\" />\n          <option name=\"id\" value=\"r11\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Google\" />\n          <option name=\"name\" value=\"Pixel Watch\" />\n          <option name=\"screenDensity\" value=\"320\" />\n          <option name=\"screenX\" value=\"384\" />\n          <option name=\"screenY\" value=\"384\" />\n          <option name=\"type\" value=\"WEAR_OS\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"samsung\" />\n          <option name=\"codename\" value=\"r11q\" />\n          <option name=\"id\" value=\"r11q\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Samsung\" />\n          <option name=\"name\" value=\"SM-S711U\" />\n          <option name=\"screenDensity\" value=\"450\" />\n          <option name=\"screenX\" value=\"1080\" />\n          <option name=\"screenY\" value=\"2340\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"30\" />\n          <option name=\"brand\" value=\"google\" />\n          <option name=\"codename\" value=\"redfin\" />\n          <option name=\"id\" value=\"redfin\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Google\" />\n          <option name=\"name\" value=\"Pixel 5\" />\n          <option name=\"screenDensity\" value=\"440\" />\n          <option name=\"screenX\" value=\"1080\" />\n          <option name=\"screenY\" value=\"2340\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"google\" />\n          <option name=\"codename\" value=\"shiba\" />\n          <option name=\"id\" value=\"shiba\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Google\" />\n          <option name=\"name\" value=\"Pixel 8\" />\n          <option name=\"screenDensity\" value=\"420\" />\n          <option name=\"screenX\" value=\"1080\" />\n          <option name=\"screenY\" value=\"2400\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"samsung\" />\n          <option name=\"codename\" value=\"t2q\" />\n          <option name=\"id\" value=\"t2q\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Samsung\" />\n          <option name=\"name\" value=\"Galaxy S21 Plus\" />\n          <option name=\"screenDensity\" value=\"394\" />\n          <option name=\"screenX\" value=\"1080\" />\n          <option name=\"screenY\" value=\"2400\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"33\" />\n          <option name=\"brand\" value=\"google\" />\n          <option name=\"codename\" value=\"tangorpro\" />\n          <option name=\"formFactor\" value=\"Tablet\" />\n          <option name=\"id\" value=\"tangorpro\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Google\" />\n          <option name=\"name\" value=\"Pixel Tablet\" />\n          <option name=\"screenDensity\" value=\"320\" />\n          <option name=\"screenX\" value=\"1600\" />\n          <option name=\"screenY\" value=\"2560\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"google\" />\n          <option name=\"codename\" value=\"tokay\" />\n          <option name=\"default\" value=\"true\" />\n          <option name=\"id\" value=\"tokay\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Google\" />\n          <option name=\"name\" value=\"Pixel 9\" />\n          <option name=\"screenDensity\" value=\"420\" />\n          <option name=\"screenX\" value=\"1080\" />\n          <option name=\"screenY\" value=\"2424\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"35\" />\n          <option name=\"brand\" value=\"google\" />\n          <option name=\"codename\" value=\"tokay\" />\n          <option name=\"default\" value=\"true\" />\n          <option name=\"id\" value=\"tokay\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Google\" />\n          <option name=\"name\" value=\"Pixel 9\" />\n          <option name=\"screenDensity\" value=\"420\" />\n          <option name=\"screenX\" value=\"1080\" />\n          <option name=\"screenY\" value=\"2424\" />\n        </PersistentDeviceSelectionData>\n      </list>\n    </option>\n  </component>\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/caches/deviceStreaming.xml b/.idea/caches/deviceStreaming.xml
--- a/.idea/caches/deviceStreaming.xml	(revision 0a712f615a29b95b357fcc49e300042fa4b4dc7e)
+++ b/.idea/caches/deviceStreaming.xml	(date 1748361128335)
@@ -18,6 +18,18 @@
         <PersistentDeviceSelectionData>
           <option name="api" value="34" />
           <option name="brand" value="OnePlus" />
+          <option name="codename" value="OP535DL1" />
+          <option name="id" value="OP535DL1" />
+          <option name="labId" value="google" />
+          <option name="manufacturer" value="OnePlus" />
+          <option name="name" value="CPH2409" />
+          <option name="screenDensity" value="401" />
+          <option name="screenX" value="1080" />
+          <option name="screenY" value="2412" />
+        </PersistentDeviceSelectionData>
+        <PersistentDeviceSelectionData>
+          <option name="api" value="34" />
+          <option name="brand" value="OnePlus" />
           <option name="codename" value="OP5552L1" />
           <option name="id" value="OP5552L1" />
           <option name="labId" value="google" />
@@ -197,6 +209,19 @@
           <option name="screenY" value="2152" />
         </PersistentDeviceSelectionData>
         <PersistentDeviceSelectionData>
+          <option name="api" value="35" />
+          <option name="brand" value="google" />
+          <option name="codename" value="comet" />
+          <option name="default" value="true" />
+          <option name="id" value="comet" />
+          <option name="labId" value="google" />
+          <option name="manufacturer" value="Google" />
+          <option name="name" value="Pixel 9 Pro Fold" />
+          <option name="screenDensity" value="390" />
+          <option name="screenX" value="2076" />
+          <option name="screenY" value="2152" />
+        </PersistentDeviceSelectionData>
+        <PersistentDeviceSelectionData>
           <option name="api" value="29" />
           <option name="brand" value="samsung" />
           <option name="codename" value="crownqlteue" />
@@ -597,6 +622,18 @@
           <option name="screenDensity" value="320" />
           <option name="screenX" value="1600" />
           <option name="screenY" value="2560" />
+        </PersistentDeviceSelectionData>
+        <PersistentDeviceSelectionData>
+          <option name="api" value="35" />
+          <option name="brand" value="google" />
+          <option name="codename" value="tegu" />
+          <option name="id" value="tegu" />
+          <option name="labId" value="google" />
+          <option name="manufacturer" value="Google" />
+          <option name="name" value="Pixel 9a" />
+          <option name="screenDensity" value="420" />
+          <option name="screenX" value="1080" />
+          <option name="screenY" value="2424" />
         </PersistentDeviceSelectionData>
         <PersistentDeviceSelectionData>
           <option name="api" value="34" />
@@ -623,6 +660,18 @@
           <option name="screenDensity" value="420" />
           <option name="screenX" value="1080" />
           <option name="screenY" value="2424" />
+        </PersistentDeviceSelectionData>
+        <PersistentDeviceSelectionData>
+          <option name="api" value="34" />
+          <option name="brand" value="samsung" />
+          <option name="codename" value="xcover7" />
+          <option name="id" value="xcover7" />
+          <option name="labId" value="google" />
+          <option name="manufacturer" value="Samsung" />
+          <option name="name" value="SM-G556B" />
+          <option name="screenDensity" value="450" />
+          <option name="screenX" value="1080" />
+          <option name="screenY" value="2408" />
         </PersistentDeviceSelectionData>
       </list>
     </option>
Index: ../flexi_cart/coverage/lcov.info
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>SF:lib/src/cart_item.dart\nDA:24,13\nDA:87,6\nDA:90,3\nDA:91,9\nDA:95,8\nDA:98,3\nDA:99,9\nDA:103,3\nDA:104,9\nDA:105,9\nDA:113,5\nDA:116,5\nLF:12\nLH:12\nend_of_record\nSF:lib/src/cart.dart\nDA:22,13\nDA:29,13\nDA:30,13\nDA:36,12\nDA:81,16\nDA:84,16\nDA:87,8\nDA:90,8\nDA:93,4\nDA:96,2\nDA:97,8\nDA:100,6\nDA:103,6\nDA:106,2\nDA:107,2\nDA:108,6\nDA:109,2\nDA:110,4\nDA:113,0\nDA:117,4\nDA:122,4\nDA:124,8\nDA:125,8\nDA:126,4\nDA:130,6\nDA:133,2\nDA:134,2\nDA:136,4\nDA:137,4\nDA:138,4\nDA:139,2\nDA:144,2\nDA:145,2\nDA:146,2\nDA:147,2\nDA:148,2\nDA:149,0\nDA:153,2\nDA:154,2\nDA:155,2\nDA:156,2\nDA:157,2\nDA:158,0\nDA:162,11\nDA:163,11\nDA:164,2\nDA:165,4\nDA:171,13\nDA:172,39\nDA:176,2\nDA:177,2\nDA:178,4\nDA:182,11\nDA:183,13\nDA:185,2\nDA:186,0\nDA:187,0\nDA:193,4\nDA:194,6\nDA:195,2\nDA:200,13\nDA:201,13\nDA:203,3\nDA:204,6\nDA:210,4\nDA:211,6\nDA:212,2\nDA:217,4\nDA:218,4\nDA:219,4\nDA:220,8\nDA:221,3\nDA:225,0\nDA:227,0\nDA:228,0\nDA:229,0\nDA:233,4\nDA:237,4\nDA:238,4\nDA:239,8\nDA:240,3\nDA:244,0\nDA:246,0\nDA:248,0\nDA:249,0\nDA:253,4\nDA:254,17\nDA:257,4\nDA:258,17\nDA:261,6\nDA:264,9\nDA:267,9\nDA:272,11\nDA:277,11\nDA:279,11\nDA:280,11\nDA:281,11\nDA:282,11\nDA:283,22\nDA:286,11\nDA:294,4\nDA:300,4\nDA:301,3\nDA:302,6\nDA:303,3\nDA:304,3\nDA:306,3\nDA:307,3\nDA:308,3\nDA:311,3\nDA:315,1\nDA:319,1\nDA:320,1\nDA:321,4\nDA:322,2\nDA:323,3\nDA:325,1\nDA:326,1\nDA:327,1\nDA:330,1\nDA:334,5\nDA:335,5\nDA:336,4\nDA:337,3\nDA:338,3\nDA:339,3\nDA:340,6\nDA:343,3\nDA:347,3\nDA:348,3\nDA:349,2\nDA:350,2\nDA:351,4\nDA:354,4\nDA:355,4\nDA:356,2\nDA:357,2\nDA:361,8\nDA:362,8\nDA:365,14\nDA:366,14\nDA:367,7\nDA:368,7\nDA:369,7\nDA:370,7\nDA:371,14\nDA:372,7\nDA:373,14\nDA:374,7\nDA:375,7\nDA:377,7\nDA:378,7\nDA:380,0\nDA:386,3\nDA:387,3\nDA:388,1\nDA:390,2\nDA:391,5\nDA:392,1\nDA:393,1\nDA:396,1\nDA:397,1\nDA:401,0\nDA:404,0\nDA:405,0\nDA:408,3\nDA:409,16\nDA:412,9\nDA:415,3\nDA:416,3\nDA:418,3\nDA:419,6\nDA:420,6\nDA:422,6\nDA:423,6\nDA:424,6\nDA:425,9\nDA:426,6\nDA:427,6\nDA:431,2\nDA:432,2\nDA:433,4\nDA:434,10\nDA:436,4\nDA:437,4\nDA:438,6\nDA:439,4\nDA:440,4\nDA:444,3\nDA:448,3\nDA:449,2\nDA:450,4\nDA:451,2\nDA:453,2\nDA:454,2\nDA:456,6\nDA:457,4\nDA:460,2\nDA:461,6\nDA:462,8\nDA:466,2\nDA:467,4\nDA:471,2\nDA:472,2\nDA:476,3\nDA:479,3\nDA:480,2\nDA:481,2\nDA:483,4\nDA:485,6\nDA:486,4\nDA:489,2\nDA:490,6\nDA:491,8\nDA:495,2\nDA:496,6\nDA:500,2\nDA:502,2\nDA:503,2\nDA:507,4\nDA:509,4\nDA:510,4\nDA:511,4\nDA:512,6\nDA:513,4\nDA:517,11\nDA:518,33\nDA:519,15\nDA:521,11\nDA:522,4\nDA:526,11\nDA:527,11\nDA:528,11\nDA:529,11\nDA:533,11\nDA:534,11\nDA:535,2\nDA:536,2\nDA:537,6\nDA:539,22\nDA:544,11\nDA:545,22\nDA:546,11\nDA:547,22\nDA:548,11\nDA:549,11\nDA:552,44\nDA:556,5\nDA:557,15\nDA:558,5\nDA:559,5\nDA:560,5\nDA:564,5\nDA:565,15\nDA:567,3\nDA:568,15\nDA:578,0\nDA:585,0\nDA:593,0\nDA:607,4\nDA:615,0\nDA:617,0\nDA:620,2\nDA:623,6\nDA:625,8\nDA:628,0\nDA:629,0\nLF:267\nLH:243\nend_of_record\nSF:lib/src/mixins.dart\nDA:13,14\nDA:15,14\nDA:16,14\nDA:20,5\nDA:22,5\nDA:23,5\nDA:40,3\nDA:46,13\nDA:47,26\nDA:48,26\nDA:55,4\nDA:56,8\nLF:12\nLH:12\nend_of_record\nSF:lib/src/cart_diff.dart\nDA:11,1\nDA:27,7\nDA:46,1\nDA:50,1\nDA:51,1\nDA:52,1\nDA:54,2\nDA:55,2\nDA:57,1\nDA:58,1\nDA:59,1\nDA:61,2\nDA:62,2\nDA:65,2\nDA:66,2\nDA:69,2\nDA:70,1\nDA:71,1\nDA:72,1\nDA:73,1\nDA:77,1\nLF:21\nLH:21\nend_of_record\nSF:lib/src/cart_exception.dart\nDA:8,2\nDA:22,3\nLF:2\nLH:2\nend_of_record\nSF:lib/src/cart_input_formatter.dart\nDA:25,2\nDA:38,1\nDA:51,2\nDA:65,2\nDA:70,4\nDA:72,2\nDA:73,2\nDA:75,5\nDA:76,2\nDA:77,2\nDA:79,6\nDA:80,4\nDA:84,3\nDA:86,2\nDA:87,4\nDA:89,2\nDA:90,12\nDA:91,10\nDA:94,2\nDA:96,4\nDA:109,0\nDA:119,0\nDA:124,0\nDA:125,0\nDA:127,0\nDA:128,0\nDA:131,0\nDA:132,0\nDA:133,0\nDA:136,0\nDA:139,0\nDA:141,0\nDA:143,0\nDA:145,0\nLF:34\nLH:20\nend_of_record\nSF:lib/src/cart_input_widget.dart\nDA:83,1\nDA:155,1\nDA:156,1\nDA:165,4\nDA:167,1\nDA:169,1\nDA:170,2\nDA:171,2\nDA:172,4\nDA:175,3\nDA:176,1\nDA:180,1\nDA:182,1\nDA:185,7\nDA:186,2\nDA:187,1\nDA:192,1\nDA:193,4\nDA:197,1\nDA:198,4\nDA:202,1\nDA:204,9\nDA:206,1\nDA:207,2\nDA:208,1\nDA:210,1\nDA:211,3\nDA:214,2\nDA:215,7\nDA:216,0\nDA:217,0\nDA:224,3\nDA:227,2\nDA:230,3\nDA:233,1\nDA:234,4\nDA:235,3\nDA:236,2\nDA:240,1\nDA:241,3\nDA:244,2\nDA:245,0\nDA:250,1\nDA:251,2\nDA:252,1\nDA:253,0\nDA:254,1\nDA:255,1\nDA:259,1\nDA:260,2\nDA:261,1\nDA:262,4\nDA:263,1\nDA:264,1\nDA:268,1\nDA:269,1\nDA:270,4\nDA:274,1\nDA:275,6\nDA:276,6\nDA:278,2\nDA:283,1\nDA:284,1\nDA:285,1\nDA:286,1\nDA:290,1\nDA:292,1\nDA:293,3\nDA:295,2\nDA:296,1\nDA:303,1\nDA:304,1\nDA:308,1\nDA:310,4\nDA:311,1\nDA:312,4\nDA:313,1\nDA:314,2\nDA:315,1\nDA:316,2\nDA:317,4\nDA:318,1\nDA:319,2\nDA:320,2\nDA:321,1\nDA:322,2\nDA:323,2\nDA:326,1\nDA:327,1\nDA:328,3\nDA:329,2\nDA:330,2\nDA:331,2\nDA:332,2\nDA:338,1\nDA:339,2\nDA:340,1\nDA:341,1\nDA:342,3\nDA:343,1\nDA:344,1\nDA:345,2\nDA:349,3\nDA:350,2\nDA:351,1\nDA:352,1\nDA:353,3\nDA:354,1\nDA:355,1\nDA:356,2\nDA:363,1\nDA:364,1\nDA:365,0\nDA:366,0\nDA:367,0\nDA:369,0\nDA:371,0\nDA:372,0\nDA:373,0\nDA:375,0\nDA:378,2\nDA:379,1\nDA:380,3\nDA:382,1\nDA:384,2\nDA:385,1\nDA:386,3\nDA:388,1\nDA:394,1\nDA:397,1\nDA:399,1\nDA:400,1\nDA:401,3\nDA:402,1\nDA:403,2\nDA:404,1\nDA:406,2\nDA:411,1\nDA:412,1\nDA:415,1\nDA:416,1\nDA:426,1\nDA:428,2\nDA:429,2\nDA:430,1\nDA:436,3\nDA:443,1\nDA:444,2\nDA:448,1\nDA:449,2\nDA:453,1\nDA:455,1\nDA:457,1\nLF:153\nLH:141\nend_of_record\nSF:lib/src/cart_items_group.dart\nDA:12,11\nDA:16,11\nDA:28,4\nDA:36,11\nDA:38,33\nDA:40,3\nDA:45,3\nDA:46,9\nDA:50,0\nDA:51,0\nDA:57,2\nDA:58,2\nDA:59,2\nDA:60,2\nDA:61,4\nDA:66,1\nDA:67,5\nDA:70,1\nDA:71,5\nLF:19\nLH:17\nend_of_record\nSF:lib/src/cart_theme.dart\nDA:9,1\nDA:18,2\nDA:19,2\nDA:20,3\nDA:21,4\nDA:24,0\nDA:26,0\nDA:29,1\nDA:35,1\nDA:42,3\nDA:59,1\nDA:69,1\nDA:70,1\nDA:74,2\nDA:83,2\nDA:95,2\nDA:96,2\nDA:97,2\nDA:98,2\nDA:99,2\nDA:154,1\nDA:171,1\nDA:173,1\nDA:175,1\nDA:176,1\nDA:177,1\nDA:178,1\nDA:179,1\nDA:180,1\nDA:181,1\nDA:182,1\nDA:183,1\nDA:184,1\nDA:185,1\nDA:186,1\nLF:35\nLH:33\nend_of_record\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/coverage/lcov.info b/../flexi_cart/coverage/lcov.info
--- a/../flexi_cart/coverage/lcov.info	(revision 0a712f615a29b95b357fcc49e300042fa4b4dc7e)
+++ b/../flexi_cart/coverage/lcov.info	(date 1748186219907)
@@ -1,9 +1,9 @@
-SF:lib/src/cart_item.dart
-DA:24,13
-DA:87,6
-DA:90,3
-DA:91,9
-DA:95,8
+SF:lib/src/models/cart_item.dart
+DA:24,17
+DA:87,10
+DA:90,4
+DA:91,12
+DA:95,14
 DA:98,3
 DA:99,9
 DA:103,3
@@ -14,292 +14,366 @@
 LF:12
 LH:12
 end_of_record
+SF:lib/src/models/cart_plugin.dart
+DA:9,0
+DA:15,0
+DA:22,0
+LF:3
+LH:0
+end_of_record
+SF:lib/src/mixins/cart_stream_mixin.dart
+DA:16,3
+DA:22,17
+DA:23,34
+DA:24,34
+DA:31,4
+DA:32,8
+LF:6
+LH:6
+end_of_record
+SF:lib/src/mixins/cart_change_notifier_dispose_mixin.dart
+DA:13,16
+DA:15,16
+DA:16,16
+DA:21,17
+DA:22,17
+DA:24,3
+DA:25,3
+DA:30,5
+DA:32,5
+DA:33,5
+LF:10
+LH:10
+end_of_record
+SF:lib/src/mixins/cart_plugins_mixin.dart
+DA:9,45
+DA:12,0
+DA:15,2
+DA:16,4
+DA:21,0
+DA:22,0
+DA:27,0
+DA:28,0
+LF:8
+LH:3
+end_of_record
 SF:lib/src/cart.dart
-DA:22,13
-DA:29,13
-DA:30,13
-DA:36,12
-DA:81,16
-DA:84,16
-DA:87,8
-DA:90,8
-DA:93,4
-DA:96,2
-DA:97,8
-DA:100,6
-DA:103,6
-DA:106,2
-DA:107,2
-DA:108,6
-DA:109,2
-DA:110,4
-DA:113,0
-DA:117,4
-DA:122,4
-DA:124,8
-DA:125,8
-DA:126,4
-DA:130,6
-DA:133,2
-DA:134,2
-DA:136,4
-DA:137,4
-DA:138,4
-DA:139,2
-DA:144,2
-DA:145,2
-DA:146,2
-DA:147,2
-DA:148,2
-DA:149,0
-DA:153,2
-DA:154,2
-DA:155,2
-DA:156,2
-DA:157,2
+DA:28,17
+DA:39,15
+DA:40,17
+DA:41,17
+DA:42,34
+DA:44,17
+DA:46,0
+DA:47,0
+DA:58,2
+DA:107,22
+DA:110,28
+DA:113,8
+DA:116,8
+DA:119,2
+DA:120,8
+DA:123,6
+DA:126,1
+DA:127,2
+DA:128,1
+DA:132,0
+DA:133,0
+DA:137,0
+DA:138,0
+DA:142,0
+DA:143,0
+DA:147,0
+DA:148,0
+DA:151,0
+DA:152,0
+DA:153,0
+DA:154,0
+DA:155,0
+DA:156,0
 DA:158,0
-DA:162,11
-DA:163,11
-DA:164,2
-DA:165,4
-DA:171,13
-DA:172,39
+DA:164,1
+DA:165,3
+DA:169,0
+DA:172,4
+DA:175,2
 DA:176,2
 DA:177,2
-DA:178,4
-DA:182,11
-DA:183,13
-DA:185,2
-DA:186,0
-DA:187,0
-DA:193,4
-DA:194,6
-DA:195,2
-DA:200,13
-DA:201,13
-DA:203,3
-DA:204,6
-DA:210,4
-DA:211,6
-DA:212,2
-DA:217,4
-DA:218,4
-DA:219,4
-DA:220,8
-DA:221,3
-DA:225,0
-DA:227,0
-DA:228,0
-DA:229,0
-DA:233,4
-DA:237,4
-DA:238,4
-DA:239,8
-DA:240,3
-DA:244,0
-DA:246,0
-DA:248,0
-DA:249,0
+DA:178,6
+DA:180,6
+DA:185,16
+DA:186,16
+DA:187,2
+DA:188,4
+DA:194,16
+DA:195,32
+DA:196,32
+DA:197,16
+DA:198,6
+DA:203,15
+DA:204,17
+DA:206,2
+DA:207,0
+DA:208,0
+DA:214,4
+DA:215,6
+DA:216,2
+DA:221,17
+DA:222,17
+DA:223,3
+DA:224,6
+DA:230,4
+DA:231,6
+DA:232,2
+DA:237,6
+DA:238,6
+DA:239,6
+DA:240,6
+DA:242,6
+DA:248,4
+DA:252,4
 DA:253,4
-DA:254,17
-DA:257,4
-DA:258,17
-DA:261,6
-DA:264,9
-DA:267,9
-DA:272,11
-DA:277,11
-DA:279,11
-DA:280,11
-DA:281,11
-DA:282,11
-DA:283,22
-DA:286,11
-DA:294,4
+DA:254,4
+DA:256,4
+DA:262,6
+DA:263,27
+DA:266,5
+DA:267,22
+DA:270,6
+DA:273,15
+DA:276,15
+DA:281,15
+DA:286,15
+DA:287,15
+DA:288,15
+DA:290,30
 DA:300,4
-DA:301,3
-DA:302,6
-DA:303,3
-DA:304,3
-DA:306,3
+DA:306,4
 DA:307,3
-DA:308,3
-DA:311,3
-DA:315,1
-DA:319,1
-DA:320,1
-DA:321,4
-DA:322,2
-DA:323,3
+DA:308,6
+DA:309,3
+DA:312,3
+DA:315,4
+DA:321,1
 DA:325,1
 DA:326,1
-DA:327,1
+DA:327,4
+DA:328,2
+DA:329,2
 DA:330,1
-DA:334,5
-DA:335,5
-DA:336,4
-DA:337,3
-DA:338,3
-DA:339,3
-DA:340,6
+DA:334,1
+DA:340,5
+DA:341,5
+DA:342,3
 DA:343,3
-DA:347,3
-DA:348,3
-DA:349,2
-DA:350,2
-DA:351,4
+DA:345,10
+DA:351,3
+DA:352,3
+DA:353,2
 DA:354,4
 DA:355,4
-DA:356,2
-DA:357,2
-DA:361,8
-DA:362,8
-DA:365,14
-DA:366,14
-DA:367,7
-DA:368,7
+DA:357,6
+DA:363,8
+DA:364,8
+DA:367,14
+DA:368,14
 DA:369,7
 DA:370,7
-DA:371,14
+DA:371,7
 DA:372,7
-DA:373,14
+DA:373,7
 DA:374,7
 DA:375,7
+DA:376,7
 DA:377,7
-DA:378,7
-DA:380,0
-DA:386,3
-DA:387,3
-DA:388,1
-DA:390,2
-DA:391,5
+DA:379,7
+DA:381,7
+DA:384,0
+DA:390,3
+DA:391,3
 DA:392,1
-DA:393,1
-DA:396,1
-DA:397,1
-DA:401,0
-DA:404,0
+DA:394,1
+DA:395,1
+DA:396,2
+DA:397,5
+DA:399,1
 DA:405,0
-DA:408,3
-DA:409,16
-DA:412,9
-DA:415,3
-DA:416,3
-DA:418,3
-DA:419,6
-DA:420,6
-DA:422,6
+DA:408,0
+DA:409,0
+DA:412,3
+DA:413,16
+DA:416,9
+DA:419,3
+DA:420,3
+DA:422,3
 DA:423,6
 DA:424,6
-DA:425,9
 DA:426,6
 DA:427,6
-DA:431,2
-DA:432,2
-DA:433,4
-DA:434,10
-DA:436,4
+DA:428,6
+DA:429,6
+DA:430,6
+DA:431,6
+DA:435,2
+DA:436,2
 DA:437,4
-DA:438,6
-DA:439,4
+DA:438,10
 DA:440,4
-DA:444,3
+DA:441,4
+DA:442,4
+DA:443,4
+DA:444,4
 DA:448,3
-DA:449,2
-DA:450,4
-DA:451,2
+DA:452,3
 DA:453,2
-DA:454,2
-DA:456,6
-DA:457,4
+DA:454,4
+DA:457,2
+DA:459,2
 DA:460,2
-DA:461,6
-DA:462,8
+DA:462,6
+DA:463,4
 DA:466,2
-DA:467,4
-DA:471,2
-DA:472,2
-DA:476,3
+DA:467,6
+DA:468,8
+DA:472,6
+DA:473,3
 DA:479,3
-DA:480,2
-DA:481,2
-DA:483,4
-DA:485,6
-DA:486,4
-DA:489,2
+DA:482,3
+DA:483,2
+DA:484,2
+DA:488,4
 DA:490,6
-DA:491,8
-DA:495,2
-DA:496,6
+DA:491,4
+DA:494,2
+DA:495,6
+DA:496,8
 DA:500,2
-DA:502,2
-DA:503,2
 DA:507,4
 DA:509,4
 DA:510,4
 DA:511,4
 DA:512,6
 DA:513,4
-DA:517,11
-DA:518,33
-DA:519,15
-DA:521,11
-DA:522,4
-DA:526,11
-DA:527,11
-DA:528,11
-DA:529,11
-DA:533,11
-DA:534,11
-DA:535,2
-DA:536,2
-DA:537,6
-DA:539,22
-DA:544,11
-DA:545,22
-DA:546,11
-DA:547,22
-DA:548,11
-DA:549,11
-DA:552,44
-DA:556,5
-DA:557,15
-DA:558,5
-DA:559,5
-DA:560,5
-DA:564,5
-DA:565,15
-DA:567,3
-DA:568,15
-DA:578,0
-DA:585,0
-DA:593,0
-DA:607,4
-DA:615,0
-DA:617,0
-DA:620,2
-DA:623,6
-DA:625,8
-DA:628,0
-DA:629,0
-LF:267
-LH:243
+DA:514,4
+DA:518,15
+DA:519,30
+DA:522,15
+DA:523,9
+DA:527,45
+DA:528,19
+DA:530,15
+DA:531,4
+DA:535,15
+DA:536,15
+DA:539,15
+DA:540,9
+DA:541,3
+DA:542,9
+DA:543,3
+DA:545,15
+DA:546,15
+DA:547,15
+DA:551,15
+DA:552,15
+DA:553,2
+DA:554,2
+DA:555,6
+DA:557,30
+DA:562,15
+DA:563,30
+DA:564,15
+DA:565,30
+DA:566,15
+DA:567,15
+DA:570,60
+DA:574,5
+DA:575,15
+DA:576,5
+DA:577,5
+DA:578,5
+DA:579,5
+DA:583,5
+DA:584,15
+DA:586,3
+DA:587,6
+DA:588,9
+DA:594,16
+DA:599,16
+DA:600,16
+DA:602,16
+DA:603,16
+DA:604,16
+DA:607,13
+LF:246
+LH:222
 end_of_record
-SF:lib/src/mixins.dart
-DA:13,14
-DA:15,14
-DA:16,14
-DA:20,5
-DA:22,5
-DA:23,5
-DA:40,3
-DA:46,13
-DA:47,26
-DA:48,26
+SF:lib/src/mixins/cart_history_mixin.dart
+DA:7,9
+DA:10,0
+DA:13,17
+DA:14,51
+DA:18,7
+DA:19,14
+LF:6
+LH:5
+end_of_record
+SF:lib/src/mixins/cart_metadata_mixin.dart
+DA:9,15
+DA:13,3
+DA:17,3
+DA:20,6
+DA:21,3
+DA:22,9
+DA:27,0
+DA:32,5
+DA:37,10
+DA:38,10
+DA:41,5
+DA:47,6
+DA:50,2
+DA:51,4
+DA:54,4
 DA:55,4
-DA:56,8
-LF:12
-LH:12
+DA:58,2
+DA:64,5
+DA:70,5
+DA:75,2
+DA:76,2
+DA:79,2
+DA:81,2
+DA:85,7
+DA:86,14
+DA:87,6
+DA:88,3
+DA:91,0
+LF:28
+LH:26
+end_of_record
+SF:lib/src/mixins/cart_lock_mixin.dart
+DA:13,32
+DA:18,0
+DA:19,0
+DA:25,2
+DA:26,2
+DA:30,2
+DA:31,2
+DA:33,0
+DA:40,2
+DA:41,2
+DA:45,2
+DA:46,2
+DA:48,0
+DA:56,2
+DA:57,4
+DA:58,2
+DA:59,4
+DA:61,2
+DA:70,7
+DA:71,7
+DA:72,7
+DA:74,2
+LF:22
+LH:18
 end_of_record
 SF:lib/src/cart_diff.dart
 DA:11,1
@@ -338,37 +412,24 @@
 DA:51,2
 DA:65,2
 DA:70,4
-DA:72,2
-DA:73,2
-DA:75,5
-DA:76,2
-DA:77,2
-DA:79,6
-DA:80,4
-DA:84,3
+DA:74,2
+DA:75,2
+DA:77,5
+DA:78,2
+DA:79,2
+DA:81,6
+DA:82,4
 DA:86,2
-DA:87,4
-DA:89,2
-DA:90,12
-DA:91,10
-DA:94,2
-DA:96,4
-DA:109,0
-DA:119,0
-DA:124,0
-DA:125,0
-DA:127,0
-DA:128,0
-DA:131,0
-DA:132,0
-DA:133,0
-DA:136,0
-DA:139,0
-DA:141,0
-DA:143,0
-DA:145,0
-LF:34
-LH:20
+DA:87,1
+DA:90,2
+DA:91,4
+DA:95,2
+DA:96,12
+DA:97,10
+DA:100,2
+DA:102,4
+LF:21
+LH:21
 end_of_record
 SF:lib/src/cart_input_widget.dart
 DA:83,1
@@ -518,21 +579,23 @@
 DA:430,1
 DA:436,3
 DA:443,1
-DA:444,2
-DA:448,1
-DA:449,2
-DA:453,1
-DA:455,1
+DA:444,1
+DA:445,1
+DA:450,1
+DA:451,1
+DA:452,1
 DA:457,1
-LF:153
-LH:141
+DA:459,1
+DA:461,1
+LF:155
+LH:143
 end_of_record
 SF:lib/src/cart_items_group.dart
-DA:12,11
-DA:16,11
+DA:12,15
+DA:16,15
 DA:28,4
-DA:36,11
-DA:38,33
+DA:36,15
+DA:38,45
 DA:40,3
 DA:45,3
 DA:46,9
@@ -550,6 +613,126 @@
 LF:19
 LH:17
 end_of_record
+SF:lib/src/cart_options/recommendation_options.dart
+DA:7,21
+DA:15,0
+LF:2
+LH:1
+end_of_record
+SF:lib/src/cart_options/session_options.dart
+DA:6,21
+DA:18,0
+DA:19,0
+DA:22,0
+DA:26,0
+DA:30,0
+DA:31,0
+DA:32,0
+LF:8
+LH:1
+end_of_record
+SF:lib/src/cart_options/cart_options.dart
+DA:30,17
+DA:66,0
+DA:76,0
+DA:77,0
+DA:78,0
+DA:79,0
+DA:80,0
+DA:81,0
+DA:82,0
+DA:83,0
+DA:85,0
+LF:11
+LH:1
+end_of_record
+SF:lib/src/cart_options/validator_options.dart
+DA:12,22
+DA:32,0
+DA:35,0
+DA:38,0
+DA:39,0
+DA:43,0
+DA:44,0
+DA:48,0
+DA:49,0
+DA:53,0
+DA:54,0
+DA:58,1
+DA:59,1
+DA:61,2
+DA:62,1
+DA:63,1
+DA:64,1
+DA:68,2
+DA:69,3
+DA:70,1
+DA:71,1
+DA:79,0
+DA:84,0
+DA:85,0
+DA:86,0
+DA:87,0
+LF:26
+LH:11
+end_of_record
+SF:lib/src/cart_options/behavior_options.dart
+DA:7,24
+DA:27,3
+DA:28,3
+DA:29,6
+DA:34,15
+DA:35,21
+DA:43,3
+DA:44,6
+LF:8
+LH:8
+end_of_record
+SF:lib/src/cart_options/tax_options.dart
+DA:6,21
+DA:23,0
+LF:2
+LH:1
+end_of_record
+SF:lib/src/cart_options/discount_options.dart
+DA:6,23
+DA:23,1
+DA:24,2
+DA:26,2
+DA:30,0
+DA:35,0
+DA:36,0
+DA:37,0
+DA:38,0
+LF:9
+LH:4
+end_of_record
+SF:lib/src/cart_options/shipping_options.dart
+DA:7,21
+DA:24,0
+LF:2
+LH:1
+end_of_record
+SF:lib/src/cart_options/price_options.dart
+DA:6,21
+DA:34,0
+DA:35,0
+DA:36,0
+DA:38,0
+DA:39,0
+DA:40,0
+DA:41,0
+DA:42,0
+DA:43,0
+DA:46,0
+DA:47,0
+DA:48,0
+DA:50,0
+DA:51,0
+DA:53,0
+LF:16
+LH:1
+end_of_record
 SF:lib/src/cart_theme.dart
 DA:9,1
 DA:18,2
@@ -559,23 +742,21 @@
 DA:24,0
 DA:26,0
 DA:29,1
-DA:35,1
-DA:42,3
-DA:59,1
-DA:69,1
-DA:70,1
-DA:74,2
-DA:83,2
-DA:95,2
-DA:96,2
+DA:37,1
+DA:44,3
+DA:61,1
+DA:71,1
+DA:72,1
+DA:76,2
+DA:85,2
 DA:97,2
 DA:98,2
 DA:99,2
-DA:154,1
-DA:171,1
+DA:100,2
+DA:101,2
+DA:156,1
 DA:173,1
 DA:175,1
-DA:176,1
 DA:177,1
 DA:178,1
 DA:179,1
@@ -586,6 +767,114 @@
 DA:184,1
 DA:185,1
 DA:186,1
+DA:187,1
+DA:188,1
 LF:35
 LH:33
 end_of_record
+SF:lib/src/cart_validators/i_cart_validator.dart
+DA:6,1
+DA:22,0
+LF:2
+LH:1
+end_of_record
+SF:lib/src/cart_validators/cart_max_length_validator.dart
+DA:6,0
+DA:12,0
+DA:14,0
+DA:15,0
+DA:17,0
+LF:5
+LH:0
+end_of_record
+SF:lib/src/cart_validators/cart_min_total_validator.dart
+DA:6,1
+DA:11,1
+DA:13,3
+DA:14,1
+DA:16,3
+LF:5
+LH:5
+end_of_record
+SF:lib/src/cart_validators/cart_not_empty_validator.dart
+DA:5,1
+DA:7,2
+DA:8,1
+LF:3
+LH:3
+end_of_record
+SF:lib/src/cart_validators/cart_max_item_count_validator.dart
+DA:6,1
+DA:12,1
+DA:14,3
+DA:15,1
+DA:16,2
+LF:5
+LH:5
+end_of_record
+SF:lib/src/cart_validators/cart_min_length_validator.dart
+DA:6,0
+DA:11,0
+DA:13,0
+DA:14,0
+DA:16,0
+LF:5
+LH:0
+end_of_record
+SF:lib/src/cart_validators/cart_validators.dart
+DA:33,1
+DA:34,1
+DA:40,2
+DA:47,1
+DA:48,1
+DA:55,1
+DA:56,1
+DA:63,0
+DA:64,0
+DA:71,0
+DA:72,0
+DA:79,0
+DA:80,0
+LF:13
+LH:7
+end_of_record
+SF:lib/src/cart_validators/cart_required_field_validator.dart
+DA:6,1
+DA:11,1
+DA:13,3
+DA:14,3
+DA:15,0
+DA:16,0
+LF:6
+LH:4
+end_of_record
+SF:lib/src/cart_validators/cart_contains_validator.dart
+DA:6,0
+DA:11,0
+DA:14,0
+DA:16,0
+DA:17,0
+LF:5
+LH:0
+end_of_record
+SF:lib/src/models/cart_currency.dart
+DA:12,4
+DA:20,0
+DA:22,0
+DA:25,2
+DA:30,6
+DA:34,8
+DA:37,0
+DA:38,0
+LF:8
+LH:4
+end_of_record
+SF:lib/src/models/cart_hooks.dart
+DA:7,0
+LF:1
+LH:0
+end_of_record
+SF:lib/src/cart_validators/cart_validator_message.dart
+LF:0
+LH:0
+end_of_record
Index: ../flexi_cart/test/flexi_cart_mixins_test.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import 'dart:async';\n\nimport 'package:flexi_cart/flexi_cart.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter_test/flutter_test.dart';\n\nimport 'flexi_cart_test.dart';\n\n/// A test notifier that uses the [CartChangeNotifierDisposeMixin].\nclass TestNotifier with ChangeNotifier, CartChangeNotifierDisposeMixin {\n  void trigger() {\n    notifyListeners();\n  }\n}\n\nvoid main() {\n  group('CartChangeNotifierDisposeMixin', () {\n    test('notifyListeners works before dispose', () {\n      final notifier = TestNotifier();\n      var called = false;\n\n      notifier\n        ..addListener(() {\n          called = true;\n        })\n        ..trigger();\n      expect(called, isTrue);\n    });\n\n    test('notifyListeners does not trigger after dispose', () {\n      final notifier = TestNotifier();\n      var called = false;\n\n      notifier\n        ..addListener(() {\n          called = true;\n        })\n        ..dispose()\n        ..trigger();\n      expect(called, isFalse);\n    });\n\n    test('disposed flag is set after dispose', () {\n      final notifier = TestNotifier();\n      expect(notifier.disposed, isFalse);\n\n      notifier.dispose();\n      expect(notifier.disposed, isTrue);\n    });\n  });\n  test('emit is called when adding/removing items (via stream)', () async {\n    final cart = FlexiCart<MockItem>();\n    final item = MockItem(id: '1', name: 'item-name', price: 10);\n\n    final completer = Completer<void>();\n\n    cart.stream.listen((event) {\n      completer.complete();\n    });\n\n    cart.add(item);\n    await completer.future; // ensures the stream emitted\n    expect(true, isTrue); // stream event received\n  });\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/test/flexi_cart_mixins_test.dart b/../flexi_cart/test/flexi_cart_mixins_test.dart
--- a/../flexi_cart/test/flexi_cart_mixins_test.dart	(revision 0a712f615a29b95b357fcc49e300042fa4b4dc7e)
+++ b/../flexi_cart/test/flexi_cart_mixins_test.dart	(date 1748183409956)
@@ -1,6 +1,7 @@
 import 'dart:async';
 
 import 'package:flexi_cart/flexi_cart.dart';
+import 'package:flexi_cart/src/mixins/cart_change_notifier_dispose_mixin.dart';
 import 'package:flutter/foundation.dart';
 import 'package:flutter_test/flutter_test.dart';
 
Index: ../flexi_cart/.idea/caches/deviceStreaming.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project version=\"4\">\n  <component name=\"DeviceStreaming\">\n    <option name=\"deviceSelectionList\">\n      <list>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"27\" />\n          <option name=\"brand\" value=\"DOCOMO\" />\n          <option name=\"codename\" value=\"F01L\" />\n          <option name=\"id\" value=\"F01L\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"FUJITSU\" />\n          <option name=\"name\" value=\"F-01L\" />\n          <option name=\"screenDensity\" value=\"360\" />\n          <option name=\"screenX\" value=\"720\" />\n          <option name=\"screenY\" value=\"1280\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"OnePlus\" />\n          <option name=\"codename\" value=\"OP5552L1\" />\n          <option name=\"id\" value=\"OP5552L1\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"OnePlus\" />\n          <option name=\"name\" value=\"CPH2415\" />\n          <option name=\"screenDensity\" value=\"480\" />\n          <option name=\"screenX\" value=\"1080\" />\n          <option name=\"screenY\" value=\"2412\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"OPPO\" />\n          <option name=\"codename\" value=\"OP573DL1\" />\n          <option name=\"id\" value=\"OP573DL1\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"OPPO\" />\n          <option name=\"name\" value=\"CPH2557\" />\n          <option name=\"screenDensity\" value=\"480\" />\n          <option name=\"screenX\" value=\"1080\" />\n          <option name=\"screenY\" value=\"2400\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"28\" />\n          <option name=\"brand\" value=\"DOCOMO\" />\n          <option name=\"codename\" value=\"SH-01L\" />\n          <option name=\"id\" value=\"SH-01L\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"SHARP\" />\n          <option name=\"name\" value=\"AQUOS sense2 SH-01L\" />\n          <option name=\"screenDensity\" value=\"480\" />\n          <option name=\"screenX\" value=\"1080\" />\n          <option name=\"screenY\" value=\"2160\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"samsung\" />\n          <option name=\"codename\" value=\"a15\" />\n          <option name=\"id\" value=\"a15\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Samsung\" />\n          <option name=\"name\" value=\"A15\" />\n          <option name=\"screenDensity\" value=\"450\" />\n          <option name=\"screenX\" value=\"1080\" />\n          <option name=\"screenY\" value=\"2340\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"samsung\" />\n          <option name=\"codename\" value=\"a15x\" />\n          <option name=\"id\" value=\"a15x\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Samsung\" />\n          <option name=\"name\" value=\"A15 5G\" />\n          <option name=\"screenDensity\" value=\"450\" />\n          <option name=\"screenX\" value=\"1080\" />\n          <option name=\"screenY\" value=\"2340\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"samsung\" />\n          <option name=\"codename\" value=\"a16x\" />\n          <option name=\"id\" value=\"a16x\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Samsung\" />\n          <option name=\"name\" value=\"A16 5G\" />\n          <option name=\"screenDensity\" value=\"450\" />\n          <option name=\"screenX\" value=\"1080\" />\n          <option name=\"screenY\" value=\"2340\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"samsung\" />\n          <option name=\"codename\" value=\"a35x\" />\n          <option name=\"id\" value=\"a35x\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Samsung\" />\n          <option name=\"name\" value=\"A35\" />\n          <option name=\"screenDensity\" value=\"450\" />\n          <option name=\"screenX\" value=\"1080\" />\n          <option name=\"screenY\" value=\"2340\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"31\" />\n          <option name=\"brand\" value=\"samsung\" />\n          <option name=\"codename\" value=\"a51\" />\n          <option name=\"id\" value=\"a51\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Samsung\" />\n          <option name=\"name\" value=\"Galaxy A51\" />\n          <option name=\"screenDensity\" value=\"420\" />\n          <option name=\"screenX\" value=\"1080\" />\n          <option name=\"screenY\" value=\"2400\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"google\" />\n          <option name=\"codename\" value=\"akita\" />\n          <option name=\"id\" value=\"akita\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Google\" />\n          <option name=\"name\" value=\"Pixel 8a\" />\n          <option name=\"screenDensity\" value=\"420\" />\n          <option name=\"screenX\" value=\"1080\" />\n          <option name=\"screenY\" value=\"2400\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"motorola\" />\n          <option name=\"codename\" value=\"arcfox\" />\n          <option name=\"id\" value=\"arcfox\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Motorola\" />\n          <option name=\"name\" value=\"razr plus 2024\" />\n          <option name=\"screenDensity\" value=\"360\" />\n          <option name=\"screenX\" value=\"1080\" />\n          <option name=\"screenY\" value=\"1272\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"33\" />\n          <option name=\"brand\" value=\"motorola\" />\n          <option name=\"codename\" value=\"austin\" />\n          <option name=\"id\" value=\"austin\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Motorola\" />\n          <option name=\"name\" value=\"moto g 5G (2022)\" />\n          <option name=\"screenDensity\" value=\"280\" />\n          <option name=\"screenX\" value=\"720\" />\n          <option name=\"screenY\" value=\"1600\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"33\" />\n          <option name=\"brand\" value=\"samsung\" />\n          <option name=\"codename\" value=\"b0q\" />\n          <option name=\"id\" value=\"b0q\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Samsung\" />\n          <option name=\"name\" value=\"Galaxy S22 Ultra\" />\n          <option name=\"screenDensity\" value=\"600\" />\n          <option name=\"screenX\" value=\"1440\" />\n          <option name=\"screenY\" value=\"3088\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"32\" />\n          <option name=\"brand\" value=\"google\" />\n          <option name=\"codename\" value=\"bluejay\" />\n          <option name=\"id\" value=\"bluejay\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Google\" />\n          <option name=\"name\" value=\"Pixel 6a\" />\n          <option name=\"screenDensity\" value=\"420\" />\n          <option name=\"screenX\" value=\"1080\" />\n          <option name=\"screenY\" value=\"2400\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"google\" />\n          <option name=\"codename\" value=\"caiman\" />\n          <option name=\"id\" value=\"caiman\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Google\" />\n          <option name=\"name\" value=\"Pixel 9 Pro\" />\n          <option name=\"screenDensity\" value=\"360\" />\n          <option name=\"screenX\" value=\"960\" />\n          <option name=\"screenY\" value=\"2142\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"google\" />\n          <option name=\"codename\" value=\"comet\" />\n          <option name=\"default\" value=\"true\" />\n          <option name=\"id\" value=\"comet\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Google\" />\n          <option name=\"name\" value=\"Pixel 9 Pro Fold\" />\n          <option name=\"screenDensity\" value=\"390\" />\n          <option name=\"screenX\" value=\"2076\" />\n          <option name=\"screenY\" value=\"2152\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"29\" />\n          <option name=\"brand\" value=\"samsung\" />\n          <option name=\"codename\" value=\"crownqlteue\" />\n          <option name=\"id\" value=\"crownqlteue\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Samsung\" />\n          <option name=\"name\" value=\"Galaxy Note9\" />\n          <option name=\"screenDensity\" value=\"420\" />\n          <option name=\"screenX\" value=\"2220\" />\n          <option name=\"screenY\" value=\"1080\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"samsung\" />\n          <option name=\"codename\" value=\"dm2q\" />\n          <option name=\"id\" value=\"dm2q\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Samsung\" />\n          <option name=\"name\" value=\"S23 Plus\" />\n          <option name=\"screenDensity\" value=\"450\" />\n          <option name=\"screenX\" value=\"1080\" />\n          <option name=\"screenY\" value=\"2340\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"samsung\" />\n          <option name=\"codename\" value=\"dm3q\" />\n          <option name=\"id\" value=\"dm3q\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Samsung\" />\n          <option name=\"name\" value=\"Galaxy S23 Ultra\" />\n          <option name=\"screenDensity\" value=\"600\" />\n          <option name=\"screenX\" value=\"1440\" />\n          <option name=\"screenY\" value=\"3088\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"samsung\" />\n          <option name=\"codename\" value=\"e1q\" />\n          <option name=\"default\" value=\"true\" />\n          <option name=\"id\" value=\"e1q\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Samsung\" />\n          <option name=\"name\" value=\"Galaxy S24\" />\n          <option name=\"screenDensity\" value=\"480\" />\n          <option name=\"screenX\" value=\"1080\" />\n          <option name=\"screenY\" value=\"2340\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"samsung\" />\n          <option name=\"codename\" value=\"e3q\" />\n          <option name=\"id\" value=\"e3q\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Samsung\" />\n          <option name=\"name\" value=\"Galaxy S24 Ultra\" />\n          <option name=\"screenDensity\" value=\"450\" />\n          <option name=\"screenX\" value=\"1440\" />\n          <option name=\"screenY\" value=\"3120\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"33\" />\n          <option name=\"brand\" value=\"google\" />\n          <option name=\"codename\" value=\"eos\" />\n          <option name=\"id\" value=\"eos\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Google\" />\n          <option name=\"name\" value=\"Eos\" />\n          <option name=\"screenDensity\" value=\"320\" />\n          <option name=\"screenX\" value=\"384\" />\n          <option name=\"screenY\" value=\"384\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"33\" />\n          <option name=\"brand\" value=\"google\" />\n          <option name=\"codename\" value=\"felix\" />\n          <option name=\"id\" value=\"felix\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Google\" />\n          <option name=\"name\" value=\"Pixel Fold\" />\n          <option name=\"screenDensity\" value=\"420\" />\n          <option name=\"screenX\" value=\"2208\" />\n          <option name=\"screenY\" value=\"1840\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"google\" />\n          <option name=\"codename\" value=\"felix\" />\n          <option name=\"id\" value=\"felix\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Google\" />\n          <option name=\"name\" value=\"Pixel Fold\" />\n          <option name=\"screenDensity\" value=\"420\" />\n          <option name=\"screenX\" value=\"2208\" />\n          <option name=\"screenY\" value=\"1840\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"33\" />\n          <option name=\"brand\" value=\"google\" />\n          <option name=\"codename\" value=\"felix_camera\" />\n          <option name=\"id\" value=\"felix_camera\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Google\" />\n          <option name=\"name\" value=\"Pixel Fold (Camera-enabled)\" />\n          <option name=\"screenDensity\" value=\"420\" />\n          <option name=\"screenX\" value=\"2208\" />\n          <option name=\"screenY\" value=\"1840\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"motorola\" />\n          <option name=\"codename\" value=\"fogona\" />\n          <option name=\"id\" value=\"fogona\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Motorola\" />\n          <option name=\"name\" value=\"moto g play - 2024\" />\n          <option name=\"screenDensity\" value=\"280\" />\n          <option name=\"screenX\" value=\"720\" />\n          <option name=\"screenY\" value=\"1600\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"samsung\" />\n          <option name=\"codename\" value=\"g0q\" />\n          <option name=\"id\" value=\"g0q\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Samsung\" />\n          <option name=\"name\" value=\"SM-S906U1\" />\n          <option name=\"screenDensity\" value=\"450\" />\n          <option name=\"screenX\" value=\"1080\" />\n          <option name=\"screenY\" value=\"2340\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"samsung\" />\n          <option name=\"codename\" value=\"gta9pwifi\" />\n          <option name=\"id\" value=\"gta9pwifi\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Samsung\" />\n          <option name=\"name\" value=\"SM-X210\" />\n          <option name=\"screenDensity\" value=\"240\" />\n          <option name=\"screenX\" value=\"1200\" />\n          <option name=\"screenY\" value=\"1920\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"samsung\" />\n          <option name=\"codename\" value=\"gts7xllite\" />\n          <option name=\"id\" value=\"gts7xllite\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Samsung\" />\n          <option name=\"name\" value=\"SM-T738U\" />\n          <option name=\"screenDensity\" value=\"340\" />\n          <option name=\"screenX\" value=\"1600\" />\n          <option name=\"screenY\" value=\"2560\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"33\" />\n          <option name=\"brand\" value=\"samsung\" />\n          <option name=\"codename\" value=\"gts8uwifi\" />\n          <option name=\"formFactor\" value=\"Tablet\" />\n          <option name=\"id\" value=\"gts8uwifi\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Samsung\" />\n          <option name=\"name\" value=\"Galaxy Tab S8 Ultra\" />\n          <option name=\"screenDensity\" value=\"320\" />\n          <option name=\"screenX\" value=\"1848\" />\n          <option name=\"screenY\" value=\"2960\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"samsung\" />\n          <option name=\"codename\" value=\"gts8wifi\" />\n          <option name=\"formFactor\" value=\"Tablet\" />\n          <option name=\"id\" value=\"gts8wifi\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Samsung\" />\n          <option name=\"name\" value=\"Galaxy Tab S8\" />\n          <option name=\"screenDensity\" value=\"274\" />\n          <option name=\"screenX\" value=\"1600\" />\n          <option name=\"screenY\" value=\"2560\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"samsung\" />\n          <option name=\"codename\" value=\"gts9fe\" />\n          <option name=\"id\" value=\"gts9fe\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Samsung\" />\n          <option name=\"name\" value=\"Galaxy Tab S9 FE 5G\" />\n          <option name=\"screenDensity\" value=\"280\" />\n          <option name=\"screenX\" value=\"1440\" />\n          <option name=\"screenY\" value=\"2304\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"google\" />\n          <option name=\"codename\" value=\"husky\" />\n          <option name=\"id\" value=\"husky\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Google\" />\n          <option name=\"name\" value=\"Pixel 8 Pro\" />\n          <option name=\"screenDensity\" value=\"390\" />\n          <option name=\"screenX\" value=\"1008\" />\n          <option name=\"screenY\" value=\"2244\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"30\" />\n          <option name=\"brand\" value=\"motorola\" />\n          <option name=\"codename\" value=\"java\" />\n          <option name=\"id\" value=\"java\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Motorola\" />\n          <option name=\"name\" value=\"G20\" />\n          <option name=\"screenDensity\" value=\"280\" />\n          <option name=\"screenX\" value=\"720\" />\n          <option name=\"screenY\" value=\"1600\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"google\" />\n          <option name=\"codename\" value=\"komodo\" />\n          <option name=\"id\" value=\"komodo\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Google\" />\n          <option name=\"name\" value=\"Pixel 9 Pro XL\" />\n          <option name=\"screenDensity\" value=\"360\" />\n          <option name=\"screenX\" value=\"1008\" />\n          <option name=\"screenY\" value=\"2244\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"35\" />\n          <option name=\"brand\" value=\"google\" />\n          <option name=\"codename\" value=\"komodo\" />\n          <option name=\"id\" value=\"komodo\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Google\" />\n          <option name=\"name\" value=\"Pixel 9 Pro XL\" />\n          <option name=\"screenDensity\" value=\"360\" />\n          <option name=\"screenX\" value=\"1008\" />\n          <option name=\"screenY\" value=\"2244\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"33\" />\n          <option name=\"brand\" value=\"google\" />\n          <option name=\"codename\" value=\"lynx\" />\n          <option name=\"id\" value=\"lynx\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Google\" />\n          <option name=\"name\" value=\"Pixel 7a\" />\n          <option name=\"screenDensity\" value=\"420\" />\n          <option name=\"screenX\" value=\"1080\" />\n          <option name=\"screenY\" value=\"2400\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"33\" />\n          <option name=\"brand\" value=\"motorola\" />\n          <option name=\"codename\" value=\"maui\" />\n          <option name=\"id\" value=\"maui\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Motorola\" />\n          <option name=\"name\" value=\"moto g play - 2023\" />\n          <option name=\"screenDensity\" value=\"280\" />\n          <option name=\"screenX\" value=\"720\" />\n          <option name=\"screenY\" value=\"1600\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"samsung\" />\n          <option name=\"codename\" value=\"o1q\" />\n          <option name=\"id\" value=\"o1q\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Samsung\" />\n          <option name=\"name\" value=\"Galaxy S21\" />\n          <option name=\"screenDensity\" value=\"421\" />\n          <option name=\"screenX\" value=\"1080\" />\n          <option name=\"screenY\" value=\"2400\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"31\" />\n          <option name=\"brand\" value=\"google\" />\n          <option name=\"codename\" value=\"oriole\" />\n          <option name=\"id\" value=\"oriole\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Google\" />\n          <option name=\"name\" value=\"Pixel 6\" />\n          <option name=\"screenDensity\" value=\"420\" />\n          <option name=\"screenX\" value=\"1080\" />\n          <option name=\"screenY\" value=\"2400\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"33\" />\n          <option name=\"brand\" value=\"google\" />\n          <option name=\"codename\" value=\"panther\" />\n          <option name=\"id\" value=\"panther\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Google\" />\n          <option name=\"name\" value=\"Pixel 7\" />\n          <option name=\"screenDensity\" value=\"420\" />\n          <option name=\"screenX\" value=\"1080\" />\n          <option name=\"screenY\" value=\"2400\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"samsung\" />\n          <option name=\"codename\" value=\"q5q\" />\n          <option name=\"id\" value=\"q5q\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Samsung\" />\n          <option name=\"name\" value=\"Galaxy Z Fold5\" />\n          <option name=\"screenDensity\" value=\"420\" />\n          <option name=\"screenX\" value=\"1812\" />\n          <option name=\"screenY\" value=\"2176\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"samsung\" />\n          <option name=\"codename\" value=\"q6q\" />\n          <option name=\"id\" value=\"q6q\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Samsung\" />\n          <option name=\"name\" value=\"Galaxy Z Fold6\" />\n          <option name=\"screenDensity\" value=\"420\" />\n          <option name=\"screenX\" value=\"1856\" />\n          <option name=\"screenY\" value=\"2160\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"30\" />\n          <option name=\"brand\" value=\"google\" />\n          <option name=\"codename\" value=\"r11\" />\n          <option name=\"formFactor\" value=\"Wear OS\" />\n          <option name=\"id\" value=\"r11\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Google\" />\n          <option name=\"name\" value=\"Pixel Watch\" />\n          <option name=\"screenDensity\" value=\"320\" />\n          <option name=\"screenX\" value=\"384\" />\n          <option name=\"screenY\" value=\"384\" />\n          <option name=\"type\" value=\"WEAR_OS\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"samsung\" />\n          <option name=\"codename\" value=\"r11q\" />\n          <option name=\"id\" value=\"r11q\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Samsung\" />\n          <option name=\"name\" value=\"SM-S711U\" />\n          <option name=\"screenDensity\" value=\"450\" />\n          <option name=\"screenX\" value=\"1080\" />\n          <option name=\"screenY\" value=\"2340\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"30\" />\n          <option name=\"brand\" value=\"google\" />\n          <option name=\"codename\" value=\"redfin\" />\n          <option name=\"id\" value=\"redfin\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Google\" />\n          <option name=\"name\" value=\"Pixel 5\" />\n          <option name=\"screenDensity\" value=\"440\" />\n          <option name=\"screenX\" value=\"1080\" />\n          <option name=\"screenY\" value=\"2340\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"google\" />\n          <option name=\"codename\" value=\"shiba\" />\n          <option name=\"id\" value=\"shiba\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Google\" />\n          <option name=\"name\" value=\"Pixel 8\" />\n          <option name=\"screenDensity\" value=\"420\" />\n          <option name=\"screenX\" value=\"1080\" />\n          <option name=\"screenY\" value=\"2400\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"samsung\" />\n          <option name=\"codename\" value=\"t2q\" />\n          <option name=\"id\" value=\"t2q\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Samsung\" />\n          <option name=\"name\" value=\"Galaxy S21 Plus\" />\n          <option name=\"screenDensity\" value=\"394\" />\n          <option name=\"screenX\" value=\"1080\" />\n          <option name=\"screenY\" value=\"2400\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"33\" />\n          <option name=\"brand\" value=\"google\" />\n          <option name=\"codename\" value=\"tangorpro\" />\n          <option name=\"formFactor\" value=\"Tablet\" />\n          <option name=\"id\" value=\"tangorpro\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Google\" />\n          <option name=\"name\" value=\"Pixel Tablet\" />\n          <option name=\"screenDensity\" value=\"320\" />\n          <option name=\"screenX\" value=\"1600\" />\n          <option name=\"screenY\" value=\"2560\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"34\" />\n          <option name=\"brand\" value=\"google\" />\n          <option name=\"codename\" value=\"tokay\" />\n          <option name=\"default\" value=\"true\" />\n          <option name=\"id\" value=\"tokay\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Google\" />\n          <option name=\"name\" value=\"Pixel 9\" />\n          <option name=\"screenDensity\" value=\"420\" />\n          <option name=\"screenX\" value=\"1080\" />\n          <option name=\"screenY\" value=\"2424\" />\n        </PersistentDeviceSelectionData>\n        <PersistentDeviceSelectionData>\n          <option name=\"api\" value=\"35\" />\n          <option name=\"brand\" value=\"google\" />\n          <option name=\"codename\" value=\"tokay\" />\n          <option name=\"default\" value=\"true\" />\n          <option name=\"id\" value=\"tokay\" />\n          <option name=\"labId\" value=\"google\" />\n          <option name=\"manufacturer\" value=\"Google\" />\n          <option name=\"name\" value=\"Pixel 9\" />\n          <option name=\"screenDensity\" value=\"420\" />\n          <option name=\"screenX\" value=\"1080\" />\n          <option name=\"screenY\" value=\"2424\" />\n        </PersistentDeviceSelectionData>\n      </list>\n    </option>\n  </component>\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/.idea/caches/deviceStreaming.xml b/../flexi_cart/.idea/caches/deviceStreaming.xml
--- a/../flexi_cart/.idea/caches/deviceStreaming.xml	(revision 0a712f615a29b95b357fcc49e300042fa4b4dc7e)
+++ b/../flexi_cart/.idea/caches/deviceStreaming.xml	(date 1748147618520)
@@ -18,6 +18,18 @@
         <PersistentDeviceSelectionData>
           <option name="api" value="34" />
           <option name="brand" value="OnePlus" />
+          <option name="codename" value="OP535DL1" />
+          <option name="id" value="OP535DL1" />
+          <option name="labId" value="google" />
+          <option name="manufacturer" value="OnePlus" />
+          <option name="name" value="CPH2409" />
+          <option name="screenDensity" value="401" />
+          <option name="screenX" value="1080" />
+          <option name="screenY" value="2412" />
+        </PersistentDeviceSelectionData>
+        <PersistentDeviceSelectionData>
+          <option name="api" value="34" />
+          <option name="brand" value="OnePlus" />
           <option name="codename" value="OP5552L1" />
           <option name="id" value="OP5552L1" />
           <option name="labId" value="google" />
@@ -197,6 +209,19 @@
           <option name="screenY" value="2152" />
         </PersistentDeviceSelectionData>
         <PersistentDeviceSelectionData>
+          <option name="api" value="35" />
+          <option name="brand" value="google" />
+          <option name="codename" value="comet" />
+          <option name="default" value="true" />
+          <option name="id" value="comet" />
+          <option name="labId" value="google" />
+          <option name="manufacturer" value="Google" />
+          <option name="name" value="Pixel 9 Pro Fold" />
+          <option name="screenDensity" value="390" />
+          <option name="screenX" value="2076" />
+          <option name="screenY" value="2152" />
+        </PersistentDeviceSelectionData>
+        <PersistentDeviceSelectionData>
           <option name="api" value="29" />
           <option name="brand" value="samsung" />
           <option name="codename" value="crownqlteue" />
@@ -597,6 +622,18 @@
           <option name="screenDensity" value="320" />
           <option name="screenX" value="1600" />
           <option name="screenY" value="2560" />
+        </PersistentDeviceSelectionData>
+        <PersistentDeviceSelectionData>
+          <option name="api" value="35" />
+          <option name="brand" value="google" />
+          <option name="codename" value="tegu" />
+          <option name="id" value="tegu" />
+          <option name="labId" value="google" />
+          <option name="manufacturer" value="Google" />
+          <option name="name" value="Pixel 9a" />
+          <option name="screenDensity" value="420" />
+          <option name="screenX" value="1080" />
+          <option name="screenY" value="2424" />
         </PersistentDeviceSelectionData>
         <PersistentDeviceSelectionData>
           <option name="api" value="34" />
@@ -623,6 +660,18 @@
           <option name="screenDensity" value="420" />
           <option name="screenX" value="1080" />
           <option name="screenY" value="2424" />
+        </PersistentDeviceSelectionData>
+        <PersistentDeviceSelectionData>
+          <option name="api" value="34" />
+          <option name="brand" value="samsung" />
+          <option name="codename" value="xcover7" />
+          <option name="id" value="xcover7" />
+          <option name="labId" value="google" />
+          <option name="manufacturer" value="Samsung" />
+          <option name="name" value="SM-G556B" />
+          <option name="screenDensity" value="450" />
+          <option name="screenX" value="1080" />
+          <option name="screenY" value="2408" />
         </PersistentDeviceSelectionData>
       </list>
     </option>
Index: ../flexi_cart/.idea/libraries/Dart_Packages.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><component name=\"libraryTable\">\n  <library name=\"Dart Packages\" type=\"DartPackagesLibraryType\">\n    <properties>\n      <option name=\"packageNameToDirsMap\">\n        <entry key=\"_fe_analyzer_shared\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/_fe_analyzer_shared-64.0.0/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"analyzer\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/analyzer-6.2.0/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"args\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/args-2.4.2/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"async\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/async-2.12.0/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"boolean_selector\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/boolean_selector-2.1.2/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"characters\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/characters-1.4.0/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"clock\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/clock-1.1.2/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"collection\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/collection-1.19.1/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"convert\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/convert-3.1.1/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"coverage\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/coverage-1.8.0/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"crypto\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/crypto-3.0.3/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"cupertino_icons\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/cupertino_icons-1.0.8/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"fake_async\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/fake_async-1.3.2/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"file\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/file-7.0.0/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"fixnum\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/fixnum-1.1.1/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"flutter\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/flutter/packages/flutter/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"flutter_lints\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/flutter_lints-5.0.0/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"flutter_test\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/flutter/packages/flutter_test/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"frontend_server_client\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/frontend_server_client-3.2.0/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"glob\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/glob-2.1.2/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"http_multi_server\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/http_multi_server-3.2.1/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"http_parser\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/http_parser-4.0.2/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"iconsax\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/iconsax-0.0.8/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"intl\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/intl-0.20.2/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"io\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/io-1.0.4/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"js\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/js-0.6.7/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"leak_tracker\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/leak_tracker-10.0.8/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"leak_tracker_flutter_testing\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/leak_tracker_flutter_testing-3.0.9/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"leak_tracker_testing\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/leak_tracker_testing-3.0.1/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"lints\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/lints-5.1.1/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"logging\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/logging-1.2.0/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"lucide_icons\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/lucide_icons-0.257.0/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"matcher\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/matcher-0.12.17/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"material_color_utilities\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/material_color_utilities-0.11.1/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"meta\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/meta-1.16.0/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"mime\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/mime-1.0.4/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"mocktail\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/mocktail-1.0.4/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"nested\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/nested-1.0.0/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"node_preamble\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/node_preamble-2.0.2/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"package_config\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/package_config-2.1.0/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"path\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/path-1.9.1/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"pool\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/pool-1.5.1/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"provider\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/provider-6.1.5/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"pub_semver\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/pub_semver-2.1.4/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"random_name_generator\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/random_name_generator-1.5.0/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"shelf\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/shelf-1.4.1/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"shelf_packages_handler\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/shelf_packages_handler-3.0.2/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"shelf_static\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/shelf_static-1.1.2/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"shelf_web_socket\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/shelf_web_socket-1.0.4/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"sky_engine\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/flutter/bin/cache/pkg/sky_engine/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"source_map_stack_trace\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/source_map_stack_trace-2.1.1/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"source_maps\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/source_maps-0.10.12/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"source_span\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/source_span-1.10.1/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"sprintf\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/sprintf-7.0.0/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"stack_trace\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/stack_trace-1.12.1/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"stream_channel\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/stream_channel-2.1.4/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"string_scanner\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/string_scanner-1.4.1/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"term_glyph\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/term_glyph-1.2.2/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"test\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/test-1.25.15/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"test_api\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/test_api-0.7.4/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"test_core\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/test_core-0.6.8/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"typed_data\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/typed_data-1.3.2/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"uuid\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/uuid-4.5.1/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"vector_math\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/vector_math-2.1.4/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"very_good_analysis\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/very_good_analysis-7.0.0/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"vm_service\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/vm_service-14.3.1/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"watcher\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/watcher-1.1.0/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"web_socket_channel\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/web_socket_channel-2.4.0/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"webkit_inspection_protocol\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/webkit_inspection_protocol-1.2.1/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"yaml\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/yaml-3.1.2/lib\" />\n            </list>\n          </value>\n        </entry>\n      </option>\n    </properties>\n    <CLASSES>\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/_fe_analyzer_shared-64.0.0/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/analyzer-6.2.0/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/args-2.4.2/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/async-2.12.0/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/boolean_selector-2.1.2/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/characters-1.4.0/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/clock-1.1.2/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/collection-1.19.1/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/convert-3.1.1/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/coverage-1.8.0/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/crypto-3.0.3/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/cupertino_icons-1.0.8/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/fake_async-1.3.2/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/file-7.0.0/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/fixnum-1.1.1/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/flutter_lints-5.0.0/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/frontend_server_client-3.2.0/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/glob-2.1.2/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/http_multi_server-3.2.1/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/http_parser-4.0.2/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/iconsax-0.0.8/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/intl-0.20.2/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/io-1.0.4/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/js-0.6.7/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/leak_tracker-10.0.8/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/leak_tracker_flutter_testing-3.0.9/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/leak_tracker_testing-3.0.1/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/lints-5.1.1/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/logging-1.2.0/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/lucide_icons-0.257.0/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/matcher-0.12.17/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/material_color_utilities-0.11.1/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/meta-1.16.0/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/mime-1.0.4/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/mocktail-1.0.4/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/nested-1.0.0/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/node_preamble-2.0.2/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/package_config-2.1.0/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/path-1.9.1/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/pool-1.5.1/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/provider-6.1.5/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/pub_semver-2.1.4/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/random_name_generator-1.5.0/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/shelf-1.4.1/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/shelf_packages_handler-3.0.2/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/shelf_static-1.1.2/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/shelf_web_socket-1.0.4/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/source_map_stack_trace-2.1.1/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/source_maps-0.10.12/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/source_span-1.10.1/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/sprintf-7.0.0/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/stack_trace-1.12.1/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/stream_channel-2.1.4/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/string_scanner-1.4.1/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/term_glyph-1.2.2/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/test-1.25.15/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/test_api-0.7.4/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/test_core-0.6.8/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/typed_data-1.3.2/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/uuid-4.5.1/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/vector_math-2.1.4/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/very_good_analysis-7.0.0/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/vm_service-14.3.1/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/watcher-1.1.0/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/web_socket_channel-2.4.0/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/webkit_inspection_protocol-1.2.1/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/yaml-3.1.2/lib\" />\n      <root url=\"file://$USER_HOME$/flutter/bin/cache/pkg/sky_engine/lib\" />\n      <root url=\"file://$USER_HOME$/flutter/packages/flutter/lib\" />\n      <root url=\"file://$USER_HOME$/flutter/packages/flutter_test/lib\" />\n    </CLASSES>\n    <JAVADOC />\n    <SOURCES />\n  </library>\n</component>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/.idea/libraries/Dart_Packages.xml b/../flexi_cart/.idea/libraries/Dart_Packages.xml
--- a/../flexi_cart/.idea/libraries/Dart_Packages.xml	(revision 0a712f615a29b95b357fcc49e300042fa4b4dc7e)
+++ b/../flexi_cart/.idea/libraries/Dart_Packages.xml	(date 1748182125378)
@@ -26,7 +26,7 @@
         <entry key="async">
           <value>
             <list>
-              <option value="$USER_HOME$/.pub-cache/hosted/pub.dev/async-2.12.0/lib" />
+              <option value="$USER_HOME$/.pub-cache/hosted/pub.dev/async-2.13.0/lib" />
             </list>
           </value>
         </entry>
@@ -44,6 +44,13 @@
             </list>
           </value>
         </entry>
+        <entry key="cli_config">
+          <value>
+            <list>
+              <option value="$USER_HOME$/.pub-cache/hosted/pub.dev/cli_config-0.2.0/lib" />
+            </list>
+          </value>
+        </entry>
         <entry key="clock">
           <value>
             <list>
@@ -68,7 +75,7 @@
         <entry key="coverage">
           <value>
             <list>
-              <option value="$USER_HOME$/.pub-cache/hosted/pub.dev/coverage-1.8.0/lib" />
+              <option value="$USER_HOME$/.pub-cache/hosted/pub.dev/coverage-1.13.1/lib" />
             </list>
           </value>
         </entry>
@@ -89,7 +96,7 @@
         <entry key="fake_async">
           <value>
             <list>
-              <option value="$USER_HOME$/.pub-cache/hosted/pub.dev/fake_async-1.3.2/lib" />
+              <option value="$USER_HOME$/.pub-cache/hosted/pub.dev/fake_async-1.3.3/lib" />
             </list>
           </value>
         </entry>
@@ -187,7 +194,7 @@
         <entry key="leak_tracker">
           <value>
             <list>
-              <option value="$USER_HOME$/.pub-cache/hosted/pub.dev/leak_tracker-10.0.8/lib" />
+              <option value="$USER_HOME$/.pub-cache/hosted/pub.dev/leak_tracker-10.0.9/lib" />
             </list>
           </value>
         </entry>
@@ -209,6 +216,7 @@
           <value>
             <list>
               <option value="$USER_HOME$/.pub-cache/hosted/pub.dev/lints-5.1.1/lib" />
+              <option value="$USER_HOME$/.pub-cache/hosted/pub.dev/lints-6.0.0/lib" />
             </list>
           </value>
         </entry>
@@ -460,7 +468,7 @@
         <entry key="vm_service">
           <value>
             <list>
-              <option value="$USER_HOME$/.pub-cache/hosted/pub.dev/vm_service-14.3.1/lib" />
+              <option value="$USER_HOME$/.pub-cache/hosted/pub.dev/vm_service-15.0.0/lib" />
             </list>
           </value>
         </entry>
@@ -498,16 +506,17 @@
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/_fe_analyzer_shared-64.0.0/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/analyzer-6.2.0/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/args-2.4.2/lib" />
-      <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/async-2.12.0/lib" />
+      <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/async-2.13.0/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/boolean_selector-2.1.2/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/characters-1.4.0/lib" />
+      <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/cli_config-0.2.0/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/clock-1.1.2/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/collection-1.19.1/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/convert-3.1.1/lib" />
-      <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/coverage-1.8.0/lib" />
+      <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/coverage-1.13.1/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/crypto-3.0.3/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/cupertino_icons-1.0.8/lib" />
-      <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/fake_async-1.3.2/lib" />
+      <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/fake_async-1.3.3/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/file-7.0.0/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/fixnum-1.1.1/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/flutter_lints-5.0.0/lib" />
@@ -519,10 +528,11 @@
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/intl-0.20.2/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/io-1.0.4/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/js-0.6.7/lib" />
-      <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/leak_tracker-10.0.8/lib" />
+      <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/leak_tracker-10.0.9/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/leak_tracker_flutter_testing-3.0.9/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/leak_tracker_testing-3.0.1/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/lints-5.1.1/lib" />
+      <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/lints-6.0.0/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/logging-1.2.0/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/lucide_icons-0.257.0/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/matcher-0.12.17/lib" />
@@ -557,7 +567,7 @@
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/uuid-4.5.1/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/vector_math-2.1.4/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/very_good_analysis-7.0.0/lib" />
-      <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/vm_service-14.3.1/lib" />
+      <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/vm_service-15.0.0/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/watcher-1.1.0/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/web_socket_channel-2.4.0/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/webkit_inspection_protocol-1.2.1/lib" />
Index: ../flexi_cart/lib/src/cart_options/cart_options.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/lib/src/cart_options/cart_options.dart b/../flexi_cart/lib/src/cart_options/cart_options.dart
new file mode 100644
--- /dev/null	(date 1748188362631)
+++ b/../flexi_cart/lib/src/cart_options/cart_options.dart	(date 1748188362631)
@@ -0,0 +1,88 @@
+import 'package:flexi_cart/flexi_cart.dart';
+
+part 'price_options.dart';
+
+part 'tax_options.dart';
+
+part 'validator_options.dart';
+
+part 'behavior_options.dart';
+
+part 'discount_options.dart';
+
+part 'shipping_options.dart';
+
+part 'session_options.dart';
+
+part 'recommendation_options.dart';
+
+/// A configuration class that bundles all customizable options for a
+/// [FlexiCart] instance.
+///
+/// Use this class to control pricing formats, tax calculations,
+/// validation rules,
+/// behavior overrides, discount logic, shipping methods,
+/// invoice metadata, session behavior,
+/// and product recommendations.
+class CartOptions {
+  /// Creates a comprehensive set of options for
+  /// customizing [FlexiCart] behavior.
+  CartOptions({
+    this.priceOptions = const PriceOptions(),
+    this.taxOptions = const TaxOptions(),
+    this.behaviorOptions = const BehaviorOptions(),
+    this.discountOptions = const DiscountOptions(),
+    this.shippingOptions = const ShippingOptions(),
+    this.sessionOptions = const SessionOptions(),
+    this.recommendationOptions = const RecommendationOptions(),
+    ValidatorOptions? validatorOptions,
+  }) : validatorOptions = validatorOptions ?? ValidatorOptions();
+
+  /// Options related to currency formatting and price display.
+  final PriceOptions priceOptions;
+
+  /// Options for tax calculations and how tax is shown in totals.
+  final TaxOptions taxOptions;
+
+  /// Options for validating the cart during checkout, including promo codes.
+  final ValidatorOptions validatorOptions;
+
+  /// Controls logging, item filtering, and price overrides.
+  final BehaviorOptions behaviorOptions;
+
+  /// Rules and logic for applying discounts to the cart.
+  final DiscountOptions discountOptions;
+
+  /// Shipping rules, cost calculators, and method listings.
+  final ShippingOptions shippingOptions;
+
+  /// Controls cart session lifespan and expiration behavior.
+  final SessionOptions sessionOptions;
+
+  /// Returns recommended products based on current cart contents.
+  final RecommendationOptions recommendationOptions;
+
+  /// Creates a copy of this [CartOptions] with updated fields.
+  CartOptions copyWith({
+    PriceOptions? priceOptions,
+    TaxOptions? taxOptions,
+    ValidatorOptions? validatorOptions,
+    BehaviorOptions? behaviorOptions,
+    DiscountOptions? discountOptions,
+    ShippingOptions? shippingOptions,
+    SessionOptions? sessionOptions,
+    RecommendationOptions? recommendationOptions,
+  }) {
+    return CartOptions(
+      priceOptions: priceOptions ?? this.priceOptions,
+      taxOptions: taxOptions ?? this.taxOptions,
+      validatorOptions: validatorOptions ?? this.validatorOptions,
+      behaviorOptions: behaviorOptions ?? this.behaviorOptions,
+      discountOptions: discountOptions ?? this.discountOptions,
+      shippingOptions: shippingOptions ?? this.shippingOptions,
+      sessionOptions: sessionOptions ?? this.sessionOptions,
+      recommendationOptions:
+          recommendationOptions ?? this.recommendationOptions,
+    );
+  }
+}
Index: ../flexi_cart/test/cart/cart_lock_test.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import 'package:flexi_cart/flexi_cart.dart';\nimport 'package:flutter_test/flutter_test.dart';\nimport '../helpers/mocks.dart';\n\nvoid main() {\n  group('Cart Locking', () {\n    late FlexiCart<MockItem> cart;\n    final item = MockItem(id: '1', name: 'item', price: 10);\n\n    setUp(() {\n      cart = FlexiCart<MockItem>();\n    });\n\n    test('cart lock prevents modification', () {\n      final cart = FlexiCart<MockItem>();\n      final item = MockItem(id: '1', name: 'item-name', price: 10);\n\n      cart.lock();\n      expect(cart.isLocked, isTrue);\n\n      expect(() => cart.add(item), throwsException);\n      expect(() => cart.delete(item), throwsException);\n\n      cart.unlock();\n      expect(cart.isLocked, isFalse);\n\n      cart.add(item);\n      expect(cart.items.length, 1);\n    });\n\n    test('Allows modification after unlock', () {\n      cart\n        ..lock()\n        ..unlock();\n      expect(() => cart.add(item), returnsNormally);\n    });\n    test('Allows Locking multiple', () {\n      cart\n        ..lock()\n        ..lock()\n        ..lock();\n      expect(cart.isLocked, isTrue);\n    });\n    test('Allows unLocking twice', () {\n      cart\n        ..lock()\n        ..unlock()\n        ..unlock()\n        ..unlock();\n      expect(cart.isLocked, isFalse);\n    });\n\n    test('Maintains lock state after reset', () {\n      cart\n        ..lock()\n        ..reset();\n      expect(cart.isLocked, isFalse);\n    });\n  });\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/test/cart/cart_lock_test.dart b/../flexi_cart/test/cart/cart_lock_test.dart
--- a/../flexi_cart/test/cart/cart_lock_test.dart	(revision 0a712f615a29b95b357fcc49e300042fa4b4dc7e)
+++ b/../flexi_cart/test/cart/cart_lock_test.dart	(date 1748183606933)
@@ -34,14 +34,14 @@
         ..unlock();
       expect(() => cart.add(item), returnsNormally);
     });
-    test('Allows Locking multiple', () {
+    test('lock() is idempotent', () {
       cart
         ..lock()
         ..lock()
         ..lock();
       expect(cart.isLocked, isTrue);
     });
-    test('Allows unLocking twice', () {
+    test('unlock() is idempotent', () {
       cart
         ..lock()
         ..unlock()
@@ -55,6 +55,35 @@
         ..lock()
         ..reset();
       expect(cart.isLocked, isFalse);
+    });
+    test('toggleLock() locks and unlocks correctly', () {
+      cart.toggleLock();
+      expect(cart.isLocked, isTrue);
+      expect(cart.history.last, contains('Cart locked'));
+
+      cart.toggleLock();
+      expect(cart.isLocked, isFalse);
+      expect(cart.history.last, contains('Cart unlocked'));
+    });
+
+    test('toggleLock() with shouldNotifyListeners = true', () {
+      cart.toggleLock(shouldNotifyListeners: true);
+      expect(cart.history.last, contains('notified: true'));
+    });
+
+    test('resetLock() forces unlock regardless of state', () {
+      cart
+        ..lock()
+        ..resetLock();
+      expect(cart.isLocked, isFalse);
+      expect(cart.history.last, contains('Cart lock reset'));
+    });
+
+    test('resetLock() with shouldNotifyListeners = true', () {
+      cart
+        ..lock()
+        ..resetLock(shouldNotifyListeners: true);
+      expect(cart.history.last, contains('notified: true'));
     });
   });
 }
Index: ../flexi_cart/lib/src/cart_options/discount_options.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/lib/src/cart_options/discount_options.dart b/../flexi_cart/lib/src/cart_options/discount_options.dart
new file mode 100644
--- /dev/null	(date 1748182124950)
+++ b/../flexi_cart/lib/src/cart_options/discount_options.dart	(date 1748182124950)
@@ -0,0 +1,41 @@
+part of 'cart_options.dart';
+
+/// Handles the logic for calculating and labeling discounts.
+class DiscountOptions {
+  /// Creates a new instance of [DiscountOptions].
+  const DiscountOptions({
+    this.discountCalculator,
+    this.discountLabel = 'Discount',
+    this.allowNegative = false,
+  });
+
+  /// A function to compute the discount value based on the current cart.
+  final double Function(FlexiCart cart)? discountCalculator;
+
+  /// Label to display alongside the discount value.
+  final String discountLabel;
+
+  /// Whether negative discounts are allowed (e.g., penalties or surcharges).
+  final bool allowNegative;
+
+  /// Calculates the discount using [discountCalculator], or returns 0.0
+  /// if none provided.
+  double calculate(FlexiCart cart) {
+    final value = discountCalculator?.call(cart) ?? 0.0;
+    // If allowNegative is false, ensure the discount is not negative
+    return allowNegative ? value : value.clamp(0.0, double.infinity);
+  }
+
+  /// Creates a copy of this [DiscountOptions] with optional overrides.
+  DiscountOptions copyWith({
+    double Function(FlexiCart cart)? discountCalculator,
+    String? discountLabel,
+    bool? allowNegative,
+  }) {
+    return DiscountOptions(
+      discountCalculator: discountCalculator ?? this.discountCalculator,
+      discountLabel: discountLabel ?? this.discountLabel,
+      allowNegative: allowNegative ?? this.allowNegative,
+    );
+  }
+}
Index: ../flexi_cart/lib/src/cart_options/behavior_options.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/lib/src/cart_options/behavior_options.dart b/../flexi_cart/lib/src/cart_options/behavior_options.dart
new file mode 100644
--- /dev/null	(date 1748182124984)
+++ b/../flexi_cart/lib/src/cart_options/behavior_options.dart	(date 1748182124984)
@@ -0,0 +1,46 @@
+part of 'cart_options.dart';
+
+/// Behavior overrides for internal cart logic.
+class BehaviorOptions {
+  /// Controls how the cart behaves internally, including logging,
+  /// item filtering, and price resolution.
+  const BehaviorOptions({
+    this.enableLogging = false,
+    this.logger,
+    this.itemFilter,
+    this.priceResolver,
+  });
+
+  /// Enable or disable debug logging.
+  final bool enableLogging;
+
+  /// Function to log custom messages when logging is enabled.
+  final void Function(String message)? logger;
+
+  /// Optional function to determine whether an item should be added.
+  final bool Function(ICartItem item)? itemFilter;
+
+  /// Optional function to override price for a specific item.
+  final double Function(ICartItem item)? priceResolver;
+
+  /// Logs a message if logging is enabled.
+  void log(String message) {
+    if (enableLogging) {
+      logger?.call(message);
+    }
+  }
+
+  /// Checks whether an item can be added based on filters and hooks.
+  bool canAdd(ICartItem item) {
+    if (itemFilter != null && !itemFilter!(item)) {
+      return false;
+    }
+    return true;
+  }
+
+  /// Resolves the item's price based on [priceResolver] or
+  /// defaults to the item's own price.
+  double resolvePrice(ICartItem item) {
+    return priceResolver?.call(item) ?? item.price;
+  }
+}
Index: ../flexi_cart/pubspec.yaml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>name: flexi_cart\ndescription: A versatile and reactive cart solution for Flutter apps, supporting grouping, notes, delivery, quantity control, and custom logic.\nversion: 0.4.0+2\nrepository: https://github.com/supy-io/supy-flutter-packages/tree/main/packages/flexi_cart\nissue_tracker: https://github.com/supy-io/supy-flutter-packages/issues\nhomepage: https://github.com/supy-io/supy-flutter-packages/tree/main/packages/flexi_cart\ntopics: [shopping-cart, cart,smart-cart]\n\nenvironment:\n  sdk: \">=2.17.0 <4.0.0\"\n\ndependencies:\n  flutter:\n    sdk: flutter\n  provider: ^6.1.5\n\ndev_dependencies:\n  flutter_test:\n    sdk: flutter\n  lints: ^5.1.1\n  mocktail: ^1.0.4\n  test: ^1.25.15\n  very_good_analysis: ^7.0.0\n\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/pubspec.yaml b/../flexi_cart/pubspec.yaml
--- a/../flexi_cart/pubspec.yaml	(revision 0a712f615a29b95b357fcc49e300042fa4b4dc7e)
+++ b/../flexi_cart/pubspec.yaml	(date 1748181354557)
@@ -17,7 +17,7 @@
 dev_dependencies:
   flutter_test:
     sdk: flutter
-  lints: ^5.1.1
+  lints: ^6.0.0
   mocktail: ^1.0.4
   test: ^1.25.15
   very_good_analysis: ^7.0.0
Index: ../flexi_cart/test/helpers/mocks.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import 'package:flexi_cart/flexi_cart.dart';\nimport 'package:mocktail/mocktail.dart';\n\nclass MockCallbackFunction extends Mock {\n  void call();\n}\n\nclass MockItem extends ICartItem {\n  MockItem({\n    required super.id,\n    required super.name,\n    required super.price,\n    this.quantityVal = 1,\n    this.groupId = 'default',\n    this.groupNameVal = 'Default Group',\n  });\n\n  double quantityVal;\n  final String groupId;\n  final String groupNameVal;\n\n  @override\n  String get key => id;\n\n  @override\n  double? get quantity => quantityVal;\n\n  @override\n  set quantity(double? value) => quantityVal = value ?? 0;\n\n  @override\n  String get group => groupId;\n\n  @override\n  String get groupName => groupNameVal;\n\n  @override\n  double totalPrice() => quantityVal * 10;\n\n  @override\n  double notNullQty() => quantityVal;\n}\n\nclass MockCartItem extends Mock implements ICartItem {}\n\nclass MockCartItem2 extends MockCartItem {}\n\nclass CartItem extends ICartItem {\n  CartItem({\n    required super.price,\n    required super.id,\n    required super.name,\n    required super.currency,\n    super.groupName,\n    super.image,\n    super.unit = '',\n    super.quantity = 0,\n  });\n}\n\nclass TestPlugin<T extends ICartItem> implements ICartPlugin<T> {\n  Map<String, bool> calledMap = {\n    'onChange': false,\n    'onClose': false,\n    'onError': false,\n  };\n\n  @override\n  void onChange(FlexiCart<T> cart) => calledMap['onChange'] = true;\n\n  @override\n  void onClose(FlexiCart<T> cart) => calledMap['onClose'] = true;\n\n  @override\n  void onError(FlexiCart<T> cart, Object error, StackTrace stackTrace) =>\n      calledMap['onError'] = true;\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/test/helpers/mocks.dart b/../flexi_cart/test/helpers/mocks.dart
--- a/../flexi_cart/test/helpers/mocks.dart	(revision 0a712f615a29b95b357fcc49e300042fa4b4dc7e)
+++ b/../flexi_cart/test/helpers/mocks.dart	(date 1748153974337)
@@ -10,24 +10,17 @@
     required super.id,
     required super.name,
     required super.price,
-    this.quantityVal = 1,
+    super.quantity = 1,
     this.groupId = 'default',
     this.groupNameVal = 'Default Group',
   });
 
-  double quantityVal;
   final String groupId;
   final String groupNameVal;
 
   @override
   String get key => id;
 
-  @override
-  double? get quantity => quantityVal;
-
-  @override
-  set quantity(double? value) => quantityVal = value ?? 0;
-
   @override
   String get group => groupId;
 
@@ -35,10 +28,7 @@
   String get groupName => groupNameVal;
 
   @override
-  double totalPrice() => quantityVal * 10;
-
-  @override
-  double notNullQty() => quantityVal;
+  double totalPrice() => notNullQty() * price;
 }
 
 class MockCartItem extends Mock implements ICartItem {}
Index: ../flexi_cart/lib/src/cart_options/recommendation_options.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/lib/src/cart_options/recommendation_options.dart b/../flexi_cart/lib/src/cart_options/recommendation_options.dart
new file mode 100644
--- /dev/null	(date 1748182124965)
+++ b/../flexi_cart/lib/src/cart_options/recommendation_options.dart	(date 1748182124965)
@@ -0,0 +1,16 @@
+part of 'cart_options.dart';
+
+/// Provides dynamic product recommendations based on cart contents.
+class RecommendationOptions {
+  /// Creates a new instance of [RecommendationOptions]
+  /// with an optional function
+  const RecommendationOptions({
+    this.suggestProducts,
+  });
+
+  /// A function that returns a list of recommended products for a given cart.
+  final List<dynamic> Function(FlexiCart cart)? suggestProducts;
+
+  /// Returns product recommendations or an empty list.
+  List<dynamic> recommend(FlexiCart cart) => suggestProducts?.call(cart) ?? [];
+}
Index: ../flexi_cart/lib/src/cart_options/session_options.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/lib/src/cart_options/session_options.dart b/../flexi_cart/lib/src/cart_options/session_options.dart
new file mode 100644
--- /dev/null	(date 1748184230653)
+++ b/../flexi_cart/lib/src/cart_options/session_options.dart	(date 1748184230653)
@@ -0,0 +1,35 @@
+part of 'cart_options.dart';
+
+/// Controls cart session lifetime and expiration behavior.
+class SessionOptions {
+  /// Creates a new instance of [SessionOptions] with optional parameters.
+  const SessionOptions({
+    this.expiresIn,
+    this.onSessionExpire,
+  });
+
+  /// Duration until a cart session expires.
+  final Duration? expiresIn;
+
+  /// Callback to execute when a session expires.
+  final void Function()? onSessionExpire;
+
+  /// Determines whether the session has expired since [createdAt].
+  bool isExpired(DateTime createdAt) {
+    if (expiresIn == null) {
+      return false;
+    }
+    return DateTime.now().difference(createdAt) > expiresIn!;
+  }
+
+  /// Creates a copy of this [SessionOptions] with the specified parameters.
+  SessionOptions copyWith({
+    Duration? expiresIn,
+    void Function()? onSessionExpire,
+  }) {
+    return SessionOptions(
+      expiresIn: expiresIn ?? this.expiresIn,
+      onSessionExpire: onSessionExpire ?? this.onSessionExpire,
+    );
+  }
+}
Index: ../flexi_cart/test/cart/cart_test.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import 'cart_clone_cast_test.dart' as cart_clone_cast_test;\nimport 'cart_core_test.dart' as cart_core_test;\nimport 'cart_currency_test.dart' as cart_currency_test;\nimport 'cart_disposed_test.dart' as cart_disposed_test;\nimport 'cart_expiration_test.dart' as cart_expiration_test;\nimport 'cart_item_test.dart' as cart_item_test;\nimport 'cart_items_group_test.dart' as cart_items_group_test;\nimport 'cart_lock_test.dart' as cart_lock_test;\nimport 'cart_logs_test.dart' as cart_logs_test;\nimport 'cart_metadata_test.dart' as cart_metadata_test;\nimport 'cart_plugins_test.dart' as cart_plugins_test;\nimport 'cart_reset_test.dart' as cart_reset_test;\n\nvoid main() {\n  cart_reset_test.main();\n  cart_plugins_test.main();\n  cart_metadata_test.main();\n  cart_lock_test.main();\n  cart_items_group_test.main();\n  cart_item_test.main();\n  cart_expiration_test.main();\n  cart_disposed_test.main();\n  cart_currency_test.main();\n  cart_clone_cast_test.main();\n  cart_core_test.main();\n  cart_logs_test.main();\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/test/cart/cart_test.dart b/../flexi_cart/test/cart/cart_test.dart
--- a/../flexi_cart/test/cart/cart_test.dart	(revision 0a712f615a29b95b357fcc49e300042fa4b4dc7e)
+++ b/../flexi_cart/test/cart/cart_test.dart	(date 1748170327335)
@@ -3,11 +3,12 @@
 import 'cart_currency_test.dart' as cart_currency_test;
 import 'cart_disposed_test.dart' as cart_disposed_test;
 import 'cart_expiration_test.dart' as cart_expiration_test;
+import 'cart_history_test.dart' as cart_history_test;
 import 'cart_item_test.dart' as cart_item_test;
 import 'cart_items_group_test.dart' as cart_items_group_test;
 import 'cart_lock_test.dart' as cart_lock_test;
-import 'cart_logs_test.dart' as cart_logs_test;
 import 'cart_metadata_test.dart' as cart_metadata_test;
+import 'cart_options/cart_options_test.dart' as cart_options_test;
 import 'cart_plugins_test.dart' as cart_plugins_test;
 import 'cart_reset_test.dart' as cart_reset_test;
 
@@ -23,5 +24,6 @@
   cart_currency_test.main();
   cart_clone_cast_test.main();
   cart_core_test.main();
-  cart_logs_test.main();
+  cart_history_test.main();
+  cart_options_test.main();
 }
Index: ../flexi_cart/example/.gitignore
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+># Miscellaneous\n*.class\n*.log\n*.pyc\n*.swp\n.DS_Store\n.atom/\n.buildlog/\n.history\n.svn/\nmigrate_working_dir/\n\n# IntelliJ related\n*.iml\n*.ipr\n*.iws\n.idea/\n\n# The .vscode folder contains launch configuration and tasks you configure in\n# VS Code which you may wish to be included in version control, so this line\n# is commented out by default.\n#.vscode/\n\n# Flutter/Dart/Pub related\n**/doc/api/\n**/ios/Flutter/.last_build_id\n.dart_tool/\n.flutter-plugins\n.flutter-plugins-dependencies\n.packages\n.pub-cache/\n.pub/\n/build/\n\n# Symbolication related\napp.*.symbols\n\n# Obfuscation related\napp.*.map.json\n\n# Android Studio will place build artifacts here\n/android/app/debug\n/android/app/profile\n/android/app/release\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/example/.gitignore b/../flexi_cart/example/.gitignore
--- a/../flexi_cart/example/.gitignore	(revision 0a712f615a29b95b357fcc49e300042fa4b4dc7e)
+++ b/../flexi_cart/example/.gitignore	(date 1748187725780)
@@ -5,9 +5,11 @@
 *.swp
 .DS_Store
 .atom/
+.build/
 .buildlog/
 .history
 .svn/
+.swiftpm/
 migrate_working_dir/
 
 # IntelliJ related
Index: ../flexi_cart/example/macos/Runner/AppDelegate.swift
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import Cocoa\nimport FlutterMacOS\n\n@NSApplicationMain\nclass AppDelegate: FlutterAppDelegate {\n  override func applicationShouldTerminateAfterLastWindowClosed(_ sender: NSApplication) -> Bool {\n    return true\n  }\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/example/macos/Runner/AppDelegate.swift b/../flexi_cart/example/macos/Runner/AppDelegate.swift
--- a/../flexi_cart/example/macos/Runner/AppDelegate.swift	(revision 0a712f615a29b95b357fcc49e300042fa4b4dc7e)
+++ b/../flexi_cart/example/macos/Runner/AppDelegate.swift	(date 1748187725779)
@@ -1,9 +1,13 @@
 import Cocoa
 import FlutterMacOS
 
-@NSApplicationMain
+@main
 class AppDelegate: FlutterAppDelegate {
   override func applicationShouldTerminateAfterLastWindowClosed(_ sender: NSApplication) -> Bool {
     return true
   }
+
+  override func applicationSupportsSecureRestorableState(_ app: NSApplication) -> Bool {
+    return true
+  }
 }
Index: ../flexi_cart/lib/src/cart_options/price_options.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/lib/src/cart_options/price_options.dart b/../flexi_cart/lib/src/cart_options/price_options.dart
new file mode 100644
--- /dev/null	(date 1748182125000)
+++ b/../flexi_cart/lib/src/cart_options/price_options.dart	(date 1748182125000)
@@ -0,0 +1,55 @@
+part of 'cart_options.dart';
+
+/// Configuration for how prices are displayed and formatted.
+class PriceOptions {
+  /// Creates a new instance of [PriceOptions] with default values.
+  const PriceOptions({
+    this.currencySymbol = r'$',
+    this.symbolOnLeft = true,
+    this.decimalPlaces = 2,
+    this.compactPriceFormat = false,
+    this.locale,
+    this.customFormatter,
+  });
+
+  /// Currency symbol (e.g. '\$', '€', '¥').
+  final String currencySymbol;
+
+  /// Whether the currency symbol appears before or after the number.
+  final bool symbolOnLeft;
+
+  /// Number of decimal places to show.
+  final int decimalPlaces;
+
+  /// Use a compact format for large numbers (e.g. 1K, 2.5M).
+  final bool compactPriceFormat;
+
+  /// Locale identifier for formatting (optional).
+  final String? locale;
+
+  /// Optional custom formatter to override default formatting behavior.
+  final String Function(double price)? customFormatter;
+
+  /// Formats the given [value] according to the price options.
+  String format(double value) {
+    if (customFormatter != null) {
+      return customFormatter!(value);
+    }
+    final formatted = compactPriceFormat && value >= 1000
+        ? _compactFormat(value)
+        : value.toStringAsFixed(decimalPlaces);
+    return symbolOnLeft
+        ? '$currencySymbol$formatted'
+        : '$formatted$currencySymbol';
+  }
+
+  String _compactFormat(double value) {
+    if (value >= 1e6) {
+      return '${(value / 1e6).toStringAsFixed(1)}M';
+    }
+    if (value >= 1e3) {
+      return '${(value / 1e3).toStringAsFixed(1)}K';
+    }
+    return value.toStringAsFixed(decimalPlaces);
+  }
+}
Index: ../flexi_cart/lib/src/cart_options/validator_options.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/lib/src/cart_options/validator_options.dart b/../flexi_cart/lib/src/cart_options/validator_options.dart
new file mode 100644
--- /dev/null	(date 1748192914832)
+++ b/../flexi_cart/lib/src/cart_options/validator_options.dart	(date 1748192914832)
@@ -0,0 +1,89 @@
+part of 'cart_options.dart';
+
+/// A function type for validating the state of a [FlexiCart] before checkout.
+///
+/// Returns a [String] error message if validation fails, or `null`
+/// if validation passes.
+
+/// Options for validating cart state and promo code logic.
+class ValidatorOptions {
+  /// Creates a set of validation options for a [FlexiCart] instance.
+  ValidatorOptions({
+    List<ICartValidator>? validators,
+    this.promoCode,
+    this.promoCodeValidator,
+    this.autoValidate = false,
+  }) : _validators = validators != null ? List.of(validators) : [];
+
+  /// Whether to automatically validate the cart on every operation.
+  final bool autoValidate;
+
+  /// Current promotional code applied by the user.
+  String? promoCode;
+
+  /// A function to validate the current [promoCode].
+  final String? Function(String code)? promoCodeValidator;
+
+  /// Internal list of cart-level validators.
+  final List<ICartValidator> _validators;
+
+  /// Returns an unmodifiable view of validators.
+  List<ICartValidator> get validators => _validators;
+
+  /// Returns whether there are any validators configured.
+  bool get hasValidators => _validators.isNotEmpty;
+
+  /// Adds a validator to the list.
+  void addValidator(ICartValidator validator) {
+    _validators.add(validator);
+  }
+
+  /// Removes a validator from the list.
+  void removeValidator(ICartValidator validator) {
+    _validators.remove(validator);
+  }
+
+  /// Adds multiple validators.
+  void addValidators(List<ICartValidator> validators) {
+    _validators.addAll(validators);
+  }
+
+  /// Clears all validators.
+  void clearValidators() {
+    _validators.clear();
+  }
+
+  /// Runs all configured validators and returns any validation errors.
+  Map<String, dynamic> validate(FlexiCart cart) {
+    final errors = <String, dynamic>{};
+
+    for (final validator in _validators) {
+      final result = validator(cart);
+      if (result != null && result.isNotEmpty) {
+        errors.addAll(result);
+      }
+    }
+
+    if (promoCodeValidator != null && promoCode != null) {
+      final promoError = promoCodeValidator!(promoCode!);
+      if (promoError != null && promoError.isNotEmpty) {
+        errors['promoCode'] = promoError;
+      }
+    }
+
+    return errors;
+  }
+
+  /// Returns a copy of this instance with modified fields.
+  ValidatorOptions copyWith({
+    List<ICartValidator>? validators,
+    String? promoCode,
+    String? Function(String code)? promoCodeValidator,
+  }) {
+    return ValidatorOptions(
+      validators: validators ?? _validators,
+      promoCode: promoCode ?? this.promoCode,
+      promoCodeValidator: promoCodeValidator ?? this.promoCodeValidator,
+    );
+  }
+}
Index: ../flexi_cart/lib/src/models/cart_hooks.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/lib/src/models/cart_hooks.dart b/../flexi_cart/lib/src/models/cart_hooks.dart
new file mode 100644
--- /dev/null	(date 1748181661430)
+++ b/../flexi_cart/lib/src/models/cart_hooks.dart	(date 1748181661430)
@@ -0,0 +1,26 @@
+import 'package:flexi_cart/flexi_cart.dart';
+
+/// Hooks for cart operations, allowing for custom actions on add, delete,
+/// and checkout.
+class CartHooks {
+  /// Creates a [CartHooks] instance with the provided callbacks.
+  CartHooks({
+    required this.onDisposed,
+    required this.onItemAdded,
+    required this.onItemDeleted,
+    required this.onCheckout,
+  });
+
+  /// Creates a [CartHooks] instance with no callbacks.
+  /// Useful for default behavior.
+  final void Function()? onDisposed;
+
+  /// Callback for when an item is added to the cart.
+  final void Function(ICartItem item)? onItemAdded;
+
+  /// Callback for when an item is deleted from the cart.
+  final void Function(ICartItem item)? onItemDeleted;
+
+  /// Callback for when the checkout process is initiated.
+  final void Function(List<ICartItem> items)? onCheckout;
+}
Index: ../flexi_cart/test/cart/cart_logs_test.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/test/cart/cart_logs_test.dart b/../flexi_cart/test/cart/cart_history_test.dart
rename from ../flexi_cart/test/cart/cart_logs_test.dart
rename to ../flexi_cart/test/cart/cart_history_test.dart
--- a/../flexi_cart/test/cart/cart_logs_test.dart	(revision 0a712f615a29b95b357fcc49e300042fa4b4dc7e)
+++ b/../flexi_cart/test/cart/cart_history_test.dart	(date 1748168499506)
@@ -4,7 +4,7 @@
 import '../flexi_cart_test.dart';
 
 void main() {
-  group('Cart Logs', () {
+  group('Cart History', () {
     test('logs messages on item add/remove', () {
       final cart = FlexiCart<MockItem>();
       final item = MockItem(id: '1', name: 'item-name', price: 10);
@@ -12,13 +12,13 @@
       cart
         ..add(item)
         ..delete(item);
-      expect(cart.logs.length, 2);
+      expect(cart.history.length, 2);
       expect(
-        cart.logs[0],
+        cart.history[0],
         contains('Item added: 1 - {notified: true}'),
       );
       expect(
-        cart.logs[1],
+        cart.history[1],
         contains(
           'Item has been removed: 1 - {notified: true}',
         ),
@@ -29,9 +29,9 @@
       final item = MockItem(id: '1', name: 'item-name', price: 10);
 
       cart.add(item);
-      expect(cart.logs[0], contains('Item added: 1'));
+      expect(cart.history[0], contains('Item added: 1'));
       cart.reset();
-      expect(cart.logs.length, 0);
+      expect(cart.history.length, 0);
     });
   });
 }
Index: ../flexi_cart/lib/src/cart_options/shipping_options.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/lib/src/cart_options/shipping_options.dart b/../flexi_cart/lib/src/cart_options/shipping_options.dart
new file mode 100644
--- /dev/null	(date 1748182124961)
+++ b/../flexi_cart/lib/src/cart_options/shipping_options.dart	(date 1748182124961)
@@ -0,0 +1,25 @@
+part of 'cart_options.dart';
+
+/// Defines shipping-related calculations and available methods.
+class ShippingOptions {
+  /// Creates a set of options for configuring
+  /// shipping behavior in a [FlexiCart].
+  const ShippingOptions({
+    this.shippingCostCalculator,
+    this.shippingLabel = 'Shipping',
+    this.availableMethods,
+  });
+
+  /// Function to calculate the total shipping cost.
+  final double Function(FlexiCart cart)? shippingCostCalculator;
+
+  /// Label to display for shipping charges.
+  final String shippingLabel;
+
+  /// Optional list of available shipping methods
+  /// (e.g. ['Standard', 'Express']).
+  final List<String>? availableMethods;
+
+  /// Computes the shipping cost or returns 0.0 if not defined.
+  double calculate(FlexiCart cart) => shippingCostCalculator?.call(cart) ?? 0.0;
+}
Index: ../flexi_cart/lib/src/cart_options/tax_options.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/lib/src/cart_options/tax_options.dart b/../flexi_cart/lib/src/cart_options/tax_options.dart
new file mode 100644
--- /dev/null	(date 1748182124971)
+++ b/../flexi_cart/lib/src/cart_options/tax_options.dart	(date 1748182124971)
@@ -0,0 +1,24 @@
+part of 'cart_options.dart';
+
+/// Handles tax-related calculations for the cart.
+class TaxOptions {
+  ///
+  const TaxOptions({
+    this.taxCalculator,
+    this.includeTaxInTotal = false,
+    this.taxLabel = 'Tax',
+  });
+
+  /// A function that computes the tax for a given [FlexiCart].
+  final double Function(FlexiCart cart)? taxCalculator;
+
+  /// Whether the computed tax should be included in the total price.
+  final bool includeTaxInTotal;
+
+  /// Label to display for tax in UI components.
+  final String taxLabel;
+
+  /// Calculates the tax amount using the [taxCalculator],
+  /// or returns 0 if not provided.
+  double calculate(FlexiCart cart) => taxCalculator?.call(cart) ?? 0.0;
+}
Index: ../flexi_cart/CHANGELOG.md
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>## 0.4.0+2\nupdates the following screenshots with improved image quality and file size:\n\n- `currencies.png`\n- `fresh_market.png`\n- `fresh_market_vertical.png`\n- `multi_cart.png`\n- `shine_beauty.png`\n- `shiny_eats.png`\nThe images have been processed to enhance clarity while reducing overall file sizes.\n\n## 0.4.0+1\n- update unit tests to use `CartCurrency` class\n- update README to include `CartCurrency` usage examples\n- update example app to demonstrate `CartCurrency` functionality\n\n## 0.4.0\nNew methods:\n- `applyExchangeRate(CartCurrency cartCurrency)`: Multiplies all item prices by the given exchange rate and sets the cart's currency.\n- `removeExchangeRate()`: Reverts item prices to their original values before the last exchange rate application.\n\nA new class `CartCurrency` is introduced to hold the currency code and exchange rate.\n\nTests have been added to verify:\n- Correct price multiplication after applying an exchange rate.\n- Restoration of original prices after removing an exchange rate.\n- No change if `removeExchangeRate` is called without a currency applied.\n- Price updates when multiple exchange rates are applied sequentially (the new rate is applied to the current prices, not the original ones).\n\n\n## 0.3.0\n\n- Added a private `_metadata` map to store key-value pairs.\n- Added a public getter `metadata` which returns an unmodifiable view of the `_metadata`.\n- Introduced `setMetadata(String key, dynamic value)` to add or update metadata entries.\n- Introduced `getMetadata<D>(String key)` to retrieve metadata values by key.\n- Introduced `removeMetadata(String key)` to remove metadata entries.\n- Ensured metadata is cleared during `reset()`.\n- Metadata operations can optionally trigger listener notifications.\n- The `reset()` method now clears metadata, lock status, and logs, providing a more complete reset.\n\n## 0.2.0\n\n- Added `CartInputTheme` as a `ThemeExtension` for consistent styling.\n- Introduced `CartInputStyle` to define visual and structural styles.\n- `CartInput` now supports `Axis.vertical` layout and custom border styles.\n- Updated `CartInput` to use `AnimatedPhysicalModel` for styled layout with elevation.\n- Added `BuildContext.safeRead` and `safeWatch` extensions for safer Provider access.\n- Updated tests to cover new theming capabilities and widget enhancements.\n- Updated dependencies in the example app.\n- Minor refactor in `mixins.dart` to prevent notifying listeners after disposal.\n- Corrected method name in README from `onCartChanged` to `onChange`.\n- introduces a new example application called `ShineShopApp` that showcases the usage of the\n  `flexi_cart`\n- introduces a new example application called `Shiny Eats` that showcases the usage of the\n  `flexi_cart`\n- introduces a new example application called `Shpping App` that showcases the usage of the\n  `flexi_cart`\n\n## 0.1.6\n\n- Update the README to reflect current usage examples.\n- Remove the deprecated `onCartChanged` method from `ICartPlugin`.\n- Clean up internal calls to the removed method.\n\n## 0.1.5\n\n- Introduced new callbacks in the `ICartPlugin` interface: `onChange`, `onError`, and `onClose`.\n  These provide plugins with more granular notifications about the cart's lifecycle and state\n  changes.\n- `onChange`: Called whenever a change occurs in the cart.\n- `onError`: Called when an error is thrown within the cart.\n- `onClose`: Called just before the cart is disposed.\n- The deprecated `onCartChanged` method will be removed soon.\n- Updated logging to include whether a listener was notified for cart actions.\n- Added tests to verify plugin notifications for the new callbacks.\n- Modified example to use the new plugin callbacks for printing cart logs, errors, and close events.\n\n## 0.1.4\n\n- Removed the `tax` and `discount` fields from the `CartItem` class in `cart_item.dart`.\n\n## 0.1.3\n\n- Adds support for locking and unlocking the cart to prevent accidental modifications.\n- Implements cart expiration with a set duration.\n- Introduces internal logging for debugging cart changes.\n- Implements Stream for state emission.\n- Adds a plugin architecture for extending cart functionality.\n- Includes a new `CartDiff` class to track differences between cart states.\n- Adds `setExpiration`, `lock`, `unlock`, `registerPlugin` and `logs` options.\n- Enhances the README.md file with new usage examples.\n- Adds unit tests for the new functionalities.\n\n## 0.1.2\n\n- **Update Links** update package metadata\n\n## 0.1.1\n\n- **License Update:** Changed the LICENSE file to the MIT License and updated the copyright to\n  abed-supy-io.\n- **Pubspec Update:** Updated the package description, version to 0.1.1, repository, issue tracker,\n  homepage and add `topics` to pubspec.yaml.\n- **Cart Input Formatter:** Modified the `formatEditUpdate` method in `cart_input_formatter.dart` to\n  handle empty strings and special characters like ',' and '.' more gracefully.\n- **Cart Test:** added `decrement` test case in `flexi_cart_test.dart`.\n- **Cart Input Widget:** Added a condition to `_onTextChanged` in `cart_input_widget.dart` to handle\n  zero quantity.\n- **Cart Input Widget:** remove unused  `_quantityNotifier.removeListener` in `dispose`.\n- **Cart Mixins:** remove unused `dispose` in `CartChangeNotifierDisposeMixin`\n- **FlexiCartTest**: added `resetItems` and  `reset` test case in `flexi_cart_test.dart`.\n- **example**: updated example app and add more test cases.\n- **FlexiCart**: exported `mixins.dart` in  `flexi_cart.dart`.\n- **FlexiCartInputTest**: fix type in `CartInput`.\n- **Added** `CONTRIBUTING.md` with guidelines for contributing.\n\n## 0.1.0\n\n- Introduced `CartQuantityInputFormatter` for quantity fields, allowing customizable decimal\n  precision.\n- Introduced `CartPriceInputFormatter` for price fields, allowing customizable decimal precision.\n- Added `CartInputNumberFormatter` as a base class to normalize Arabic digits, limit decimal places,\n  and constrain values.\n- Deprecated `QuantityInputFormatter`, advising to use `CartQuantityInputFormatter` instead.\n- Improved documentation.\n- Added various example on cart input.\n- Adds `description`, `metadata`, `tax`, and `discount` fields in the `ICartItem` model\n- Added `CartChangeNotifierDisposeMixin` to handle the disposal of `ChangeNotifier`.\n- Add flexi-cart formatter and mixin tests.\n- Add flexi-cart input test.\n\n## 0.0.9\n\n- Added `ChangeNotifierDisposeMixin` to prevent calling `notifyListeners()` after dispose.\n- Updated test cases to include `shouldNotifyListeners` option and assert `DateTime` type.\n\n## 0.0.8\n\n- Removed `removeNullQuantity` option & fixed cart logic.\n\n## 0.0.7\n\n- Added `removeNullQuantity` option.\n\n## 0.0.5\n\n- Allowed `,` in `CartInput` widget.\n- Added group methods in cart.\n\n## 0.0.4\n\n- Added `setNote()` & `setDeliveredAt()` functions instead of setters, with `shouldNotifyListeners`\n  toggle.\n\n## 0.0.3\n\n- Added `Ordable` property.\n\n## 0.0.2\n\n- Updated README file.\n\n## 0.0.1\n\n- Initial version.\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/CHANGELOG.md b/../flexi_cart/CHANGELOG.md
--- a/../flexi_cart/CHANGELOG.md	(revision 0a712f615a29b95b357fcc49e300042fa4b4dc7e)
+++ b/../flexi_cart/CHANGELOG.md	(date 1748186393618)
@@ -1,3 +1,7 @@
+## 0.5.0
+
+
+
 ## 0.4.0+2
 updates the following screenshots with improved image quality and file size:
 
Index: ../flexi_cart/test/cart/cart_options/behavior_options_test.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/test/cart/cart_options/behavior_options_test.dart b/../flexi_cart/test/cart/cart_options/behavior_options_test.dart
new file mode 100644
--- /dev/null	(date 1748182581397)
+++ b/../flexi_cart/test/cart/cart_options/behavior_options_test.dart	(date 1748182581397)
@@ -0,0 +1,179 @@
+import 'package:flexi_cart/flexi_cart.dart';
+import 'package:test/test.dart';
+
+import '../../helpers/mocks.dart';
+
+void main() {
+  group('FlexiCart with BehaviorOptions', () {
+    test('should prevent item addition via itemFilter', () {
+      final item = CartItem(
+        id: 'item1',
+        name: 'Test Item',
+        price: 100,
+        currency: 'USD',
+      );
+      final cart = FlexiCart<CartItem>(
+        options: CartOptions(
+          behaviorOptions: BehaviorOptions(
+            itemFilter: (item) => false,
+          ),
+        ),
+      )..add(item, shouldNotifyListeners: false);
+      expect(cart.isEmpty(), isTrue);
+    });
+
+    test('should override item price via priceResolver', () {
+      final item = CartItem(
+        id: 'id1',
+        name: 'Test Item',
+        price: 100,
+        currency: 'USD',
+        quantity: 1,
+      );
+      final cart = FlexiCart<CartItem>(
+        options: CartOptions(
+          behaviorOptions: BehaviorOptions(
+            priceResolver: (item) => 200.0,
+          ),
+        ),
+      )..add(item, shouldNotifyListeners: false);
+      expect(cart.items[item.id]?.price, equals(200.0));
+    });
+
+    test('should log messages when logging is enabled', () {
+      final logs = <String>[];
+
+      FlexiCart<CartItem>(
+        options: CartOptions(
+          behaviorOptions: BehaviorOptions(
+            enableLogging: true,
+            logger: logs.add,
+          ),
+        ),
+      ).setNote('Special note');
+      expect(logs.any((msg) => msg.contains('Set Note')), isTrue);
+    });
+
+    test('should NOT log messages when logging is disabled', () {
+      final logs = <String>[];
+      FlexiCart<CartItem>(
+        options: CartOptions(
+          behaviorOptions: BehaviorOptions(
+            logger: logs.add,
+          ),
+        ),
+      ).setNote('Hidden note');
+      expect(logs, isEmpty);
+    });
+    test('should prevent item addition via itemFilter', () {
+      final item = CartItem(
+        id: 'id1',
+        name: 'Test Item',
+        price: 100,
+        currency: 'USD',
+        quantity: 1,
+      );
+      final cart = FlexiCart<CartItem>(
+        options: CartOptions(
+          behaviorOptions: BehaviorOptions(
+            itemFilter: (item) => false,
+          ),
+        ),
+      )..add(item, shouldNotifyListeners: false);
+      expect(cart.isEmpty(), isTrue);
+    });
+    //
+    test('should allow item addition via itemFilter returning true', () {
+      final item = CartItem(
+        id: 'id1',
+        name: 'Test Item',
+        price: 100,
+        currency: 'USD',
+        quantity: 1,
+      );
+      final cart = FlexiCart<CartItem>(
+        options: CartOptions(
+          behaviorOptions: BehaviorOptions(
+            itemFilter: (item) => true,
+          ),
+        ),
+      )..add(item, shouldNotifyListeners: false);
+      expect(cart.isNotEmpty(), isTrue);
+    });
+    test('should call priceResolver even on updates', () {
+      final item = CartItem(
+        id: 'id1',
+        name: 'Test Item',
+        price: 100,
+        currency: 'USD',
+        quantity: 1,
+      );
+      final prices = <double>[];
+      final cart = FlexiCart<CartItem>(
+        options: CartOptions(
+          behaviorOptions: BehaviorOptions(
+            priceResolver: (item) {
+              prices.add(item.price);
+              return item.price + 50;
+            },
+          ),
+        ),
+      )
+        ..add(item, shouldNotifyListeners: false)
+        ..add(item..quantity = 3, shouldNotifyListeners: false);
+
+      expect(prices.length, equals(1));
+
+      expect(cart.items[item.id]?.price, equals(150.0));
+    });
+
+    test('combined behaviors: filter + priceResolver + logging', () {
+      final logs = <String>[];
+      final cart = FlexiCart<CartItem>(
+        options: CartOptions(
+          behaviorOptions: BehaviorOptions(
+            itemFilter: (item) {
+              if (item.price < 90) {
+                return false;
+              }
+              return true;
+            },
+            priceResolver: (item) => item.price + 10.0,
+            enableLogging: true,
+            logger: logs.add,
+          ),
+        ),
+      )
+        ..add(
+          CartItem(
+            id: 'valid',
+            name: 'Valid Item',
+            price: 100,
+            currency: 'USD',
+            quantity: 1,
+          ),
+          shouldNotifyListeners: false,
+        )
+        ..add(
+          CartItem(
+            id: 'filtered',
+            name: 'Too Cheap',
+            price: 20,
+            currency: 'USD',
+            quantity: 1,
+          ),
+          shouldNotifyListeners: false,
+        );
+
+      expect(cart.items.containsKey('valid'), isTrue);
+      expect(cart.items.containsKey('filtered'), isFalse);
+      expect(cart.items['valid']?.price, equals(110.0));
+      expect(
+        logs.any(
+          (element) => element.contains('Item added'),
+        ),
+        isTrue,
+      );
+    });
+  });
+}
Index: ../flexi_cart/lib/src/cart_input_formatter.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import 'package:flutter/services.dart';\n\n/// A mapping of Arabic numerals to Western numerals.\nconst _arabicNumbersMap = {\n  '٠': '0',\n  '١': '1',\n  '٢': '2',\n  '٣': '3',\n  '٤': '4',\n  '٥': '5',\n  '٦': '6',\n  '٧': '7',\n  '٨': '8',\n  '٩': '9',\n};\n\n/// A formatter for quantity input fields that supports Arabic numerals\n/// and limits decimal places to [fractionCount].\n///\n/// Inherits from [CartInputNumberFormatter] with default [fractionCount]\n/// set to 2.\nclass CartQuantityInputFormatter extends CartInputNumberFormatter {\n  /// Creates a [CartQuantityInputFormatter] with optional [max] value and\n  /// default [fractionCount] of 2.\n  CartQuantityInputFormatter({\n    super.fractionCount = 2,\n    super.max,\n  });\n}\n\n/// A formatter for price input fields that supports Arabic numerals\n/// and customizable decimal precision.\n///\n/// Inherits from [CartInputNumberFormatter].\nclass CartPriceInputFormatter extends CartInputNumberFormatter {\n  /// Creates a [CartPriceInputFormatter] with a required [fractionCount] and\n  /// optional [max] value.\n  CartPriceInputFormatter({\n    required super.fractionCount,\n    super.max,\n  });\n}\n\n/// A base formatter that normalizes Arabic digits, enforces numeric-only input,\n/// limits decimal precision, and optionally constrains values to a maximum.\nclass CartInputNumberFormatter extends TextInputFormatter {\n  /// Creates a [CartInputNumberFormatter].\n  ///\n  /// [fractionCount] controls the number of decimal digits allowed.\n  /// [max] sets the maximum valid numeric value.\n  CartInputNumberFormatter({this.fractionCount = 3, this.max = 99999999});\n\n  /// The maximum allowable value.\n  final num max;\n\n  /// The number of decimal places allowed.\n  final int fractionCount;\n\n  /// Transforms the user input to:\n  /// - Convert Arabic numerals to Western digits.\n  /// - Replace commas with periods.\n  /// - Enforce one decimal point max.\n  /// - Trim to [fractionCount] decimal places.\n  /// - Reject values over [max].\n  @override\n  TextEditingValue formatEditUpdate(\n    TextEditingValue oldValue,\n    TextEditingValue newValue,\n  ) {\n    if (newValue.text.isEmpty) return newValue;\n\n    final arabicNumbersRegx = RegExp('[٠-٩]');\n    final dotOrCommaRegx = RegExp('[.,]');\n\n    var input = newValue.text.replaceAllMapped(arabicNumbersRegx, (match) {\n      return _arabicNumbersMap[match.group(0)!]!;\n    }).replaceAll(',', '.');\n\n    if (dotOrCommaRegx.allMatches(input).length > 1 ||\n        input.contains(RegExp('[^0-9.]'))) {\n      return oldValue;\n    }\n\n    if (input.startsWith('.')) input = '0$input';\n\n    final parsed = double.tryParse(input);\n    if (parsed == null || parsed > max) return oldValue;\n\n    final parts = input.split('.');\n    if (parts.length == 2 && parts[1].length > fractionCount) {\n      input = '${parts[0]}.${parts[1].substring(0, fractionCount)}';\n    }\n\n    return TextEditingValue(\n      text: input,\n      selection: TextSelection.collapsed(offset: input.length),\n    );\n  }\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/lib/src/cart_input_formatter.dart b/../flexi_cart/lib/src/cart_input_formatter.dart
--- a/../flexi_cart/lib/src/cart_input_formatter.dart	(revision 0a712f615a29b95b357fcc49e300042fa4b4dc7e)
+++ b/../flexi_cart/lib/src/cart_input_formatter.dart	(date 1748147617743)
@@ -67,7 +67,9 @@
     TextEditingValue oldValue,
     TextEditingValue newValue,
   ) {
-    if (newValue.text.isEmpty) return newValue;
+    if (newValue.text.isEmpty) {
+      return newValue;
+    }
 
     final arabicNumbersRegx = RegExp('[٠-٩]');
     final dotOrCommaRegx = RegExp('[.,]');
@@ -81,10 +83,14 @@
       return oldValue;
     }
 
-    if (input.startsWith('.')) input = '0$input';
+    if (input.startsWith('.')) {
+      input = '0$input';
+    }
 
     final parsed = double.tryParse(input);
-    if (parsed == null || parsed > max) return oldValue;
+    if (parsed == null || parsed > max) {
+      return oldValue;
+    }
 
     final parts = input.split('.');
     if (parts.length == 2 && parts[1].length > fractionCount) {
Index: ../flexi_cart/lib/src/cart_input_widget.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import 'package:flexi_cart/flexi_cart.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter/services.dart';\nimport 'package:provider/provider.dart';\n\n/// A highly customizable and reusable quantity input widget for cart items.\n///\n/// The `CartInput<T>` widget allows users to input and adjust\n/// the quantity of an item\n/// in a shopping cart, where the item implements [ICartItem].\n/// It integrates with the\n/// `FlexiCart` package to provide seamless cart updates,\n/// state syncing, and user interaction.\n///\n/// ### Features\n/// - Supports both integer and fractional quantities\n/// - Customizable input field and button layout (vertical or horizontal)\n/// - Optional increment/decrement buttons\n/// - Integration with [FlexiCart] for cart updates\n/// - Configurable max quantity, input formatting, decimal digit limits\n/// - Callback for external state updates using [onChanged]\n/// - Displays 0 as a placeholder based on [showZeroQty]\n/// - Supports theming through [CartInputStyle] and [CartInputTheme]\n///\n/// ### Parameters:\n/// - `item` *(required)*: The cart item of type `T`\n/// - `initialValue`: Overrides the quantity from the cart\n/// - `onChanged`: Callback triggered when the quantity is modified\n/// - `hideButtons`: Whether to hide the increment/decrement buttons\n/// - `showZeroQty`: Whether to show \"0\" instead of an empty field for null/zero quantity\n/// - `decimalDigits`: Number of allowed digits after decimal\n/// - `maxQuantity`: Maximum allowable quantity\n/// - `inputDecoration`: Custom decoration for the input field\n/// - `textAlign`: Text alignment within the field\n/// - `enabled`: Enables or disables interaction with the input and buttons\n/// - `inputFormatter`: Custom input formatter, defaults\n/// to [CartQuantityInputFormatter]\n/// - `axis`: Layout direction (horizontal or vertical)\n/// - `style`: Themed style customization\n/// - `size`: Size of buttons and vertical layout container\n/// - `stepper`: Increment/decrement step value\n/// - `keyboardType`: Optional keyboard input type\n/// - `elevation`: Elevation of the container\n///\n/// ### Example:\n/// ```dart\n/// CartInput<MyCartItem>(\n///   item: item,\n///   decimalDigits: 2,\n///   maxQuantity: 100,\n///   onChanged: (updatedItem) {\n///     print(\"Updated quantity: ${updatedItem.quantity}\");\n///   },\n/// )\n/// ```\n///\n/// ### Notes:\n/// - Automatically adds the item to the cart if [initialValue]\n/// is provided and the item\n///   doesn't exist yet.\n/// - Rebuilds internally when cart values change externally.\n///\n/// ### Internal Structure:\n/// - Uses a [TextEditingController] to manage manual text input\n/// - Uses [ValueNotifier] for reactive quantity changes\n/// - Listens for post-frame callbacks and dependency changes to sync state\n/// - Uses [AnimatedPhysicalModel] for styled layout with optional borders\n/// and elevation\n///\n/// ### Extensions:\n/// - `double.betweenZeroAndOne`: Utility to check if a double\n/// is between 0 and 1\n/// - `BuildContext.safeRead` / `safeWatch`: Safely access Provider without risk of errors\n\n/// A generic quantity input widget for cart items implementing [ICartItem].\n///\n/// This widget allows users to modify item quantity using text input\n/// and optional stepper buttons.\n/// It integrates with [FlexiCart] for cart updates and\n/// supports extensive customization options.\nclass CartInput<T extends ICartItem> extends StatefulWidget {\n  /// CartInput Constructor\n  const CartInput({\n    required this.item,\n    super.key,\n    this.onChanged,\n    this.hideButtons = false,\n    this.showZeroQty = false,\n    this.decimalDigits = 2,\n    this.maxQuantity = 999999,\n    this.inputDecoration,\n    this.textAlign = TextAlign.center,\n    this.enabled = true,\n    this.inputFormatter,\n    this.initialValue,\n    this.axis = Axis.horizontal,\n    this.style,\n    this.size = 35.0,\n    this.stepper = 1,\n    this.elevation,\n    this.keyboardType,\n  });\n\n  /// The cart item to be edited.\n  final T item;\n\n  /// Overrides the quantity in cart temporarily with a preset value.\n  final double? initialValue;\n\n  /// Callback when the quantity changes.\n  final ValueChanged<T>? onChanged;\n\n  /// If true, hides the increment and decrement buttons.\n  final bool hideButtons;\n\n  /// If true, shows \"0\" instead of clearing the field when quantity is zero.\n  final bool showZeroQty;\n\n  /// Maximum allowed decimal places.\n  final int decimalDigits;\n\n  /// Maximum allowable quantity.\n  final int maxQuantity;\n\n  /// Decoration for the input field.\n  final InputDecoration? inputDecoration;\n\n  /// How text is aligned inside the input.\n  final TextAlign textAlign;\n\n  /// Enables/disables input field and buttons.\n  final bool enabled;\n\n  /// Custom input formatter. Defaults to [CartQuantityInputFormatter] if null.\n  final TextInputFormatter? inputFormatter;\n\n  /// Layout orientation (horizontal or vertical).\n  final Axis axis;\n\n  /// Optional style customization.\n  final CartInputStyle? style;\n\n  /// Width/height of buttons depending on axis.\n  final double size;\n\n  /// Quantity change step value.\n  final int stepper;\n\n  /// Optional custom keyboard type.\n  final TextInputType? keyboardType;\n\n  /// Container elevation shadow.\n  final double? elevation;\n\n  @override\n  State<CartInput<T>> createState() => _CartInputState<T>();\n}\n\nclass _CartInputState<T extends ICartItem> extends State<CartInput<T>> {\n  late final FlexiCart _cart;\n  late final TextEditingController _controller;\n  late final ValueNotifier<double?> _quantityNotifier;\n\n  /// Returns true if layout is vertical.\n  bool get isVertical => widget.axis == Axis.vertical;\n\n  @override\n  void initState() {\n    super.initState();\n    _cart = readCart();\n    _controller = TextEditingController();\n    _quantityNotifier = ValueNotifier<double?>(widget.initialValue);\n\n    // Initialize after first frame render.\n    WidgetsBinding.instance.addPostFrameCallback((_) {\n      _initializeQuantity();\n    });\n  }\n\n  @override\n  void didChangeDependencies() {\n    super.didChangeDependencies();\n\n    // Resync quantity if it changed from outside.\n    final inCartQuantity = watchCart().items[widget.item.key]?.quantity;\n    if (inCartQuantity != _quantity) {\n      _initializeQuantity();\n    }\n  }\n\n  /// Reads the cart with fallback.\n  FlexiCart readCart() {\n    return context.safeRead<FlexiCart<T>>() ?? context.read<FlexiCart>();\n  }\n\n  /// Watches the cart for changes with fallback.\n  FlexiCart watchCart() {\n    return context.safeWatch<FlexiCart<T>>() ?? context.watch<FlexiCart>();\n  }\n\n  /// Initializes quantity from cart or initialValue.\n  void _initializeQuantity() {\n    final quantity =\n        widget.initialValue ?? _cart.items[widget.item.key]?.quantity;\n\n    _quantityNotifier\n      ..removeListener(_onChanged)\n      ..value = quantity;\n\n    _updateText();\n    _quantityNotifier.addListener(_onChanged);\n\n    // Add to cart if initial value is set and item doesn't exist.\n    if (widget.initialValue != null &&\n        _cart.items[widget.item.key]?.quantity == null) {\n      _cart.add(\n        widget.item..quantity = widget.initialValue,\n        shouldNotifyListeners: false,\n      );\n    }\n  }\n\n  /// Current quantity (nullable).\n  double? get _quantity => _quantityNotifier.value;\n\n  /// Non-null quantity fallback to 0.\n  double get _notNullQuantity => _quantity ?? 0;\n\n  /// Setter for quantity notifier.\n  set _quantity(double? value) => _quantityNotifier.value = value;\n\n  /// Fires when quantity changes (input or buttons).\n  void _onChanged() {\n    final updatedItem = widget.item..quantity = _quantity;\n    widget.onChanged?.call(updatedItem);\n    _cart.add(updatedItem);\n  }\n\n  /// Handles manual input changes.\n  void _onTextChanged(String value) {\n    _quantity = value.isNotEmpty ? double.tryParse(value) : null;\n\n    // Show \"0\" if enabled and value is cleared.\n    if (widget.showZeroQty && _quantity == null) {\n      _updateText();\n    }\n  }\n\n  /// Decreases quantity by stepper or 0.05 for small values.\n  void _onDecreased() {\n    final newQty = _notNullQuantity <= 1\n        ? _underOneQuantity(inc: false)\n        : _notNullQuantity - widget.stepper;\n    _quantity = newQty;\n    _updateText();\n  }\n\n  /// Increases quantity by stepper or 0.05 for small values.\n  void _onIncreased() {\n    final newQty = _notNullQuantity.betweenZeroAndOne\n        ? _underOneQuantity()\n        : _notNullQuantity + widget.stepper;\n    _quantity = newQty;\n    _updateText();\n  }\n\n  /// Adjusts value by ±0.05 when between 0 and 1.\n  double _underOneQuantity({bool inc = true}) {\n    final adjustment = inc ? 50 : -50;\n    return ((_notNullQuantity * 1000) + adjustment) / 1000;\n  }\n\n  /// Updates input text field from quantity.\n  void _updateText() {\n    if (_notNullQuantity == 0 && widget.showZeroQty || _notNullQuantity > 0) {\n      _controller.text = _notNullQuantity.toStringAsFixed(widget.decimalDigits);\n    } else {\n      _controller.clear();\n    }\n  }\n\n  /// Wraps a widget with quantity listener.\n  Widget _quantityNotifierBuilder(Widget child) {\n    return ValueListenableBuilder<double?>(\n      valueListenable: _quantityNotifier,\n      builder: (_, __, ___) => child,\n    );\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    final theme = Theme.of(context);\n    final style = widget.style ?? CartInputTheme.of(context);\n\n    final decoration = widget.inputDecoration ??\n        (isVertical\n            ? const InputDecoration(border: InputBorder.none)\n            : const InputDecoration(\n                isDense: true,\n                hintText: '--',\n              ));\n\n    final borderRadius = BorderRadius.all(\n      style.radius,\n    );\n\n    // The central input field\n    final child = Container(\n      alignment: Alignment.center,\n      width: isVertical ? widget.size * 2 : double.infinity,\n      child: TextField(\n        key: ValueKey(widget.item.key),\n        controller: _controller,\n        enabled: widget.enabled,\n        cursorColor: style.activeForegroundColor,\n        keyboardType: widget.keyboardType ??\n            TextInputType.numberWithOptions(decimal: widget.decimalDigits > 0),\n        inputFormatters: [\n          FilteringTextInputFormatter.deny(RegExp(r'\\s|-')),\n          widget.inputFormatter ??\n              CartQuantityInputFormatter(\n                max: widget.maxQuantity,\n                fractionCount: widget.decimalDigits,\n              ),\n        ],\n        onChanged: _onTextChanged,\n        style: style.textStyle ??\n            (_quantity != null && _quantity! > 0\n                ? theme.textTheme.bodyMedium\n                    ?.copyWith(color: theme.primaryColor)\n                : theme.textTheme.bodyMedium),\n        textAlign: widget.textAlign,\n        decoration: decoration,\n      ),\n    );\n\n    // Create button + input + button layout\n    final children = <Widget>[\n      if (!widget.hideButtons)\n        _quantityNotifierBuilder(\n          IconButton(\n            onPressed: widget.enabled ? _onIncreased : null,\n            icon: Icon(\n              style.iconPlus ?? Icons.add_circle_outline_outlined,\n              color: style.iconTheme.color,\n            ),\n          ),\n        ),\n      if (isVertical) child else Expanded(child: child),\n      if (!widget.hideButtons)\n        _quantityNotifierBuilder(\n          IconButton(\n            onPressed: widget.enabled ? _onDecreased : null,\n            icon: Icon(\n              style.iconPlus ?? Icons.remove_circle_outline_outlined,\n              color: style.iconTheme.color,\n            ),\n          ),\n        ),\n    ];\n\n    // Optional border wrapping\n    if (style.border != null) {\n      if (isVertical) {\n        children[0] = Container(\n          decoration: BoxDecoration(\n            border: Border(bottom: style.border!.top),\n          ),\n          child: children[0],\n        );\n        children[2] = Container(\n          decoration: BoxDecoration(\n            border: Border(top: style.border!.top),\n          ),\n          child: children[2],\n        );\n      } else {\n        children[0] = Container(\n          decoration: BoxDecoration(\n            border: Border(left: style.border!.top),\n          ),\n          child: children[0],\n        );\n        children[2] = Container(\n          decoration: BoxDecoration(\n            border: Border(right: style.border!.top),\n          ),\n          child: children[2],\n        );\n      }\n    }\n\n    // Main interactive layout with elevation\n    Widget body = AnimatedPhysicalModel(\n      duration: const Duration(milliseconds: 300),\n      curve: Curves.easeIn,\n      shape: style.shape,\n      borderRadius: borderRadius,\n      shadowColor: style.shadowColor ?? const Color.fromARGB(255, 0, 0, 0),\n      color: style.activeBackgroundColor,\n      elevation: widget.elevation ?? style.elevation,\n      child: isVertical\n          ? Column(mainAxisSize: MainAxisSize.min, children: children.toList())\n          : Row(\n              mainAxisSize: MainAxisSize.min,\n              children: children.reversed.toList(),\n            ),\n    );\n\n    // Apply outer border container if defined\n    if (style.border != null) {\n      body = AnimatedContainer(\n        duration: const Duration(milliseconds: 300),\n        curve: Curves.easeIn,\n        decoration: BoxDecoration(\n          border: style.border,\n          borderRadius: borderRadius,\n        ),\n        child: body,\n      );\n    }\n\n    return body;\n  }\n\n  @override\n  void dispose() {\n    _quantityNotifier.dispose();\n    _controller.dispose();\n    super.dispose();\n  }\n}\n\n/// Extension for checking if a value is between 0 and 1.\nextension on double {\n  bool get betweenZeroAndOne => this > 0 && this < 1;\n}\n\n/// Extension on [BuildContext] for safe Provider access.\n///\n/// These avoid exceptions if provider is not available in the tree.\nextension on BuildContext {\n  T? safeWatch<T>() {\n    if (hasProvider<T>()) return watch<T>();\n    return null;\n  }\n\n  T? safeRead<T>() {\n    if (hasProvider<T>()) return read<T>();\n    return null;\n  }\n\n  bool hasProvider<T>() {\n    try {\n      read<T>();\n      return true;\n    } on ProviderNotFoundException catch (_) {\n      return false;\n    }\n  }\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/lib/src/cart_input_widget.dart b/../flexi_cart/lib/src/cart_input_widget.dart
--- a/../flexi_cart/lib/src/cart_input_widget.dart	(revision 0a712f615a29b95b357fcc49e300042fa4b4dc7e)
+++ b/../flexi_cart/lib/src/cart_input_widget.dart	(date 1748181661428)
@@ -441,12 +441,16 @@
 /// These avoid exceptions if provider is not available in the tree.
 extension on BuildContext {
   T? safeWatch<T>() {
-    if (hasProvider<T>()) return watch<T>();
+    if (hasProvider<T>()) {
+      return watch<T>();
+    }
     return null;
   }
 
   T? safeRead<T>() {
-    if (hasProvider<T>()) return read<T>();
+    if (hasProvider<T>()) {
+      return read<T>();
+    }
     return null;
   }
 
Index: ../flexi_cart/test/cart/cart_options/discount_options_test.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/test/cart/cart_options/discount_options_test.dart b/../flexi_cart/test/cart/cart_options/discount_options_test.dart
new file mode 100644
--- /dev/null	(date 1748182124998)
+++ b/../flexi_cart/test/cart/cart_options/discount_options_test.dart	(date 1748182124998)
@@ -0,0 +1,117 @@
+import 'package:flexi_cart/flexi_cart.dart';
+import 'package:flutter_test/flutter_test.dart';
+
+import '../../helpers/mocks.dart';
+
+void main() {
+  group('DiscountOptions', () {
+    test('returns 0.0 when no discountCalculator is provided', () {
+      const discount = DiscountOptions();
+      final fakeCart = FlexiCart();
+      expect(discount.calculate(fakeCart), 0.0);
+    });
+
+    test('applies discountCalculator correctly', () {
+      final discount = DiscountOptions(
+        discountCalculator: (cart) => 10.0,
+      );
+
+      final fakeCart = FlexiCart();
+
+      expect(discount.calculate(fakeCart), 10.0);
+    });
+
+    test('returns custom label', () {
+      const discount = DiscountOptions(discountLabel: 'Summer Sale');
+      expect(discount.discountLabel, 'Summer Sale');
+    });
+
+    test('discountCalculator can depend on cart data', () {
+      final cart = FlexiCart()
+        ..add(MockItem(price: 10, id: 'id', name: 'name')); // Total = 10.0
+
+      final discount = DiscountOptions(
+        discountCalculator: (cart) => cart.totalPrice() * 0.1,
+      );
+      expect(discount.calculate(cart), 1.0);
+    });
+
+    test('returns 0.0 for empty cart with discountCalculator', () {
+      final discount = DiscountOptions(
+        discountCalculator: (cart) => cart.totalPrice() * 0.2,
+      );
+      final cart = FlexiCart(); // Total = 0.0
+      expect(discount.calculate(cart), 0.0);
+    });
+
+    test('handles discount greater than cart total', () {
+      final cart = FlexiCart()
+        ..add(MockItem(price: 10, id: 'id', name: 'name'));
+
+      final discount = DiscountOptions(
+        discountCalculator: (c) => 20.0,
+      );
+      expect(discount.calculate(cart), 20.0);
+    });
+
+    test('handles negative discount (e.g. penalty)', () {
+      final cart = FlexiCart()
+        ..add(MockItem(price: 10, id: 'id', name: 'name'));
+
+      final discount = DiscountOptions(
+        discountCalculator: (c) => -5.0,
+        allowNegative: true,
+      );
+
+      expect(
+        discount.calculate(cart),
+        -5.0,
+      );
+    });
+
+    test('handles very large discount', () {
+      final cart = FlexiCart()
+        ..add(MockItem(price: 1000000, id: 'id', name: 'name'));
+      final discount = DiscountOptions(
+        discountCalculator: (c) => 999999.99,
+      );
+
+      expect(discount.calculate(cart), closeTo(999999.99, 0.001));
+    });
+
+    test('handles floating point precision correctly', () {
+      final cart = FlexiCart()
+        ..add(
+          MockItem(price: 0.1, id: 'id', name: 'name'),
+        );
+      final discount = DiscountOptions(
+        discountCalculator: (c) => c.totalPrice() * 0.3,
+      );
+
+      expect(discount.calculate(cart), closeTo(0.03, 0.0001));
+    });
+
+    test('custom label remains correct regardless of logic', () {
+      final discount = DiscountOptions(
+        discountLabel: '💰 Cashback!',
+        discountCalculator: (cart) => 2.5,
+      );
+
+      final cart = FlexiCart();
+      expect(discount.discountLabel, '💰 Cashback!');
+      expect(discount.calculate(cart), 2.5);
+    });
+    test('check total with discount value', () {
+      final cart = FlexiCart(
+        options: CartOptions(
+          discountOptions: DiscountOptions(
+            discountLabel: '💰 Cashback!',
+            discountCalculator: (cart) => cart.totalPrice() * 0.25,
+          ),
+        ),
+      )..add(MockItem(price: 10, id: 'id', name: 'name'));
+      expect(cart.discount(), 2.5);
+      expect(cart.getTotalAfterDiscount(), 7.5);
+    });
+  });
+}
Index: ../flexi_cart/test/cart/cart_options/validator_options_test.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/test/cart/cart_options/validator_options_test.dart b/../flexi_cart/test/cart/cart_options/validator_options_test.dart
new file mode 100644
--- /dev/null	(date 1748187602134)
+++ b/../flexi_cart/test/cart/cart_options/validator_options_test.dart	(date 1748187602134)
@@ -0,0 +1,194 @@
+import 'package:flexi_cart/flexi_cart.dart';
+import 'package:flutter_test/flutter_test.dart';
+
+import '../../helpers/mocks.dart';
+
+void main() {
+  group('FlexiCart validation', () {
+    test('CartValidator returns error if total quantity is too low', () {
+      final item = CartItem(
+        id: '1',
+        name: 'Test Item',
+        price: 10,
+        quantity: 2,
+        currency: 'USD',
+      );
+
+      final cart = FlexiCart<CartItem>(
+        options: CartOptions(
+          validatorOptions: ValidatorOptions(
+            validators: [
+              CartValidators.cartMinLength(1),
+              CartValidators.cartMinTotal(100),
+            ],
+          ),
+        ),
+      );
+
+      expect(cart.validate(), {
+        'minLength': 'Minimum item types required is 1',
+        'minTotal': r'Minimum total price is $100.00',
+      });
+
+      cart.add(item);
+
+      expect(
+        cart.validate(),
+        {'minTotal': r'Minimum total price is $100.00'},
+      );
+    });
+
+    test('Multiple validators and promo code check work together', () {
+      final item1 = CartItem(
+        id: 'A',
+        name: 'Test Item',
+        price: 20,
+        quantity: 1,
+        currency: 'USD',
+      );
+      final item2 = CartItem(
+        id: 'B',
+        name: 'Test Item',
+        price: 10,
+        quantity: 2,
+        currency: 'USD',
+      );
+      final cart = FlexiCart(
+        options: CartOptions(
+          validatorOptions: ValidatorOptions(
+            validators: [CartValidators.cartMaxTotal(50)],
+            promoCode: 'BADCODE',
+            promoCodeValidator: (code) =>
+                code == 'GOODCODE' ? null : 'Promo code error',
+          ),
+        ),
+      )
+        ..add(item1)
+        ..add(item2);
+
+      final errors = cart.options.validatorOptions.validate(cart);
+      expect(
+        errors,
+        equals(
+          {
+            'minTotal': r'Minimum total price is $50.00',
+            'promoCode': 'Promo code error',
+          },
+        ),
+      );
+      expect(
+        errors,
+        equals(
+          {
+            'minTotal': r'Minimum total price is $50.00',
+            'promoCode': 'Promo code error',
+          },
+        ),
+      );
+    });
+
+    test('cartNotEmpty returns error when cart is empty', () {
+      final cart = FlexiCart();
+
+      final validator = CartValidators.cartNotEmpty();
+      final errors = validator.validate(cart);
+
+      expect(errors, isNotNull);
+      expect(errors!.containsKey(CartValidatorMessage.emptyCart), isTrue);
+    });
+
+    test('cartNotEmpty returns null when cart has items', () {
+      final cart = FlexiCart();
+      final item1 = CartItem(
+        id: 'A',
+        name: 'Test Item',
+        price: 20,
+        quantity: 1,
+        currency: 'USD',
+      );
+      cart.add(item1);
+      final validator = CartValidators.cartNotEmpty();
+      final errors = validator.validate(cart);
+
+      expect(errors, isNull);
+    });
+
+    test('cartMinTotal returns error when total below minimum', () {
+      final cart = FlexiCart();
+      final item1 = CartItem(
+        id: 'A',
+        name: 'Test Item',
+        price: 20,
+        quantity: 1,
+        currency: 'USD',
+      );
+      cart.add(item1);
+      final validator = CartValidators.cartMinTotal(50);
+      final errors = validator.validate(cart);
+
+      expect(errors, isNotNull);
+      expect(errors!.containsKey(CartValidatorMessage.minTotal), isTrue);
+    });
+
+    test('cartMinTotal returns null when total meets minimum', () {
+      final cart = FlexiCart();
+      final item1 = CartItem(
+        id: 'A',
+        name: 'Test Item',
+        price: 50,
+        quantity: 1,
+        currency: 'USD',
+      );
+      cart.add(item1);
+
+      final validator = CartValidators.cartMinTotal(50);
+      final errors = validator.validate(cart);
+
+      expect(errors, isNull);
+    });
+
+    test('cartMaxItemCount returns error when items exceed max', () {
+      final cart = FlexiCart();
+      for (var i = 0; i < 3; i++) {
+        final item = CartItem(
+          id: 'item$i',
+          name: 'Test Item $i',
+          price: 10,
+          quantity: 1,
+          currency: 'USD',
+        );
+        cart.add(item);
+      }
+
+      final validator = CartValidators.cartMaxItemCount(2);
+      final errors = validator.validate(cart);
+
+      expect(errors, isNotNull);
+      expect(errors!.containsKey(CartValidatorMessage.maxItems), isTrue);
+    });
+
+    test('cartMaxItemCount returns null when item count within max', () {
+      final cart = FlexiCart();
+      final item1 = CartItem(
+        id: 'A',
+        name: 'Test Item',
+        price: 50,
+        quantity: 10,
+        currency: 'USD',
+      );
+      cart.add(item1);
+      final validator = CartValidators.cartMaxItemCount(10);
+      final errors = validator.validate(cart);
+
+      expect(errors, isNull);
+    });
+
+    test('cartRequiredField returns null when required field present', () {
+      final cart = FlexiCart()..setMetadataEntry('email', 'user@example.com');
+      final validator = CartValidators.cartRequiredField('email');
+      final errors = validator.validate(cart);
+
+      expect(errors, isNull);
+    });
+  });
+}
Index: ../flexi_cart/test/cart/cart_options/cart_options_test.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/test/cart/cart_options/cart_options_test.dart b/../flexi_cart/test/cart/cart_options/cart_options_test.dart
new file mode 100644
--- /dev/null	(date 1748182581390)
+++ b/../flexi_cart/test/cart/cart_options/cart_options_test.dart	(date 1748182581390)
@@ -0,0 +1,1 @@
+export 'behavior_options_test.dart';
Index: ../flexi_cart/lib/src/cart_validators/cart_validator_message.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/lib/src/cart_validators/cart_validator_message.dart b/../flexi_cart/lib/src/cart_validators/cart_validator_message.dart
new file mode 100644
--- /dev/null	(date 1748187309105)
+++ b/../flexi_cart/lib/src/cart_validators/cart_validator_message.dart	(date 1748187309105)
@@ -0,0 +1,64 @@
+part of 'cart_validators.dart';
+
+/// A utility class that defines standard keys
+/// used for cart validation messages.
+///
+/// These keys are intended to be used in conjunction with cart validators
+/// to provide structured, consistent error messaging throughout the cart
+/// system.
+///
+/// Example usage:
+///
+/// ```dart
+/// final errors = cart.validateCheckout();
+/// final message = errorMessages[CartValidatorMessage.emptyCart];
+/// ```
+class CartValidatorMessage {
+  /// Indicates that a required value was not provided.
+  ///
+  /// Typically used when a field or value is missing.
+  static const String required = 'required';
+
+  /// Indicates that a value does not meet the minimum allowed value.
+  static const String min = 'min';
+
+  /// Indicates that a value exceeds the maximum allowed value.
+  static const String max = 'max';
+
+  /// Indicates that a value's length is less than the minimum allowed.
+  static const String minLength = 'minLength';
+
+  /// Indicates that a value's length exceeds the maximum allowed.
+  static const String maxLength = 'maxLength';
+
+  /// Indicates that a value is not equal to an expected value.
+  static const String equals = 'equals';
+
+  /// Indicates that a value does not contain a required element.
+  static const String contains = 'contains';
+
+  // -----------------------------
+  // Cart-specific validation keys
+  // -----------------------------
+
+  /// Indicates that the cart is empty and must contain at least one item.
+  static const String emptyCart = 'emptyCart';
+
+  /// Indicates that the total value of the cart is below the required minimum.
+  static const String minTotal = 'minTotal';
+
+  /// Indicates that the total value of the cart exceeds the allowed maximum.
+  static const String maxTotal = 'maxTotal';
+
+  /// Indicates that the number of items in the cart exceeds the allowed limit.
+  static const String maxItems = 'maxItems';
+
+  /// Indicates that one or more items in the cart are out of stock.
+  static const String outOfStock = 'outOfStock';
+
+  /// Indicates that an item in the cart is invalid or malformed.
+  static const String invalidItem = 'invalidItem';
+
+  /// Indicates that an item is no longer available or cannot be purchased.
+  static const String unavailableItem = 'unavailableItem';
+}
Index: ../flexi_cart/lib/src/cart_validators/cart_min_total_validator.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/lib/src/cart_validators/cart_min_total_validator.dart b/../flexi_cart/lib/src/cart_validators/cart_min_total_validator.dart
new file mode 100644
--- /dev/null	(date 1748186178582)
+++ b/../flexi_cart/lib/src/cart_validators/cart_min_total_validator.dart	(date 1748186178582)
@@ -0,0 +1,21 @@
+part of 'cart_validators.dart';
+
+/// Validator that checks if the number of different item types in the cart
+class CartMinTotalValidator extends ICartValidator {
+  /// exceeds a specified minimum total price.
+  CartMinTotalValidator(this.minAmount);
+
+  /// Creates an instance of [CartMinTotalValidator] with the specified
+  final double minAmount;
+
+  @override
+  Map<String, dynamic>? validate(FlexiCart cart) {
+    if (cart.totalPrice() < minAmount) {
+      return {
+        CartValidatorMessage.minTotal:
+            'Minimum total price is \$${minAmount.toStringAsFixed(2)}',
+      };
+    }
+    return null;
+  }
+}
Index: ../flexi_cart/lib/src/cart_validators/i_cart_validator.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/lib/src/cart_validators/i_cart_validator.dart b/../flexi_cart/lib/src/cart_validators/i_cart_validator.dart
new file mode 100644
--- /dev/null	(date 1748182581385)
+++ b/../flexi_cart/lib/src/cart_validators/i_cart_validator.dart	(date 1748182581385)
@@ -0,0 +1,23 @@
+part of 'cart_validators.dart';
+
+/// Interface for validating a [FlexiCart] instance.
+abstract class ICartValidator {
+  /// Creates an instance of the validator.
+  const ICartValidator();
+
+  /// Validates the provided [FlexiCart] instance.
+  ///
+  /// Returns a [Map] of validation errors if validation fails,
+  /// where each key is a validation error code (string),
+  /// and the value is either an error message or related data.
+  ///
+  /// Returns `null` if the cart is valid.
+  Map<String, dynamic>? validate(FlexiCart cart);
+
+  /// Calls [validate] to perform validation on the provided [FlexiCart].
+  ///
+  /// This method allows the validator to be used as a callable.
+  ///
+  /// Returns a map of validation errors or `null`.
+  Map<String, dynamic>? call(FlexiCart cart) => validate(cart);
+}
Index: ../flexi_cart/lib/src/cart_validators/cart_required_field_validator.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/lib/src/cart_validators/cart_required_field_validator.dart b/../flexi_cart/lib/src/cart_validators/cart_required_field_validator.dart
new file mode 100644
--- /dev/null	(date 1748186178586)
+++ b/../flexi_cart/lib/src/cart_validators/cart_required_field_validator.dart	(date 1748186178586)
@@ -0,0 +1,21 @@
+part of 'cart_validators.dart';
+
+/// Validator that checks if the number of different item types in the cart
+class CartRequiredFieldValidator extends ICartValidator {
+  /// exceeds a specified minimum total price.
+  CartRequiredFieldValidator(this.fieldName);
+
+  /// Creates an instance of [CartRequiredFieldValidator] with the specified
+  final String fieldName;
+
+  @override
+  Map<String, dynamic>? validate(FlexiCart cart) {
+    final value = cart.metadata[fieldName];
+    if (value == null || (value is String && value.trim().isEmpty)) {
+      return {
+        CartValidatorMessage.required: "Field '$fieldName' is required",
+      };
+    }
+    return null;
+  }
+}
Index: ../flexi_cart/lib/src/cart_validators/cart_contains_validator.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/lib/src/cart_validators/cart_contains_validator.dart b/../flexi_cart/lib/src/cart_validators/cart_contains_validator.dart
new file mode 100644
--- /dev/null	(date 1748182124969)
+++ b/../flexi_cart/lib/src/cart_validators/cart_contains_validator.dart	(date 1748182124969)
@@ -0,0 +1,22 @@
+part of 'cart_validators.dart';
+
+/// Validator that checks if the cart contains a specific item
+class CartContainsValidator extends ICartValidator {
+  /// Creates an instance of [CartContainsValidator] with the required item ID.
+  CartContainsValidator(this.requiredItemId);
+
+  /// The ID of the item that must be present in the cart.
+  final String requiredItemId;
+
+  @override
+  Map<String, dynamic>? validate(FlexiCart cart) {
+    final containsItem =
+        cart.itemsList.any((item) => item.id == requiredItemId);
+    if (!containsItem) {
+      return {
+        CartValidatorMessage.contains: 'Cart must contain item $requiredItemId',
+      };
+    }
+    return null;
+  }
+}
Index: ../flexi_cart/example/lib/main.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import 'dart:math';\nimport 'package:flexi_cart/flexi_cart.dart';\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport 'package:random_name_generator/random_name_generator.dart';\nimport 'package:uuid/uuid.dart';\n\nclass CartItem extends ICartItem {\n  CartItem({\n    required super.id,\n    required super.name,\n    required super.price,\n    super.quantity = 1.0,\n    super.group = 'test-group',\n  });\n}\n\nvoid main() {\n  runApp(\n    MaterialApp(\n      theme: ThemeData(\n        useMaterial3: true,\n        primarySwatch: Colors.deepPurple,\n      ),\n      home: ChangeNotifierProvider(\n        create: (BuildContext context) => FlexiCart()\n          ..registerPlugin(CartPrintPlugin())\n          ..add(CartItem(\n            id: '1',\n            name: 'Name',\n            price: 1,\n            quantity: 1.56789,\n          )),\n        child: const Example(),\n      ),\n    ),\n  );\n}\n\nclass Example extends StatefulWidget {\n  const Example({super.key});\n\n  @override\n  State<Example> createState() => _ExampleState();\n}\n\nclass _ExampleState extends State<Example> {\n  late final FlexiCart readCart;\n\n  @override\n  Widget build(BuildContext context) {\n    final cart = context.watch<FlexiCart>();\n    final items = cart.getItemsGroup('aaa');\n\n    return Scaffold(\n      appBar: AppBar(\n        title: const Text('FlexiCart Example'),\n        actions: [\n          IconButton(\n            onPressed: _add,\n            icon: const Icon(Icons.add),\n          ),\n          IconButton(\n            onPressed: deleteGroup,\n            icon: const Icon(Icons.delete),\n          ),\n        ],\n      ),\n      body: SingleChildScrollView(\n        padding: const EdgeInsets.all(20),\n        child: Column(\n          children: [\n            const SizedBox(height: 10),\n            Text(\"Total: ${cart.totalPrice()}\"),\n\n            const SizedBox(height: 16),\n            _buildLabeledInput(\n              label: \"1. Show Zero Quantity\",\n              description:\n                  \"Shows input even if quantity is zero using `showZeroQty: true`.\",\n              child: CartInput(\n                item: CartItem(\n                    id: 'zero-visible',\n                    name: 'ZeroVisible',\n                    price: 2.5,\n                    quantity: 0),\n                showZeroQty: true,\n                onChanged: (item) => debugPrint(\"Zero shown: $item\"),\n              ),\n            ),\n\n            _buildLabeledInput(\n              label: \"2. Disabled Input\",\n              description:\n                  \"Input is read-only and disabled using `enabled: false`.\",\n              child: CartInput(\n                item: CartItem(\n                    id: 'disabled',\n                    name: 'DisabledItem',\n                    price: 5.0,\n                    quantity: 2.5),\n                enabled: false,\n                onChanged: (item) => debugPrint(\"Shouldn’t change: $item\"),\n              ),\n            ),\n\n            _buildLabeledInput(\n              label: \"3. Hide Buttons\",\n              description:\n                  \"No increment/decrement buttons using `hideButtons: true`.\",\n              child: CartInput(\n                item: CartItem(\n                    id: 'no-buttons',\n                    name: 'NoButtons',\n                    price: 3.0,\n                    quantity: 1.0),\n                hideButtons: true,\n                onChanged: (item) => debugPrint(\"No buttons: $item\"),\n              ),\n            ),\n\n            _buildLabeledInput(\n              label: \"4. High Precision (3 decimals)\",\n              description:\n                  \"Displays quantity with 3 decimal digits using `decimalDigits: 3`.\",\n              child: CartInput(\n                item: CartItem(\n                    id: 'high-precision',\n                    name: 'Precision',\n                    price: 9.99,\n                    quantity: 0.123456),\n                decimalDigits: 3,\n                onChanged: (item) => debugPrint(\"3-decimal: $item\"),\n              ),\n            ),\n\n            _buildLabeledInput(\n              label: \"5. Initial Value Override\",\n              description: \"Sets the starting value using `initialValue: 4.5`.\",\n              child: CartInput(\n                item: CartItem(\n                    id: 'initial-override', name: 'InitOverride', price: 10),\n                initialValue: 4.5,\n                onChanged: (item) => debugPrint(\"Initial override: $item\"),\n              ),\n            ),\n\n            _buildLabeledInput(\n              label: \"6. Custom Input Decoration\",\n              description: \"Customized TextField using `inputDecoration`.\",\n              child: CartInput(\n                item: CartItem(\n                    id: 'custom-decoration',\n                    name: 'Styled',\n                    price: 5,\n                    quantity: 1),\n                inputDecoration: const InputDecoration(\n                  border: OutlineInputBorder(),\n                  isDense: true,\n                  labelText: 'Qty',\n                ),\n                onChanged: (item) => debugPrint(\"Styled input: $item\"),\n              ),\n            ),\n\n            _buildLabeledInput(\n              label: \"7. Grouped Item (group: aaa)\",\n              description:\n                  \"Belongs to group 'aaa' and will appear below in the dynamic list.\",\n              child: CartInput(\n                item: CartItem(\n                    id: 'grouped-item',\n                    name: 'Grouped',\n                    price: 6.0,\n                    quantity: 1,\n                    group: 'aaa'),\n                onChanged: (item) => debugPrint(\"Grouped item: $item\"),\n              ),\n            ),\n            // _buildLabeledInput(\n            //   label: \"8. Custom Step Size\",\n            //   description: \"Quantity changes in steps of 0.5 instead of 1.0 using `step: 0.5`.\",\n            //   child: CartInput(\n            //     item: CartItem(id: 'step', name: 'Half-Step', price: 2.0, quantity: 1.0),\n            //     step: 0.5,\n            //     onChanged: (item) => debugPrint(\"Stepped: $item\"),\n            //   ),\n            // ),\n            // _buildLabeledInput(\n            //   label: \"9. Min/Max Limits\",\n            //   description: \"Restricts quantity between 1 and 5 using `minValue` and `maxValue`.\",\n            //   child: CartInput(\n            //     item: CartItem(id: 'limits', name: 'Limited', price: 1.0, quantity: 3),\n            //     minValue: 1,\n            //     maxValue: 5,\n            //     onChanged: (item) => debugPrint(\"Limited: $item\"),\n            //   ),\n            // ),\n            _buildLabeledInput(\n              label: \"11. Input with Prefix & Suffix Icons\",\n              description:\n                  \"Adds icons inside input field using `inputDecoration`.\",\n              child: CartInput(\n                item: CartItem(\n                    id: 'icons', name: 'Icons', price: 6.5, quantity: 1),\n                inputDecoration: const InputDecoration(\n                  prefixIcon: Icon(Icons.shopping_cart),\n                  suffixIcon: Icon(Icons.edit),\n                  border: OutlineInputBorder(),\n                ),\n                onChanged: (item) => debugPrint(\"With Icons: $item\"),\n              ),\n            ),\n            // _buildLabeledInput(\n            //   label: \"12. Large Input for Accessibility\",\n            //   description: \"Larger font and padding for accessibility using `style`.\",\n            //   child: CartInput(\n            //     item: CartItem(id: 'big', name: 'BigText', price: 3.0, quantity: 1),\n            //     inputDecoration: const InputDecoration(\n            //       border: OutlineInputBorder(),\n            //     ),\n            //     style: const TextStyle(fontSize: 24),\n            //     onChanged: (item) => debugPrint(\"Big text: $item\"),\n            //   ),\n            // ),\n            //\n            // _buildLabeledInput(\n            //   label: \"13. Mimic Custom Buttons\",\n            //   description: \"Custom + and - buttons using your own layout outside `CartInput`.\",\n            //   child: Row(\n            //     children: [\n            //       IconButton(\n            //         icon: const Icon(Icons.remove),\n            //         onPressed: () {\n            //           final cart = context.read<FlexiCart>();\n            //           final item = cart.getById('custom')!;\n            //           cart.update(item.copyWith(quantity: item.quantity - 1));\n            //         },\n            //       ),\n            //       Expanded(\n            //         child: CartInput(\n            //           item: CartItem(id: 'custom', name: 'CustomBtn', price: 4.0, quantity: 1),\n            //           hideButtons: true,\n            //           onChanged: (item) => debugPrint(\"Manual update: $item\"),\n            //         ),\n            //       ),\n            //       IconButton(\n            //         icon: const Icon(Icons.add),\n            //         onPressed: () {\n            //           final cart = context.read<FlexiCart>();\n            //           final item = cart.getById('custom')!;\n            //           cart.update(item.copyWith(quantity: item.quantity + 1));\n            //         },\n            //       ),\n            //     ],\n            //   ),\n            // ),\n            _buildLabeledInput(\n              label: \"14. Decimal Only, No Buttons\",\n              description:\n                  \"Starts with 2.75, allows only input via keyboard (no increment buttons).\",\n              child: CartInput(\n                item: CartItem(\n                    id: 'decimal-nobutton',\n                    name: 'DecimalOnly',\n                    price: 8.0,\n                    quantity: 2.75),\n                decimalDigits: 2,\n                hideButtons: true,\n                onChanged: (item) =>\n                    debugPrint(\"Decimal keyboard input: $item\"),\n              ),\n            ),\n            _buildLabeledInput(\n              label: \"15. Vertical Button\",\n              description:\n                  \"Starts with 2.75, allows only input via keyboard (no increment buttons).\",\n              child: CartInput(\n                size: 40,\n                item: CartItem(\n                    id: 'decimal-nobutton',\n                    name: 'DecimalOnly',\n                    price: 8.0,\n                    quantity: 2.75),\n                decimalDigits: 0,\n                axis: Axis.vertical,\n                style: CartInputStyle(border: Border.all(color: Colors.black)),\n                onChanged: (item) =>\n                    debugPrint(\"Decimal keyboard input: $item\"),\n              ),\n            ),\n\n            // _buildLabeledInput(\n            //   label: \"15. With Helper Text\",\n            //   description: \"Adds instructional text under the input field.\",\n            //   child: CartInput(\n            //     item: CartItem(id: 'helper', name: 'HelperField', price: 4.5, quantity: 1),\n            //     inputDecoration: const InputDecoration(\n            //       labelText: 'Qty',\n            //       helperText: 'Enter quantity between 1–10',\n            //       border: OutlineInputBorder(),\n            //     ),\n            //     minValue: 1,\n            //     maxValue: 10,\n            //     onChanged: (item) => debugPrint(\"Helper field: $item\"),\n            //   ),\n            // ),\n            // _buildLabeledInput(\n            //   label: \"16. Right-Aligned, Bold Text\",\n            //   description: \"Text aligned to the right with bold style for numeric focus.\",\n            //   child: CartInput(\n            //     item: CartItem(id: 'right-align', name: 'RightAlign', price: 3.5, quantity: 5),\n            //     textAlign: TextAlign.right,\n            //     style: const TextStyle(\n            //       fontWeight: FontWeight.bold,\n            //       fontSize: 18,\n            //       color: Colors.deepPurple,\n            //     ),\n            //     onChanged: (item) => debugPrint(\"Right aligned: $item\"),\n            //   ),\n            // ),\n            // _buildLabeledInput(\n            //   label: \"17. Live Update to Cart\",\n            //   description: \"Each change is instantly pushed to the global cart state.\",\n            //   child: Builder(builder: (context) {\n            //     final cart = context.read<FlexiCart>();\n            //     final item = CartItem(id: 'live', name: 'LiveUpdate', price: 6.0, quantity: 1);\n            //     cart.add(item); // ensure it's in the cart\n            //\n            //     return CartInput(\n            //       item: item,\n            //       onChanged: (updated) => cart.update(updated),\n            //     );\n            //   }),\n            // ),\n\n            // _buildLabeledInput(\n            //   label: \"18. Allow Negative Quantity\",\n            //   description: \"Rare case where you want to support negative values (e.g., returns).\",\n            //   child: CartInput(\n            //     item: CartItem(id: 'negative', name: 'Returns', price: 2.0, quantity: -1),\n            //     minValue: -10,\n            //     maxValue: 10,\n            //     onChanged: (item) => debugPrint(\"Negative allowed: $item\"),\n            //   ),\n            // ),\n\n            // Localizations.override(\n            //   context: context,\n            //   locale: const Locale('ar'), // or 'de', 'it', etc.\n            //   child: _buildLabeledInput(\n            //     label: \"19. Locale with , decimal\",\n            //     description: \"Simulates French locale where decimal separator is a comma.\",\n            //     child: CartInput(\n            //       item: CartItem(id: 'locale', name: 'CommaDecimal', price: 7.0, quantity: 1.5),\n            //       decimalDigits: 2,\n            //       onChanged: (item) => debugPrint(\"Locale input: $item\"),\n            //     ),\n            //   ),\n            // ),\n            // _buildLabeledInput(\n            //   label: \"20. Numeric Keyboard\",\n            //   description: \"Only shows numeric keyboard with decimal dot using `keyboardType`.\",\n            //   child: CartInput(\n            //     item: CartItem(id: 'keyboard', name: 'NumOnly', price: 1.0, quantity: 2),\n            //     keyboardType: const TextInputType.numberWithOptions(decimal: true),\n            //     onChanged: (item) => debugPrint(\"Typed number: $item\"),\n            //   ),\n            // ),\n            const Divider(height: 32),\n            const Text('Grouped Cart Items (group: aaa)',\n                style: TextStyle(fontWeight: FontWeight.bold)),\n\n            ListView.builder(\n              shrinkWrap: true,\n              physics: const NeverScrollableScrollPhysics(),\n              padding: const EdgeInsets.all(8),\n              itemCount: items.length,\n              itemBuilder: (context, index) {\n                final item = items[index];\n                return Card(\n                  child: Dismissible(\n                    key: Key(item.key),\n                    onDismissed: (_) => _delete(item),\n                    background: Container(\n                      color: Colors.red,\n                      child: const Icon(Icons.delete),\n                    ),\n                    child: ListTile(\n                      leading: Text(item.group),\n                      title: Text(item.name),\n                      subtitle: Text('Price: ${item.price}'),\n                      trailing: SizedBox(\n                        width: 170,\n                        child: CartInput(\n                          style: CartInputStyle(),\n                          item: item,\n                          onChanged: (item) => debugPrint(\"Changed: $item\"),\n                        ),\n                      ),\n                    ),\n                  ),\n                );\n              },\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n\n  @override\n  void initState() {\n    super.initState();\n    readCart = context.read<FlexiCart>();\n  }\n\n  @override\n  void dispose() {\n    readCart.dispose();\n    super.dispose();\n  }\n\n  Widget _buildLabeledInput({\n    required String label,\n    required String description,\n    required Widget child,\n  }) {\n    return Padding(\n      padding: const EdgeInsets.symmetric(vertical: 10, horizontal: 16),\n      child: Column(\n        crossAxisAlignment: CrossAxisAlignment.start,\n        children: [\n          Text(label, style: const TextStyle(fontWeight: FontWeight.bold)),\n          Text(description, style: const TextStyle(color: Colors.grey)),\n          const SizedBox(height: 8),\n          child,\n        ],\n      ),\n    );\n  }\n\n  CartItem _generateItem() {\n    var randomNames = RandomNames(Zone.us);\n    final random = Random();\n    final price = random.nextInt(10) * 10.0;\n    return CartItem(\n      id: const Uuid().v4(),\n      name: randomNames.manName(),\n      group: 'aaa',\n      price: price,\n    );\n  }\n\n  void deleteGroup() {\n    final cart = context.read<FlexiCart>();\n    cart.clearItemsGroup('aaa');\n  }\n\n  void _add() {\n    final cart = context.read<FlexiCart>();\n    cart.add(_generateItem());\n  }\n\n  void _delete(ICartItem item) {\n    final cart = context.read<FlexiCart>();\n    cart.delete(item);\n  }\n}\n\nfinal class CartPrintPlugin extends ICartPlugin {\n  @override\n  void onChange(FlexiCart<ICartItem> cart) {\n    debugPrint('Cart logs: ${cart.logs}');\n    super.onChange(cart);\n  }\n\n  @override\n  void onClose(FlexiCart<ICartItem> cart) {\n    debugPrint('Cart closed: ${cart.logs}');\n    super.onClose(cart);\n  }\n\n  @override\n  void onError(FlexiCart<ICartItem> cart, Object error, StackTrace stackTrace) {\n    super.onError(cart, error, stackTrace);\n    debugPrint('Cart error: $error');\n  }\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/example/lib/main.dart b/../flexi_cart/example/lib/main.dart
--- a/../flexi_cart/example/lib/main.dart	(revision 0a712f615a29b95b357fcc49e300042fa4b4dc7e)
+++ b/../flexi_cart/example/lib/main.dart	(date 1748168499513)
@@ -471,13 +471,13 @@
 final class CartPrintPlugin extends ICartPlugin {
   @override
   void onChange(FlexiCart<ICartItem> cart) {
-    debugPrint('Cart logs: ${cart.logs}');
+    debugPrint('Cart History: ${cart.history}');
     super.onChange(cart);
   }
 
   @override
   void onClose(FlexiCart<ICartItem> cart) {
-    debugPrint('Cart closed: ${cart.logs}');
+    debugPrint('Cart closed: ${cart.history}');
     super.onClose(cart);
   }
 
Index: ../flexi_cart/lib/src/cart_validators/cart_not_empty_validator.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/lib/src/cart_validators/cart_not_empty_validator.dart b/../flexi_cart/lib/src/cart_validators/cart_not_empty_validator.dart
new file mode 100644
--- /dev/null	(date 1748186178584)
+++ b/../flexi_cart/lib/src/cart_validators/cart_not_empty_validator.dart	(date 1748186178584)
@@ -0,0 +1,14 @@
+part of 'cart_validators.dart';
+
+/// Validator that checks if the number of different item types in the cart
+class CartNotEmptyValidator extends ICartValidator {
+  @override
+  Map<String, dynamic>? validate(FlexiCart cart) {
+    if (cart.items.isEmpty) {
+      return {
+        CartValidatorMessage.emptyCart: 'Cart cannot be empty',
+      };
+    }
+    return null;
+  }
+}
Index: ../flexi_cart/lib/src/cart_validators/cart_max_item_count_validator.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/lib/src/cart_validators/cart_max_item_count_validator.dart b/../flexi_cart/lib/src/cart_validators/cart_max_item_count_validator.dart
new file mode 100644
--- /dev/null	(date 1748182581383)
+++ b/../flexi_cart/lib/src/cart_validators/cart_max_item_count_validator.dart	(date 1748182581383)
@@ -0,0 +1,21 @@
+part of 'cart_validators.dart';
+
+/// Validator that checks if the total number of items in the cart
+class CartMaxItemCountValidator extends ICartValidator {
+  /// exceeds a specified maximum count.
+  CartMaxItemCountValidator(this.maxCount);
+
+  /// Creates an instance of [CartMaxItemCountValidator]
+  /// with the specified maximum count.
+  final double maxCount;
+
+  @override
+  Map<String, dynamic>? validate(FlexiCart cart) {
+    if (cart.totalQuantity() > maxCount) {
+      return {
+        CartValidatorMessage.maxItems: 'Maximum allowed items is $maxCount',
+      };
+    }
+    return null;
+  }
+}
Index: ../flexi_cart/lib/src/cart_validators/cart_validators.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/lib/src/cart_validators/cart_validators.dart b/../flexi_cart/lib/src/cart_validators/cart_validators.dart
new file mode 100644
--- /dev/null	(date 1748187309112)
+++ b/../flexi_cart/lib/src/cart_validators/cart_validators.dart	(date 1748187309112)
@@ -0,0 +1,89 @@
+import 'package:flexi_cart/flexi_cart.dart';
+
+part 'cart_contains_validator.dart';
+
+part 'cart_max_item_count_validator.dart';
+
+part 'cart_max_length_validator.dart';
+
+part 'cart_min_length_validator.dart';
+
+part 'cart_min_total_validator.dart';
+
+part 'cart_not_empty_validator.dart';
+
+part 'cart_required_field_validator.dart';
+
+part 'cart_validator_message.dart';
+
+part 'i_cart_validator.dart';
+
+part 'cart_max_total_validator.dart';
+
+/// Provides a set of built-in cart validators for [FlexiCart] instances.
+///
+/// These validators check various constraints on the cart such as minimum
+/// total, item count limits, required fields, and more.
+/// Use these validators to enforce cart business rules and
+/// ensure data integrity.
+class CartValidators {
+  /// Creates a validator that requires the cart's total price to be
+  /// at least [minAmount].
+  ///
+  /// Returns a validation error keyed by [CartValidatorMessage.minTotal] if the
+  /// cart total is less than [minAmount].
+  static ICartValidator cartMinTotal(double minAmount) =>
+      CartMinTotalValidator(minAmount);
+
+  /// Returns a validation error keyed by [CartValidatorMessage.maxTotal] if the
+  /// cart total is less than [minAmount].
+  static ICartValidator cartMaxTotal(double minAmount) =>
+      CartMaxTotalValidator(minAmount);
+
+  /// Creates a validator that requires the cart to have at least one item.
+  ///
+  /// Returns a validation error keyed by [CartValidatorMessage.emptyCart]
+  /// if the cart has no items.
+  static ICartValidator cartNotEmpty() => CartNotEmptyValidator();
+
+  /// Creates a validator that requires the total quantity of items in the cart
+  /// to be less than or equal to [maxCount].
+  ///
+  /// Returns a validation error keyed by [CartValidatorMessage.maxItems] if the
+  /// total quantity exceeds [maxCount].
+  static ICartValidator cartMaxItemCount(double maxCount) =>
+      CartMaxItemCountValidator(maxCount);
+
+  /// Creates a validator that requires a metadata field named [fieldName]
+  /// in the
+  /// cart to be non-null and non-empty.
+  ///
+  /// Returns a validation error keyed by [CartValidatorMessage.required] if the
+  /// field is missing or empty.
+  static ICartValidator cartRequiredField(String fieldName) =>
+      CartRequiredFieldValidator(fieldName);
+
+  /// Creates a validator that requires the cart to contain an item with ID
+  /// [requiredItemId].
+  ///
+  /// Returns a validation error keyed by [CartValidatorMessage.contains] if the
+  /// item is not present.
+  static ICartValidator cartContains(String requiredItemId) =>
+      CartContainsValidator(requiredItemId);
+
+  /// Creates a validator that requires the cart to have at most [maxLength]
+  /// distinct item types.
+  ///
+  /// Returns a validation error keyed by [CartValidatorMessage.maxLength]
+  /// if the number of distinct items exceeds [maxLength].
+  static ICartValidator cartMaxLength(int maxLength) =>
+      CartMaxLengthValidator(maxLength);
+
+  /// Creates a validator that requires the cart to have at least [minLength]
+  /// distinct item types.
+  ///
+  /// Returns a validation error keyed by [CartValidatorMessage.minLength]
+  /// if the number of distinct items is less than [minLength].
+  static ICartValidator cartMinLength(int minLength) =>
+      CartMinLengthValidator(minLength);
+}
Index: ../flexi_cart/lib/src/cart_theme.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import 'package:flutter/material.dart';\n\n/// A custom [ThemeExtension] for the FlexiCart package.\n///\n/// This allows consistent styling for FlexiCart components through the\n/// Flutter theme system.\nclass CartInputTheme extends ThemeExtension<CartInputTheme> {\n  /// Creates a FlexiCart theme extension.\n  const CartInputTheme({this.style});\n\n  /// The style configuration for FlexiCart widgets.\n  final CartInputStyle? style;\n\n  /// Retrieves the [CartInputStyle] from the current [BuildContext].\n  ///\n  /// Falls back to a default style generated from the theme's [ColorScheme]\n  /// if no custom style is found.\n  static CartInputStyle of(BuildContext context) {\n    final theme = Theme.of(context);\n    return theme.extension<CartInputTheme>()?.style ??\n        CartInputStyle.fromColorScheme(theme.colorScheme);\n  }\n\n  @override\n  ThemeExtension<CartInputTheme> copyWith({CartInputStyle? style}) {\n    return CartInputTheme(style: style ?? this.style?.copyWith());\n  }\n\n  @override\n  ThemeExtension<CartInputTheme> lerp(\n    ThemeExtension<CartInputTheme>? other,\n    double t,\n  ) {\n    if (other == null) return this;\n    return t > 0.5 ? other : this;\n  }\n}\n\n/// Defines visual and structural styles for FlexiCart widgets.\nclass CartInputStyle {\n  /// Constructs a [CartInputStyle] with optional customization.\n  const CartInputStyle({\n    this.activeForegroundColor = Colors.black,\n    this.activeBackgroundColor = Colors.white,\n    this.foregroundColor = Colors.black,\n    this.shape = BoxShape.rectangle,\n    this.radius = const Radius.circular(20),\n    this.border,\n    this.shadowColor,\n    this.textStyle,\n    this.iconTheme = const IconThemeData(),\n    this.iconPlus,\n    this.iconMinus,\n    this.buttonAspectRatio = 1,\n    this.elevation = 0,\n  });\n\n  /// Creates a style using values derived from a [ThemeData] instance.\n  factory CartInputStyle.fromTheme(\n    ThemeData theme, {\n    BoxShape shape = BoxShape.rectangle,\n    Radius radius = const Radius.circular(20),\n    BoxBorder? border,\n    IconData? iconPlus,\n    IconData? iconMinus,\n    double? buttonAspectRatio,\n    double? elevation,\n  }) {\n    return CartInputStyle.fromColorScheme(\n      theme.colorScheme,\n      shape: shape,\n      radius: radius,\n      border: border,\n      textStyle: theme.textTheme.bodyMedium,\n      iconPlus: iconPlus,\n      iconMinus: iconMinus,\n      buttonAspectRatio: buttonAspectRatio,\n      elevation: elevation,\n    );\n  }\n\n  /// Creates a style using values derived from a [ColorScheme] instance.\n  factory CartInputStyle.fromColorScheme(\n    ColorScheme colorScheme, {\n    BoxShape shape = BoxShape.rectangle,\n    Radius radius = const Radius.circular(20),\n    BoxBorder? border,\n    TextStyle? textStyle,\n    IconThemeData? iconTheme,\n    IconData? iconPlus,\n    IconData? iconMinus,\n    double? buttonAspectRatio,\n    double? elevation,\n  }) {\n    return CartInputStyle(\n      activeForegroundColor: colorScheme.primary,\n      activeBackgroundColor: colorScheme.surface,\n      foregroundColor: colorScheme.onPrimary,\n      shadowColor: colorScheme.shadow,\n      shape: shape,\n      radius: radius,\n      border: border,\n      textStyle: textStyle,\n      iconTheme: iconTheme ?? const IconThemeData(),\n      iconPlus: iconPlus,\n      iconMinus: iconMinus,\n      buttonAspectRatio: buttonAspectRatio ?? 1.5,\n      elevation: elevation ?? 0,\n    );\n  }\n\n  /// Foreground color when active (typically the icon/text color).\n  final Color activeForegroundColor;\n\n  /// Background color when active.\n  final Color activeBackgroundColor;\n\n  /// Foreground color when inactive.\n  final Color foregroundColor;\n\n  /// The shape of the button widget (rectangle or circle).\n  final BoxShape shape;\n\n  /// The border radius (only used if shape is rectangle).\n  final Radius radius;\n\n  /// Border to wrap the widget (optional).\n  final BoxBorder? border;\n\n  /// Optional shadow color for elevation.\n  final Color? shadowColor;\n\n  /// Text style for displaying numeric or text values.\n  final TextStyle? textStyle;\n\n  /// Icon styling configuration.\n  final IconThemeData iconTheme;\n\n  /// Icon used for the \"add\" button.\n  final IconData? iconPlus;\n\n  /// Icon used for the \"subtract\" button.\n  final IconData? iconMinus;\n\n  /// Aspect ratio of the buttons (width / height).\n  final double buttonAspectRatio;\n\n  /// Elevation of the widget (controls shadow depth).\n  final double elevation;\n\n  /// Returns a new [CartInputStyle] with specified fields replaced.\n  ///\n  /// Use [noBorder] to remove the existing border even if [border] is null.\n  CartInputStyle copyWith({\n    Color? activeForegroundColor,\n    Color? activeBackgroundColor,\n    Color? foregroundColor,\n    Color? backgroundColor,\n    BoxShape? shape,\n    Radius? radius,\n    BoxBorder? border,\n    bool noBorder = false,\n    Color? shadowColor,\n    TextStyle? textStyle,\n    IconThemeData? iconTheme,\n    IconData? iconPlus,\n    IconData? iconMinus,\n    double? buttonAspectRatio,\n    double? elevation,\n  }) {\n    return CartInputStyle(\n      activeForegroundColor:\n          activeForegroundColor ?? this.activeForegroundColor,\n      activeBackgroundColor:\n          activeBackgroundColor ?? this.activeBackgroundColor,\n      foregroundColor: foregroundColor ?? this.foregroundColor,\n      shape: shape ?? this.shape,\n      radius: radius ?? this.radius,\n      border: noBorder ? null : (border ?? this.border),\n      shadowColor: shadowColor ?? this.shadowColor,\n      textStyle: textStyle ?? this.textStyle,\n      iconTheme: iconTheme ?? this.iconTheme,\n      iconPlus: iconPlus ?? this.iconPlus,\n      iconMinus: iconMinus ?? this.iconMinus,\n      buttonAspectRatio: buttonAspectRatio ?? this.buttonAspectRatio,\n      elevation: elevation ?? this.elevation,\n    );\n  }\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/lib/src/cart_theme.dart b/../flexi_cart/lib/src/cart_theme.dart
--- a/../flexi_cart/lib/src/cart_theme.dart	(revision 0a712f615a29b95b357fcc49e300042fa4b4dc7e)
+++ b/../flexi_cart/lib/src/cart_theme.dart	(date 1748147617765)
@@ -31,7 +31,9 @@
     ThemeExtension<CartInputTheme>? other,
     double t,
   ) {
-    if (other == null) return this;
+    if (other == null) {
+      return this;
+    }
     return t > 0.5 ? other : this;
   }
 }
Index: ../flexi_cart/lib/src/cart_validators/cart_max_length_validator.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/lib/src/cart_validators/cart_max_length_validator.dart b/../flexi_cart/lib/src/cart_validators/cart_max_length_validator.dart
new file mode 100644
--- /dev/null	(date 1748182581400)
+++ b/../flexi_cart/lib/src/cart_validators/cart_max_length_validator.dart	(date 1748182581400)
@@ -0,0 +1,22 @@
+part of 'cart_validators.dart';
+
+/// Validator that checks if the number of different item types in the cart
+class CartMaxLengthValidator extends ICartValidator {
+  /// exceeds a specified maximum length.
+  CartMaxLengthValidator(this.maxLength);
+
+  /// Creates an instance of [CartMaxLengthValidator] with the specified
+  /// maximum length.
+  final int maxLength;
+
+  @override
+  Map<String, dynamic>? validate(FlexiCart cart) {
+    if (cart.items.length > maxLength) {
+      return {
+        CartValidatorMessage.maxLength:
+            'Maximum item types allowed is $maxLength',
+      };
+    }
+    return null;
+  }
+}
Index: ../flexi_cart/lib/src/cart_validators/cart_min_length_validator.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/lib/src/cart_validators/cart_min_length_validator.dart b/../flexi_cart/lib/src/cart_validators/cart_min_length_validator.dart
new file mode 100644
--- /dev/null	(date 1748182581398)
+++ b/../flexi_cart/lib/src/cart_validators/cart_min_length_validator.dart	(date 1748182581398)
@@ -0,0 +1,21 @@
+part of 'cart_validators.dart';
+
+/// Validator that checks if the number of different item types in the cart
+class CartMinLengthValidator extends ICartValidator {
+  /// exceeds a specified minimum length.
+  CartMinLengthValidator(this.minLength);
+
+  /// Creates an instance of [CartMinLengthValidator] with the specified
+  final int minLength;
+
+  @override
+  Map<String, dynamic>? validate(FlexiCart cart) {
+    if (cart.items.length < minLength) {
+      return {
+        CartValidatorMessage.minLength:
+            'Minimum item types required is $minLength',
+      };
+    }
+    return null;
+  }
+}
Index: ../flexi_cart/analysis_options.yaml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>include: package:very_good_analysis/analysis_options.yaml
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/analysis_options.yaml b/../flexi_cart/analysis_options.yaml
--- a/../flexi_cart/analysis_options.yaml	(revision 0a712f615a29b95b357fcc49e300042fa4b4dc7e)
+++ b/../flexi_cart/analysis_options.yaml	(date 1748182721957)
@@ -1,1 +1,5 @@
-include: package:very_good_analysis/analysis_options.yaml
\ No newline at end of file
+include: package:very_good_analysis/analysis_options.yaml
+linter:
+  rules:
+    - deprecated_member_use_from_same_package: false
+    - deprecated_consistency: false
\ No newline at end of file
Index: ../flexi_cart/lib/src/mixins/cart_history_mixin.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/lib/src/mixins/cart_history_mixin.dart b/../flexi_cart/lib/src/mixins/cart_history_mixin.dart
new file mode 100644
--- /dev/null	(date 1748183080295)
+++ b/../flexi_cart/lib/src/mixins/cart_history_mixin.dart	(date 1748183080295)
@@ -0,0 +1,21 @@
+/// mixin CartHistoryMixin;
+/// // A mixin that provides a history of actions or messages related to the cart.
+mixin CartHistoryMixin {
+  final List<String> _history = [];
+
+  /// Returns the list of registered plugins.
+  List<String> get history => List.unmodifiable(_history);
+
+  /// gets the number of history entries.
+  bool get hasHistory => _history.isNotEmpty;
+
+  /// Adds a message to the history.
+  void addHistory(String message, {bool notified = false}) {
+    _history.add('$message - {notified: $notified}');
+  }
+
+  /// Removes the last entry from the history.
+  void clearHistory() {
+    _history.clear();
+  }
+}
Index: ../flexi_cart/README.md
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+># FlexiCart \uD83D\uDED2\n\n\n[![pub package][pub_badge]][pub_badge_link] [![style: very good analysis][vgv_badge]][vgv_badge_link] [![License: MIT][license_badge]][license_badge_link]\n[![codecov](https://codecov.io/gh/supy-io/supy-flutter-packages/branch/main/graph/badge.svg?token=V5WF4C83K7)](https://codecov.io/gh/supy-io/supy-flutter-packages)\n![Null safety](https://img.shields.io/badge/null%20safety-true-brightgreen)\n\n[license_badge]: https://img.shields.io/badge/license-MIT-blue.svg\n[license_badge_link]: https://opensource.org/licenses/MIT\n[vgv_badge]: https://img.shields.io/badge/style-very_good_analysis-B22C89.svg\n[vgv_badge_link]: https://pub.dev/packages/very_good_analysis\n[pub_badge]: https://img.shields.io/pub/v/flexi_cart\n[pub_badge_link]: https://pub.dartlang.org/packages/flexi_cart\n\n\n\n\n\nA flexible, feature-rich cart management system for Flutter applications. FlexiCart provides reactive cart management with support for item grouping, quantity control, notes, delivery tracking, and custom business rules.\n\n## Features ✨\n\n- **Item Grouping** - Organize items into logical groups (e.g., by category/vendor)\n- **Reactive Architecture** - Built with `ChangeNotifier` for seamless state management\n- **Quantity Control** - Precise quantity management with decimal support\n- **Custom Input Widget** - Built-in `CartInput` widget with increment/decrement controls\n- **Delivery Tracking** - Set and manage delivery dates/times\n- **Notes/Comments** - Add cart-level notes\n- **Conditional Removal** - Custom rules for item removal\n- **Type Safety** - Generic implementation for any item type\n- **Deep Copying** - Clone cart instances with complete state\n- **Mixins Support** - Prevent disposed state notifications\n- **Lock/unlock** cart for safe operations\n- **Cart expiration** support set expired duration\n- **Stream-based** state emission\n- **Plugin architecture** for extending behavior\n- **Internal logging** for debugging\n- **Exchange Rate Support**  for converting item prices\n\n## Installation \uD83D\uDCE6\n\nAdd to your `pubspec.yaml`:\n\n```yaml\ndependencies:\n   flexi_cart: ^0.4.0+2\n   provider: ^6.0.0 \n```\n\n## Screenshots \uD83D\uDCF8\n\n<div style=\"display: flex; gap: 10px;\">\n\n  <img src=\"screenshots/shiny_eats.png\" alt=\"Cart overview\" width=\"220\" />\n\n  <img src=\"screenshots/fresh_market.png\" alt=\"Switch CartInput\" width=\"220\" />\n  <img src=\"screenshots/fresh_market_vertical.png\" alt=\"Vertical Style\" width=\"220\" />\n\n  <img src=\"screenshots/shine_beauty.png\" alt=\"Dark Theme\" width=\"220\" />\n  <img src=\"screenshots/multi_cart.png\" alt=\"MultiCart\" width=\"220\" />\n  <img src=\"screenshots/currencies.png\" alt=\"Exchanges\" width=\"220\" />\n\n</div>\n\n## \uD83D\uDE80 Getting Started\n### Basic Setup\n\n- #### Create Cart Instance\n```dart\nProvider(create: (_) => FlexiCart(...))\n\n/// Initialize the cart:\nfinal cart = FlexiCart();\n```\n\n- #### Define your item model\n  Your model must implement the ICartItem interface.\n```dart\nclass ProductItem extends ICartItem {\n   // implement required properties like id, name, quantity, etc.\n}\n\nfinal product = ProductItem(...)\n```\n- #### Use CartInput Widget\n```dart\nfinal product = ProductItem(...);\n\n// Add to cart\ncontext.read<FlexiCart>().add(product);\n\n// Use in UI\nCartInput(\n  item: product,\n  decimalDigits: 2,\n  maxQuantity: 100,\n  onChanged: (updatedItem) {\n  print(\"Quantity updated: ${updatedItem.quantity}\");\n  },\n);\n\n```\n### Basic Operations\n- #### Initalize a cart item object and add it to cart\n```dart\nfinal product = ProductItem(\n   id: '123',\n   name: 'Widget Pro',\n   price: 29.99,\n);\ncontext.read<FlexiCart>().add(product);\n```\n- #### Remove item from cart if existed\n\n```dart\ncart.delete(product);\n```\n- #### Get Total Calculation:\n\n```dart\ndouble total = cart.totalPrice();\nint itemCount = cart.totalQuantity();\n```\n\n- #### Stream: Listen to cart changes reactively\n```dart\ncart.stream.listen((updatedCart) {\n  print('Cart updated: ${updatedCart.items.length} items');\n});\n```\n- #### Lock the cart to prevent changes\n```dart\ncart.lock();\ntry {\n  cart.add(MockItem(id: '1', name: 'Apple', price: 2.0));\n} catch (e) {\n  print('Error: $e'); // Cart is locked.\n}\ncart.unlock(); // Now it's safe to mutate\n```\n\n- #### Set Metadata\n```dart\ncart.setMetadata('couponCode', 'SUMMER25');\ncart.setMetadata('sessionId', 'abc-123');\nprint(cart.metadata['couponCode']); // SUMMER25\n```\n\n- #### Currency Exchange Feature\n```dart\nfinal cart=context.read<FlexiCart>();\nfinal currency = CartCurrency(code: 'EUR', rate: 1.2);\ncart.applyExchangeRate(currency);\n\n// ... later\ncart.removeExchangeRate();\n```\n- ```applyExchangeRate()``` multiplies item prices and updates internal cart currency.\n\n- ```removeExchangeRate()``` restores original prices by dividing using the last applied rate.\n\n- #### Set expiration\n```dart\ncart.setExpiration(Duration(minutes: 30));\nprint(cart.isExpired);\n```\n- #### Logs\n```dart\nprint(cart.logs); // View history of cart changes\n```\n- #### Register plugin\n```dart\ncart.registerPlugin(PrintPlugin());\n\nclass PrintPlugin extends ICartPlugin<MockItem> {\n  @override\n  void onChange(FlexiCart<MockItem> cart) {\n  print('Cart changed via plugin: ${cart.totalQuantity()} items');\n  }\n}\n```\n- ####  CartDiff To track item changes between states:\n```dart\nfinal old = {...cart.items}; // snapshot\ncart.add(newItem);\nfinal diff = calculateCartDiff(old, cart.items);\nprint(diff.added); // List of added items\n```\n\n\n\n## \uD83D\uDCDA API Reference\n\n### FlexiCart Class\n\n| Method                | Description                      |\n| --------------------- | -------------------------------- |\n| `add(item)`           | Add or update an item            |\n| `addItems(list)`      | Add multiple items               |\n| `delete(item)`        | Remove an item                   |\n| `reset()`             | Clear the cart                   |\n| `totalPrice()`        | Total price of items             |\n| `totalQuantity()`     | Total quantity of items          |\n| `getItemsGroup(id)`   | Get grouped items                |\n| `clearItemsGroup(id)` | Remove items from a group        |\n| `clone()`             | Deep clone of the cart           |\n| `cast<G>()`           | Cast cart to another item type   |\n| `isNotEmpty()`        | Returns `true` if cart has items |\n| `isEmpty()`           | Returns `true` if cart is empty  |\n| `setNote()`           | Add or change cart note          |\n| `setDeliveredAt()`    | Set delivery date/time           |\n| `lock()`    | Lock Cart           |\n| `unlock()`    | unLock Cart           |\n| `registerPlugin()`    | Register Plugin to cart           |\n| `setExpiration()`    | Set an Expiration date           |\n| `logs`    | Get Logs History           |\n| `applyExchangeRate()`    | multiplies item prices and updates internal cart currency.           |\n| `removeExchangeRate()`    | restores original prices by dividing using the last applied            |\n\n\n\n### CartInput Widget\n\n| Property        | Description                                   |\n|-----------------|-----------------------------------------------|\n| `item`          | Required cart item instance                   |\n| `decimalDigits` | Number of decimal places (0–6)                |\n| `maxQuantity`   | Maximum allowed quantity                      |\n| `hideButtons`   | Hide +/- buttons (default: `false`)           |\n| `showZeroQty`   | Display 0 instead of empty (default: `false`) |\n| `axis`          | Set Axis of the Widget                        |\n\n\n### \uD83D\uDE4C Contributions\nFeel free to fork, contribute, or suggest features. PRs are welcome!\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/README.md b/../flexi_cart/README.md
--- a/../flexi_cart/README.md	(revision 0a712f615a29b95b357fcc49e300042fa4b4dc7e)
+++ b/../flexi_cart/README.md	(date 1748147617736)
@@ -1,7 +1,7 @@
 # FlexiCart 🛒
 
 
-[![pub package][pub_badge]][pub_badge_link] [![style: very good analysis][vgv_badge]][vgv_badge_link] [![License: MIT][license_badge]][license_badge_link]
+[![pub package][pub_badge]][pub_badge_link] [![License: MIT][license_badge]][license_badge_link]
 [![codecov](https://codecov.io/gh/supy-io/supy-flutter-packages/branch/main/graph/badge.svg?token=V5WF4C83K7)](https://codecov.io/gh/supy-io/supy-flutter-packages)
 ![Null safety](https://img.shields.io/badge/null%20safety-true-brightgreen)
 
Index: ../flexi_cart/lib/src/mixins/cart_metadata_mixin.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/lib/src/mixins/cart_metadata_mixin.dart b/../flexi_cart/lib/src/mixins/cart_metadata_mixin.dart
new file mode 100644
--- /dev/null	(date 1748183409948)
+++ b/../flexi_cart/lib/src/mixins/cart_metadata_mixin.dart	(date 1748183409948)
@@ -0,0 +1,95 @@
+import 'package:flexi_cart/src/mixins/mixins.dart';
+
+/// mixin for change notifier dispose
+mixin CartMetadataMixin on CartChangeNotifierDisposeMixin, CartHistoryMixin {
+  /// Custom metadata storage.
+  final Map<String, dynamic> _metadata = {};
+
+  /// Returns a read-only view of the metadata.
+  Map<String, dynamic> get metadata => Map.unmodifiable(_metadata);
+
+  /// Adds multiple metadata entries.
+  /// If [shouldNotifyListeners] is true, notifies listeners after the update.
+  void addMetadataEntries(
+    Map<String, dynamic> entries, {
+    bool shouldNotifyListeners = false,
+  }) {
+    if (entries.isEmpty) {
+      return;
+    }
+    _metadata.addAll(entries);
+    addHistory(
+      'Metadata entries added: ${entries.keys.join(', ')}',
+      notified: shouldNotifyListeners,
+    );
+
+    if (shouldNotifyListeners) {
+      notifyListeners();
+    }
+  }
+
+  /// Sets a single metadata key-value pair.
+  void setMetadataEntry(
+    String key,
+    dynamic value, {
+    bool shouldNotifyListeners = true,
+  }) {
+    _metadata[key] = value;
+    addHistory('Metadata set: $key = $value', notified: shouldNotifyListeners);
+
+    if (shouldNotifyListeners) {
+      notifyListeners();
+    }
+  }
+
+  /// Retrieves a metadata value by key.
+  /// Returns null if key is not found or type cast fails.
+  S? getMetadataEntry<S>(String key) => _metadata[key] as S?;
+
+  /// Removes a metadata entry by key.
+  void removeMetadataEntry(String key, {bool shouldNotifyListeners = true}) {
+    if (!_metadata.containsKey(key)) {
+      return;
+    }
+    _metadata.remove(key);
+    addHistory('Metadata removed: $key', notified: shouldNotifyListeners);
+
+    if (shouldNotifyListeners) {
+      notifyListeners();
+    }
+  }
+
+  /// Sets a metadata key-value pair.
+  /// Deprecated: Use [setMetadataEntry] instead.
+  @Deprecated('Use setMetadataEntry instead')
+  void setMetadata(
+    String key,
+    dynamic value, {
+    bool shouldNotifyListeners = true,
+  }) {
+    setMetadataEntry(key, value, shouldNotifyListeners: shouldNotifyListeners);
+  }
+
+  /// get metadata value by key
+  /// Deprecated: Use [getMetadataEntry] instead.
+  @Deprecated('Use getMetadataEntry instead')
+  S? getMetadata<S>(String key) => getMetadataEntry(key);
+
+  /// Removes a metadata entry.
+  @Deprecated('Use removeMetadataEntry instead')
+  void removeMetadata(String key, {bool shouldNotifyListeners = true}) {
+    removeMetadataEntry(key, shouldNotifyListeners: shouldNotifyListeners);
+  }
+
+  /// Clears all metadata entries.
+  void clearAllMetadata({bool shouldNotifyListeners = false}) {
+    if (_metadata.isNotEmpty) {
+      _metadata.clear();
+      addHistory('All metadata cleared', notified: shouldNotifyListeners);
+
+      if (shouldNotifyListeners) {
+        notifyListeners();
+      }
+    }
+  }
+}
Index: ../flexi_cart/lib/src/mixins/cart_lock_mixin.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/lib/src/mixins/cart_lock_mixin.dart b/../flexi_cart/lib/src/mixins/cart_lock_mixin.dart
new file mode 100644
--- /dev/null	(date 1748183409962)
+++ b/../flexi_cart/lib/src/mixins/cart_lock_mixin.dart	(date 1748183409962)
@@ -0,0 +1,77 @@
+import 'package:flexi_cart/src/mixins/mixins.dart';
+
+/// A mixin that provides lock/unlock functionality to a cart.
+///
+/// This mixin adds a boolean lock state to a class and notifies listeners
+/// if specified. Useful for preventing modifications to a cart during
+/// critical operations.
+mixin CartLockMixin on CartChangeNotifierDisposeMixin, CartHistoryMixin {
+  /// Indicates whether the cart is currently locked.
+  bool _isLocked = false;
+
+  /// Returns whether the cart is locked.
+  bool get isLocked => _isLocked;
+
+  /// Sets the lock state of the cart directly.
+  ///
+  /// Note: This does **not** trigger [notifyListeners].
+  set isLocked(bool value) {
+    _isLocked = value;
+  }
+
+  /// Locks the cart.
+  ///
+  /// If [shouldNotifyListeners] is true, notifies listeners after locking.
+  void lock({bool shouldNotifyListeners = false}) {
+    if (_isLocked) {
+      return;
+    }
+
+    _isLocked = true;
+    addHistory('Cart locked', notified: shouldNotifyListeners);
+    if (shouldNotifyListeners) {
+      notifyListeners();
+    }
+  }
+
+  /// Unlocks the cart.
+  ///
+  /// If [shouldNotifyListeners] is true, notifies listeners after unlocking.
+  void unlock({bool shouldNotifyListeners = false}) {
+    if (!_isLocked) {
+      return;
+    }
+
+    _isLocked = false;
+    addHistory('Cart unlocked', notified: shouldNotifyListeners);
+    if (shouldNotifyListeners) {
+      notifyListeners();
+    }
+  }
+
+  /// Toggles the current lock state.
+  ///
+  /// If locked, it will unlock; if unlocked, it will lock.
+  /// Notifies listeners if [shouldNotifyListeners] is true.
+  void toggleLock({bool shouldNotifyListeners = false}) {
+    _isLocked = !_isLocked;
+    final action = _isLocked ? 'locked' : 'unlocked';
+    addHistory('Cart $action', notified: shouldNotifyListeners);
+    if (shouldNotifyListeners) {
+      notifyListeners();
+    }
+  }
+
+  /// Resets the lock to an unlocked state.
+  ///
+  /// This is equivalent to calling [unlock], but does not check the current
+  /// state.
+  /// Notifies listeners if [shouldNotifyListeners] is true.
+  void resetLock({bool shouldNotifyListeners = false}) {
+    _isLocked = false;
+    addHistory('Cart lock reset', notified: shouldNotifyListeners);
+    if (shouldNotifyListeners) {
+      notifyListeners();
+    }
+  }
+}
Index: ../flexi_cart/lib/src/mixins/cart_plugins_mixin.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/lib/src/mixins/cart_plugins_mixin.dart b/../flexi_cart/lib/src/mixins/cart_plugins_mixin.dart
new file mode 100644
--- /dev/null	(date 1748183409944)
+++ b/../flexi_cart/lib/src/mixins/cart_plugins_mixin.dart	(date 1748183409944)
@@ -0,0 +1,30 @@
+import 'package:flexi_cart/flexi_cart.dart';
+
+/// Mixin for managing cart plugins that respond to cart events.
+mixin CartPluginsMixin<T extends ICartItem> {
+  /// Registered plugins for cart event hooks.
+  final List<ICartPlugin<T>> _plugins = [];
+
+  /// Returns the list of registered plugins.
+  List<ICartPlugin<T>> get plugins => List.unmodifiable(_plugins);
+
+  /// Returns whether there are any registered plugins.
+  bool get hasPlugins => _plugins.isNotEmpty;
+
+  /// Registers a plugin to be notified on cart changes.
+  void registerPlugin(ICartPlugin<T> plugin) {
+    _plugins.add(plugin);
+    // addHistory('Plugin registered: ${plugin.runtimeType}');
+  }
+
+  /// Unregisters a plugin so it no longer receives updates.
+  void unregisterPlugin(ICartPlugin<T> plugin) {
+    _plugins.remove(plugin);
+    // addHistory('Plugin unregistered: ${plugin.runtimeType}');
+  }
+
+  /// Unregisters all plugins.
+  void clearPlugins() {
+    _plugins.clear();
+  }
+}
Index: ../flexi_cart/lib/src/models/models.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/lib/src/models/models.dart b/../flexi_cart/lib/src/models/models.dart
new file mode 100644
--- /dev/null	(date 1748184230650)
+++ b/../flexi_cart/lib/src/models/models.dart	(date 1748184230650)
@@ -0,0 +1,4 @@
+export 'cart_currency.dart';
+export 'cart_hooks.dart';
+export 'cart_item.dart';
+export 'cart_plugin.dart';
Index: ../flexi_cart/lib/src/models/cart_currency.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/lib/src/models/cart_currency.dart b/../flexi_cart/lib/src/models/cart_currency.dart
new file mode 100644
--- /dev/null	(date 1748181354549)
+++ b/../flexi_cart/lib/src/models/cart_currency.dart	(date 1748181354549)
@@ -0,0 +1,39 @@
+import 'package:flutter/foundation.dart';
+
+/// Represents a currency with an exchange rate and currency code.
+///
+/// This class holds the exchange [rate] relative to a base currency
+/// and the [code] representing the currency (e.g., "USD", "EUR").
+@immutable
+class CartCurrency {
+  /// Creates a [CartCurrency] instance with the given [rate] and [code].
+  ///
+  /// Both [rate] and [code] are required.
+  const CartCurrency({required this.rate, required this.code});
+
+  /// The exchange rate relative to a base currency.
+  final num rate;
+
+  /// The currency code (e.g., "USD", "EUR").
+  final String code;
+
+  @override
+  String toString() {
+    return 'CartCurrency{rate: $rate, code: $code}';
+  }
+
+  @override
+  bool operator ==(Object other) {
+    if (identical(this, other)) {
+      return true;
+    }
+    if (other.runtimeType != runtimeType) {
+      return false;
+    }
+
+    return other is CartCurrency && other.rate == rate && other.code == code;
+  }
+
+  @override
+  int get hashCode => Object.hash(rate, code);
+}
Index: ../flexi_cart/lib/src/models/cart_plugin.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/lib/src/models/cart_plugin.dart b/../flexi_cart/lib/src/models/cart_plugin.dart
new file mode 100644
--- /dev/null	(date 1748182581403)
+++ b/../flexi_cart/lib/src/models/cart_plugin.dart	(date 1748182581403)
@@ -0,0 +1,24 @@
+import 'package:flexi_cart/flexi_cart.dart';
+import 'package:flutter/material.dart';
+
+/// Interface for plugins that want to be notified when the cart changes.
+abstract class ICartPlugin<T extends ICartItem> {
+  /// Called whenever a [onChange] occurs in any [cart]
+  /// A [onChange] occurs when a new value is emitted.
+  /// [onChange] is called before a cart's state has been updated.
+  @mustCallSuper
+  void onChange(FlexiCart<T> cart) {}
+
+  /// Called whenever an [error] is thrown in the cart.
+  /// The [stackTrace] argument may be [StackTrace.empty] if an error
+  /// was received without a stack trace.
+  @mustCallSuper
+  void onError(FlexiCart<T> cart, Object error, StackTrace stackTrace) {}
+
+  /// Called whenever a [cart] is closed.
+  /// [onClose] is called just before the [cart] is closed
+  /// and indicates that the particular instance will no longer
+  /// emit new states.
+  @mustCallSuper
+  void onClose(FlexiCart<T> cart) {}
+}
Index: ../flexi_cart/lib/src/mixins/cart_change_notifier_dispose_mixin.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/lib/src/mixins/cart_change_notifier_dispose_mixin.dart b/../flexi_cart/lib/src/mixins/cart_change_notifier_dispose_mixin.dart
new file mode 100644
--- /dev/null	(date 1748186178600)
+++ b/../flexi_cart/lib/src/mixins/cart_change_notifier_dispose_mixin.dart	(date 1748186178600)
@@ -0,0 +1,35 @@
+import 'package:flexi_cart/flexi_cart.dart';
+import 'package:flutter/material.dart';
+
+/// A mixin that adds a `disposed` flag to [ChangeNotifier], and ensures
+/// `notifyListeners()` only works when the object hasn't been disposed.
+///
+/// Useful for preventing calls to `notifyListeners()` after the object
+/// has already been disposed, which can cause runtime exceptions.
+mixin CartChangeNotifierDisposeMixin on ChangeNotifier {
+  /// Indicates whether this object has already been disposed.
+  bool disposed = false;
+
+  @override
+  void notifyListeners() {
+    if (!disposed) {
+      super.notifyListeners();
+    }
+  }
+
+  /// Checks if the object has been disposed before performing an action.
+  void checkIfDisposed(ValueChanged<Exception> beforeThrow) {
+    if (disposed) {
+      final exception =
+          CartDisposedException('Cannot perform action after dispose');
+      beforeThrow(exception);
+      throw exception;
+    }
+  }
+
+  @override
+  void dispose() {
+    disposed = true;
+    super.dispose();
+  }
+}
Index: ../flexi_cart/lib/src/mixins.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/lib/src/mixins.dart b/../flexi_cart/lib/src/mixins/cart_stream_mixin.dart
rename from ../flexi_cart/lib/src/mixins.dart
rename to ../flexi_cart/lib/src/mixins/cart_stream_mixin.dart
--- a/../flexi_cart/lib/src/mixins.dart	(revision 0a712f615a29b95b357fcc49e300042fa4b4dc7e)
+++ b/../flexi_cart/lib/src/mixins/cart_stream_mixin.dart	(date 1748183409959)
@@ -1,28 +1,4 @@
 import 'dart:async';
-import 'package:flutter/material.dart';
-
-/// A mixin that adds a `disposed` flag to [ChangeNotifier], and ensures
-/// `notifyListeners()` only works when the object hasn't been disposed.
-///
-/// Useful for preventing calls to `notifyListeners()` after the object
-/// has already been disposed, which can cause runtime exceptions.
-mixin CartChangeNotifierDisposeMixin on ChangeNotifier {
-  /// Indicates whether this object has already been disposed.
-  bool disposed = false;
-
-  @override
-  void notifyListeners() {
-    if (!disposed) {
-      super.notifyListeners();
-    }
-  }
-
-  @override
-  void dispose() {
-    disposed = true;
-    super.dispose();
-  }
-}
 
 /// A mixin that provides a reactive stream interface for emitting
 /// state changes or values of type [T].
Index: ../flexi_cart/lib/src/mixins/mixins.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/lib/src/mixins/mixins.dart b/../flexi_cart/lib/src/mixins/mixins.dart
new file mode 100644
--- /dev/null	(date 1748183409938)
+++ b/../flexi_cart/lib/src/mixins/mixins.dart	(date 1748183409938)
@@ -0,0 +1,6 @@
+export 'cart_change_notifier_dispose_mixin.dart';
+export 'cart_history_mixin.dart';
+export 'cart_lock_mixin.dart';
+export 'cart_metadata_mixin.dart';
+export 'cart_plugins_mixin.dart';
+export 'cart_stream_mixin.dart';
Index: ../flexi_cart/example/lib/validator_cart_example.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/example/lib/validator_cart_example.dart b/../flexi_cart/example/lib/validator_cart_example.dart
new file mode 100644
--- /dev/null	(date 1748192622167)
+++ b/../flexi_cart/example/lib/validator_cart_example.dart	(date 1748192622167)
@@ -0,0 +1,538 @@
+import 'package:flutter/material.dart';
+import 'package:flexi_cart/flexi_cart.dart';
+import 'package:provider/provider.dart';
+
+// --- Validators ---
+class MaxItemsValidator extends ICartValidator {
+  final int maxItems;
+
+  const MaxItemsValidator(this.maxItems);
+
+  @override
+  Map<String, dynamic>? validate(FlexiCart cart) {
+    if (cart.totalQuantity() > maxItems) {
+      return {
+        'max_items_exceeded':
+            'You can only add up to $maxItems items in the cart.'
+      };
+    }
+    return null;
+  }
+}
+
+class MinTotalPriceValidator extends ICartValidator {
+  final double minPrice;
+
+  const MinTotalPriceValidator(this.minPrice);
+
+  @override
+  Map<String, dynamic>? validate(FlexiCart cart) {
+    if (cart.totalPrice() < minPrice) {
+      return {
+        'min_total_price':
+            'Minimum order amount is \$${minPrice.toStringAsFixed(2)}.'
+      };
+    }
+    return null;
+  }
+}
+
+class MaxTotalPriceValidator extends ICartValidator {
+  final double maxPrice;
+
+  const MaxTotalPriceValidator(this.maxPrice);
+
+  @override
+  Map<String, dynamic>? validate(FlexiCart cart) {
+    if (cart.totalPrice() > maxPrice) {
+      return {
+        'max_total_price':
+            'Maximum order amount is \$${maxPrice.toStringAsFixed(2)}.'
+      };
+    }
+    return null;
+  }
+}
+
+class MinQuantityValidator extends ICartValidator {
+  final int minQuantity;
+
+  const MinQuantityValidator(this.minQuantity);
+
+  @override
+  Map<String, dynamic>? validate(FlexiCart cart) {
+    for (var item in cart.itemsList) {
+      if (item.notNullQty() < minQuantity) {
+        return {
+          'min_quantity': 'Each item must have at least $minQuantity quantity.'
+        };
+      }
+    }
+    return null;
+  }
+}
+
+// --- Product Item ---
+class ProductItem extends ICartItem {
+  ProductItem({
+    required super.price,
+    super.quantity = 1,
+    super.group = 'default',
+    required super.id,
+    required super.name,
+  });
+}
+
+// --- Main App ---
+void main() {
+  runApp(const MyApp());
+}
+
+class MyApp extends StatelessWidget {
+  const MyApp({super.key});
+
+  @override
+  Widget build(BuildContext context) {
+    return MaterialApp(
+      title: 'Fancy Flexi Cart',
+      theme: ThemeData(
+        colorSchemeSeed: Colors.tealAccent,
+        useMaterial3: true,
+      ),
+      home: ChangeNotifierProvider(
+        create: (_) {
+          final cart = FlexiCart<ProductItem>(
+            options: CartOptions(
+              validatorOptions: ValidatorOptions(
+                autoValidate: true,
+                validators: [
+                  const MaxItemsValidator(5),
+                  const MinTotalPriceValidator(5.0),
+                  const MaxTotalPriceValidator(100.0),
+                  const MinQuantityValidator(3),
+                ],
+                promoCodeValidator: (code) {
+                  if (code.toLowerCase() == 'flutter50') return null;
+                  if (code.toLowerCase() == 'save20') return null;
+                  return 'Invalid promo code';
+                },
+              ),
+            ),
+          );
+          return cart;
+        },
+        child: const CartPage(),
+      ),
+    );
+  }
+}
+
+// --- Cart Page ---
+class CartPage extends StatefulWidget {
+  const CartPage({super.key});
+
+  @override
+  State<CartPage> createState() => _CartPageState();
+}
+
+class _CartPageState extends State<CartPage> with TickerProviderStateMixin {
+  late final FlexiCart<ProductItem> cart;
+  final TextEditingController promoController = TextEditingController();
+
+  final List<ICartValidator> availableValidators = [
+    const MaxItemsValidator(5),
+    const MinTotalPriceValidator(5.0),
+    const MaxTotalPriceValidator(100.0),
+    const MinQuantityValidator(3),
+  ];
+
+  final List<ProductItem> availableProducts = [
+    ProductItem(id: 'apple', name: 'Apple', price: 2.5),
+    ProductItem(id: 'banana', name: 'Banana', price: 1.2),
+    ProductItem(id: 'orange', name: 'Orange', price: 1.8),
+    ProductItem(id: 'mango', name: 'Mango', price: 3.0),
+  ];
+
+  @override
+  void initState() {
+    super.initState();
+    cart = Provider.of<FlexiCart<ProductItem>>(context, listen: false);
+
+    promoController.addListener(() {
+      final code = promoController.text.trim();
+      cart.setPromoCode(code.isEmpty ? null : code);
+    });
+  }
+
+  @override
+  void dispose() {
+    promoController.dispose();
+    cart.dispose();
+    super.dispose();
+  }
+
+  void _addItem(ProductItem product) {
+    cart.add(
+        ProductItem(
+          id: product.id,
+          name: product.name,
+          price: product.price,
+        ),
+        increment: true);
+  }
+
+  void _removeItem(ProductItem item) => cart.delete(item);
+
+  void _changeQuantity(ProductItem item, int change) {
+    final newQuantity = item.notNullQty() + change;
+    if (newQuantity <= 0) {
+      _removeItem(item);
+    } else {
+      cart.add(item..quantity = newQuantity);
+    }
+  }
+
+  void _toggleValidator(ICartValidator validator) {
+    setState(() {
+      if (cart.validators().contains(validator)) {
+        cart.removeValidator(validator);
+      } else {
+        cart.addValidator(validator);
+      }
+    });
+  }
+
+  @override
+  @override
+  Widget build(BuildContext context) {
+    context.watch<FlexiCart<ProductItem>>();
+    final items = cart.itemsList;
+    final errors = cart.validationErrors.values.toList();
+    final hasPromo = cart.promoCode?.isNotEmpty ?? false;
+    final promoError = cart.validationErrors['promoCode'] as String?;
+    final promoValid = hasPromo && promoError == null;
+
+    final discountPercent = (cart.promoCode?.toLowerCase() == 'flutter50')
+        ? 0.5
+        : (cart.promoCode?.toLowerCase() == 'save20')
+            ? 0.2
+            : 0.0;
+
+    final totalPrice = cart.totalPrice();
+    final discountedPrice = totalPrice * (1 - discountPercent);
+
+    return Scaffold(
+      body: SafeArea(
+        child: Column(
+          children: [
+            Expanded(
+              child: CustomScrollView(
+                slivers: [
+                  SliverAppBar(
+                    title: const Text('Fancy Flexi Cart'),
+                    floating: true,
+                    pinned: true,
+                    snap: true,
+                    centerTitle: true,
+                    elevation: 4,
+                  ),
+                  SliverPadding(
+                    padding: const EdgeInsets.all(16),
+                    sliver: SliverList(
+                      delegate: SliverChildListDelegate([
+                        if (errors.isNotEmpty)
+                          Container(
+                            margin: const EdgeInsets.only(bottom: 12),
+                            padding: const EdgeInsets.all(12),
+                            decoration: BoxDecoration(
+                              color: Colors.red.shade100,
+                              borderRadius: BorderRadius.circular(10),
+                              border: Border.all(color: Colors.red.shade400),
+                            ),
+                            child: Column(
+                              crossAxisAlignment: CrossAxisAlignment.start,
+                              children: errors
+                                  .map((e) => Padding(
+                                        padding: const EdgeInsets.symmetric(
+                                            vertical: 2),
+                                        child: Text(
+                                          "- ${e.toString()}",
+                                          style: const TextStyle(
+                                            color: Colors.red,
+                                            fontWeight: FontWeight.bold,
+                                            fontSize: 14,
+                                          ),
+                                        ),
+                                      ))
+                                  .toList(),
+                            ),
+                          ),
+                        Text("Promo Code",
+                            style: TextStyle(
+                                fontSize: 18,
+                                fontWeight: FontWeight.bold,
+                                color: Colors.teal.shade800)),
+                        SizedBox(
+                          height: 8,
+                        ),
+                        Row(
+                          children: [
+                            Expanded(
+                              child: TextField(
+                                controller: promoController,
+                                decoration: InputDecoration(
+                                  filled: true,
+                                  isDense: true,
+                                  hintText: 'Promo Code',
+                                  fillColor: Colors.teal.shade50,
+                                  border: OutlineInputBorder(
+                                    borderRadius: BorderRadius.circular(15),
+                                    borderSide: BorderSide.none,
+                                  ),
+                                  errorText: promoError,
+                                  suffixIcon: Row(
+                                    mainAxisSize: MainAxisSize.min,
+                                    children: [
+                                      if (promoValid)
+                                        const Icon(Icons.check_circle,
+                                            color: Colors.green),
+                                      if (promoController.text.isNotEmpty)
+                                        IconButton(
+                                          icon: const Icon(Icons.clear),
+                                          onPressed: () {
+                                            promoController.clear();
+                                            FocusScope.of(context).unfocus();
+                                          },
+                                        ),
+                                    ],
+                                  ),
+                                ),
+                                onSubmitted: (_) {
+                                  FocusScope.of(context).unfocus();
+                                  if (promoError != null) {
+                                    ScaffoldMessenger.of(context)
+                                        .showSnackBar(SnackBar(
+                                      content:
+                                          Text('Promo code error: $promoError'),
+                                      backgroundColor: Colors.red.shade400,
+                                    ));
+                                  } else if (promoValid) {
+                                    ScaffoldMessenger.of(context)
+                                        .showSnackBar(const SnackBar(
+                                      content: Text('Promo code applied!'),
+                                      backgroundColor: Colors.green,
+                                    ));
+                                  }
+                                },
+                              ),
+                            ),
+                            const SizedBox(width: 8),
+                            FilledButton(
+                              onPressed: () {
+                                FocusScope.of(context).unfocus();
+                                if (promoError != null) {
+                                  ScaffoldMessenger.of(context)
+                                      .showSnackBar(SnackBar(
+                                    content:
+                                        Text('Promo code error: $promoError'),
+                                    backgroundColor: Colors.red.shade400,
+                                  ));
+                                } else if (promoValid) {
+                                  ScaffoldMessenger.of(context)
+                                      .showSnackBar(const SnackBar(
+                                    content: Text('Promo code applied!'),
+                                    backgroundColor: Colors.green,
+                                  ));
+                                }
+                              },
+                              child: const Text('Apply'),
+                            ),
+                          ],
+                        ),
+                        const SizedBox(height: 16),
+                        Divider(
+                          color: Colors.teal.shade300,
+                          thickness: .5,
+                        ),
+                        Text("Available Validators",
+                            style: TextStyle(
+                                fontSize: 18,
+                                fontWeight: FontWeight.bold,
+                                color: Colors.teal.shade800)),
+                        SizedBox(
+                          height: 8,
+                        ),
+                        Wrap(
+                          spacing: 8,
+                          runSpacing: 12,
+                          children: availableValidators.map((validator) {
+                            final isActive =
+                                cart.validators().contains(validator);
+                            return AnimatedContainer(
+                              duration: const Duration(milliseconds: 300),
+                              decoration: BoxDecoration(
+                                color: isActive
+                                    ? Colors.teal.shade100
+                                    : Colors.grey.shade300,
+                                borderRadius: BorderRadius.circular(20),
+                              ),
+                              child: FilterChip(
+                                selected: isActive,
+                                label: Text(
+                                  validator is MaxItemsValidator
+                                      ? 'Max Items (${validator.maxItems})'
+                                      : validator is MinTotalPriceValidator
+                                          ? 'Min Price \$${validator.minPrice}'
+                                          : validator is MaxTotalPriceValidator
+                                              ? 'Max Price \$${validator.maxPrice}'
+                                              : validator
+                                                      is MinQuantityValidator
+                                                  ? 'Min Qty ${validator.minQuantity}'
+                                                  : 'Validator',
+                                  style: TextStyle(
+                                      color: isActive
+                                          ? Colors.teal.shade900
+                                          : Colors.black87,
+                                      fontWeight: FontWeight.w600),
+                                ),
+                                onSelected: (_) => _toggleValidator(validator),
+                                selectedColor: Colors.transparent,
+                                showCheckmark: false,
+                                backgroundColor: Colors.transparent,
+                              ),
+                            );
+                          }).toList(),
+                        ),
+                        const SizedBox(height: 16),
+                        Divider(
+                          color: Colors.teal.shade300,
+                          thickness: .5,
+                        ),
+                        Text("Available Products",
+                            style: TextStyle(
+                                fontSize: 18,
+                                fontWeight: FontWeight.bold,
+                                color: Colors.teal.shade800)),
+                        const SizedBox(height: 6),
+                        Wrap(
+                          spacing: 12,
+                          children: availableProducts.map((product) {
+                            return FilledButton.tonal(
+                              onPressed: () => _addItem(product),
+                              child: Text('Add ${product.name}'),
+                            );
+                          }).toList(),
+                        ),
+                        const SizedBox(height: 16),
+                        if (items.isEmpty)
+                          const Center(
+                            child: Text(
+                              'Your cart is empty',
+                              style:
+                                  TextStyle(fontSize: 18, color: Colors.grey),
+                            ),
+                          ),
+                      ]),
+                    ),
+                  ),
+                  if (items.isNotEmpty)
+                    SliverList(
+                      delegate: SliverChildBuilderDelegate(
+                        (context, index) {
+                          final item = items[index];
+                          return Card(
+                            elevation: 0,
+                            margin: const EdgeInsets.symmetric(
+                                vertical: 6, horizontal: 16),
+                            shape: RoundedRectangleBorder(
+                                borderRadius: BorderRadius.circular(12)),
+                            child: ListTile(
+                              contentPadding: const EdgeInsets.symmetric(
+                                  horizontal: 20, vertical: 8),
+                              title: Text(
+                                item.name,
+                                style: const TextStyle(
+                                    fontSize: 18, fontWeight: FontWeight.bold),
+                              ),
+                              subtitle: Text(
+                                  'Price: \$${item.price.toStringAsFixed(2)} × ${item.quantity} = \$${(item.price * item.notNullQty()).toStringAsFixed(2)}'),
+                              trailing: Row(
+                                mainAxisSize: MainAxisSize.min,
+                                children: [
+                                  IconButton(
+                                    onPressed: () => _changeQuantity(item, -1),
+                                    icon:
+                                        const Icon(Icons.remove_circle_outline),
+                                  ),
+                                  Text(
+                                    '${item.quantity}',
+                                    style: const TextStyle(fontSize: 16),
+                                  ),
+                                  IconButton(
+                                    onPressed: () => _changeQuantity(item, 1),
+                                    icon: const Icon(Icons.add_circle_outline),
+                                  ),
+                                ],
+                              ),
+                              onLongPress: () => _removeItem(item),
+                            ),
+                          );
+                        },
+                        childCount: items.length,
+                      ),
+                    ),
+                  const SliverToBoxAdapter(child: SizedBox(height: 24)),
+                ],
+              ),
+            ),
+            Material(
+              child: Padding(
+                padding: const EdgeInsets.all(16),
+                child: Column(
+                  children: [
+                    Row(
+                      mainAxisAlignment: MainAxisAlignment.spaceBetween,
+                      children: [
+                        const Text('Subtotal:',
+                            style: TextStyle(fontWeight: FontWeight.w600)),
+                        Text('\$${totalPrice.toStringAsFixed(2)}'),
+                      ],
+                    ),
+                    if (discountPercent > 0)
+                      Row(
+                        mainAxisAlignment: MainAxisAlignment.spaceBetween,
+                        children: [
+                          Text(
+                              'Discount (${(discountPercent * 100).toInt()}%):',
+                              style: TextStyle(
+                                  fontWeight: FontWeight.w600,
+                                  color: Colors.green.shade700)),
+                          Text(
+                              '-\$${(totalPrice * discountPercent).toStringAsFixed(2)}',
+                              style: TextStyle(color: Colors.green.shade700)),
+                        ],
+                      ),
+                    const SizedBox(height: 4),
+                    Row(
+                      mainAxisAlignment: MainAxisAlignment.spaceBetween,
+                      children: [
+                        const Text('Total:',
+                            style: TextStyle(
+                                fontWeight: FontWeight.bold, fontSize: 18)),
+                        Text(
+                          '\$${discountedPrice.toStringAsFixed(2)}',
+                          style: const TextStyle(
+                              fontWeight: FontWeight.bold, fontSize: 18),
+                        ),
+                      ],
+                    ),
+                  ],
+                ),
+              ),
+            ),
+          ],
+        ),
+      ),
+    );
+  }
+}
Index: ../flexi_cart/lib/src/cart_validators/cart_max_total_validator.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../flexi_cart/lib/src/cart_validators/cart_max_total_validator.dart b/../flexi_cart/lib/src/cart_validators/cart_max_total_validator.dart
new file mode 100644
--- /dev/null	(date 1748187309110)
+++ b/../flexi_cart/lib/src/cart_validators/cart_max_total_validator.dart	(date 1748187309110)
@@ -0,0 +1,21 @@
+part of 'cart_validators.dart';
+
+/// Validator that checks if the number of different item types in the cart
+class CartMaxTotalValidator extends ICartValidator {
+  /// exceeds a specified minimum total price.
+  CartMaxTotalValidator(this.minAmount);
+
+  /// Creates an instance of [CartMinTotalValidator] with the specified
+  final double minAmount;
+
+  @override
+  Map<String, dynamic>? validate(FlexiCart cart) {
+    if (cart.totalPrice() < minAmount) {
+      return {
+        CartValidatorMessage.minTotal:
+        'Minimum total price is \$${minAmount.toStringAsFixed(2)}',
+      };
+    }
+    return null;
+  }
+}
diff --git a/../flexi_cart/lib/src/cart_item.dart b/../flexi_cart/lib/src/models/cart_item.dart
rename from ../flexi_cart/lib/src/cart_item.dart
rename to ../flexi_cart/lib/src/models/cart_item.dart
